!function(t){function e(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};e.m=t,e.c=r,e.p="/",e(0)}([function(t,e,r){"use strict";var a=r(29),n=function(t){return t&&t.__esModule?t:{default:t}}(a),s=void 0;self.onmessage=function(t){switch(t.data.command){case"init":s=new n.default(t.data.config);break;case"record":s.record(t.data.buffer);break;case"getBuffer":s.getBuffer(self);break;case"exportMP3":s.exportMP3(self);break;case"clear":s.clear()}}},function(t,e){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){var a=r(25)("wks"),n=r(27),s=r(2).Symbol,i="function"==typeof s;(t.exports=function(t){return a[t]||(a[t]=i&&s[t]||(i?s:n)("Symbol."+t))}).store=a},function(t,e,r){t.exports=!r(12)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r){var a=r(10),n=r(23);t.exports=r(4)?function(t,e,r){return a.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var a=r(13);t.exports=function(t){if(!a(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){var a=r(2),n=r(1),s=r(47),i=r(5),o=function(t,e,r){var _,l,f,u=t&o.F,c=t&o.G,h=t&o.S,p=t&o.P,b=t&o.B,m=t&o.W,v=c?n:n[e]||(n[e]={}),d=v.prototype,g=c?a:h?a[e]:(a[e]||{}).prototype;c&&(r=e);for(_ in r)(l=!u&&g&&void 0!==g[_])&&_ in v||(f=l?g[_]:r[_],v[_]=c&&"function"!=typeof g[_]?r[_]:b&&l?s(f,a):m&&g[_]==f?function(t){var e=function(e,r,a){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,a)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):p&&"function"==typeof f?s(Function.call,f):f,p&&((v.virtual||(v.virtual={}))[_]=f,t&o.R&&d&&!d[_]&&i(d,_,f)))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,t.exports=o},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e){t.exports={}},function(t,e,r){var a=r(6),n=r(49),s=r(64),i=Object.defineProperty;e.f=r(4)?Object.defineProperty:function(t,e,r){if(a(t),e=s(e,!0),a(r),n)try{return i(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var a=r(25)("keys"),n=r(27);t.exports=function(t){return a[t]||(a[t]=n(t))}},function(t,e){var r=Math.ceil,a=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?a:r)(t)}},function(t,e,r){var a=r(20),n=r(11);t.exports=function(t){return a(n(t))}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var a=r(13),n=r(2).document,s=a(n)&&a(n.createElement);t.exports=function(t){return s?n.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var a=r(17);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==a(t)?t.split(""):Object(t)}},function(t,e,r){"use strict";var a=r(52),n=r(7),s=r(60),i=r(5),o=r(8),_=r(9),l=r(50),f=r(24),u=r(57),c=r(3)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,r,b,m,v,d){l(r,e,b);var g,S,R,A=function(t){if(!h&&t in B)return B[t];switch(t){case"keys":return function(){return new r(this,t)};case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},y=e+" Iterator",w="values"==m,M=!1,B=t.prototype,E=B[c]||B["@@iterator"]||m&&B[m],T=E||A(m),x=m?w?A("entries"):T:void 0,k="Array"==e?B.entries||E:E;if(k&&(R=u(k.call(new t)))!==Object.prototype&&(f(R,y,!0),a||o(R,c)||i(R,c,p)),w&&E&&"values"!==E.name&&(M=!0,T=function(){return E.call(this)}),a&&!d||!h&&!M&&B[c]||i(B,c,T),_[e]=T,_[y]=p,m)if(g={values:w?T:A("values"),keys:v?T:A("keys"),entries:x},d)for(S in g)S in B||s(B,S,g[S]);else n(n.P+n.F*(h||M),e,g);return g}},function(t,e,r){var a=r(58),n=r(19);t.exports=Object.keys||function(t){return a(t,n)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var a=r(10).f,n=r(8),s=r(3)("toStringTag");t.exports=function(t,e,r){t&&!n(t=r?t:t.prototype,s)&&a(t,s,{configurable:!0,value:e})}},function(t,e,r){var a=r(2),n=a["__core-js_shared__"]||(a["__core-js_shared__"]={});t.exports=function(t){return n[t]||(n[t]={})}},function(t,e,r){var a=r(11);t.exports=function(t){return Object(a(t))}},function(t,e){var r=0,a=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+a).toString(36))}},function(t,e,r){(function(t){"use strict";function a(){function t(t){return new Int8Array(t)}function e(t){return new Int16Array(t)}function r(t){return new Int32Array(t)}function a(t){return new Float32Array(t)}function n(t){return new Float64Array(t)}function i(t){if(1==t.length)return a(t[0]);var e=t[0];t=t.slice(1);for(var r=[],n=0;n<e;n++)r.push(i(t));return r}function o(t){if(1==t.length)return r(t[0]);var e=t[0];t=t.slice(1);for(var a=[],n=0;n<e;n++)a.push(o(t));return a}function _(t){if(1==t.length)return e(t[0]);var r=t[0];t=t.slice(1);for(var a=[],n=0;n<r;n++)a.push(_(t));return a}function l(t){if(1==t.length)return new Array(t[0]);var e=t[0];t=t.slice(1);for(var r=[],a=0;a<e;a++)r.push(l(t));return r}function f(t){this.ordinal=t}function u(t){this.ordinal=t}function c(t){var e=t;this.ordinal=function(){return e}}function h(){this.getLameVersion=function(){return"3.98.4"},this.getLameShortVersion=function(){return"3.98.4"},this.getLameVeryShortVersion=function(){return"LAME3.98r"},this.getPsyVersion=function(){return"0.93"},this.getLameUrl=function(){return"http://www.mp3dev.org/"},this.getLameOsBitness=function(){return"32bits"}}function p(){function t(t,e,r,a,n,s,i,o,_,l,f,u,c,h,p){this.vbr_q=t,this.quant_comp=e,this.quant_comp_s=r,this.expY=a,this.st_lrm=n,this.st_s=s,this.masking_adj=i,this.masking_adj_short=o,this.ath_lower=_,this.ath_curve=l,this.ath_sensitivity=f,this.interch=u,this.safejoint=c,this.sfb21mod=h,this.msfix=p}function e(t,e,r,a,n,s,i,o,_,l,f,u,c,h){this.quant_comp=e,this.quant_comp_s=r,this.safejoint=a,this.nsmsfix=n,this.st_lrm=s,this.st_s=i,this.nsbass=o,this.scale=_,this.masking_adj=l,this.ath_lower=f,this.ath_curve=u,this.interch=c,this.sfscale=h}function r(t,e,r){var a=t.VBR==u.vbr_rh?i:o,s=t.VBR_q_frac,_=a[e],l=a[e+1],f=_;_.st_lrm=_.st_lrm+s*(l.st_lrm-_.st_lrm),_.st_s=_.st_s+s*(l.st_s-_.st_s),_.masking_adj=_.masking_adj+s*(l.masking_adj-_.masking_adj),_.masking_adj_short=_.masking_adj_short+s*(l.masking_adj_short-_.masking_adj_short),_.ath_lower=_.ath_lower+s*(l.ath_lower-_.ath_lower),_.ath_curve=_.ath_curve+s*(l.ath_curve-_.ath_curve),_.ath_sensitivity=_.ath_sensitivity+s*(l.ath_sensitivity-_.ath_sensitivity),_.interch=_.interch+s*(l.interch-_.interch),_.msfix=_.msfix+s*(l.msfix-_.msfix),n(t,f.vbr_q),0!=r?t.quant_comp=f.quant_comp:Math.abs(t.quant_comp- -1)>0||(t.quant_comp=f.quant_comp),0!=r?t.quant_comp_short=f.quant_comp_s:Math.abs(t.quant_comp_short- -1)>0||(t.quant_comp_short=f.quant_comp_s),0!=f.expY&&(t.experimentalY=0!=f.expY),0!=r?t.internal_flags.nsPsy.attackthre=f.st_lrm:Math.abs(t.internal_flags.nsPsy.attackthre- -1)>0||(t.internal_flags.nsPsy.attackthre=f.st_lrm),0!=r?t.internal_flags.nsPsy.attackthre_s=f.st_s:Math.abs(t.internal_flags.nsPsy.attackthre_s- -1)>0||(t.internal_flags.nsPsy.attackthre_s=f.st_s),0!=r?t.maskingadjust=f.masking_adj:Math.abs(t.maskingadjust-0)>0||(t.maskingadjust=f.masking_adj),0!=r?t.maskingadjust_short=f.masking_adj_short:Math.abs(t.maskingadjust_short-0)>0||(t.maskingadjust_short=f.masking_adj_short),0!=r?t.ATHlower=-f.ath_lower/10:Math.abs(10*-t.ATHlower-0)>0||(t.ATHlower=-f.ath_lower/10),0!=r?t.ATHcurve=f.ath_curve:Math.abs(t.ATHcurve- -1)>0||(t.ATHcurve=f.ath_curve),0!=r?t.athaa_sensitivity=f.ath_sensitivity:Math.abs(t.athaa_sensitivity- -1)>0||(t.athaa_sensitivity=f.ath_sensitivity),f.interch>0&&(0!=r?t.interChRatio=f.interch:Math.abs(t.interChRatio- -1)>0||(t.interChRatio=f.interch)),f.safejoint>0&&(t.exp_nspsytune=t.exp_nspsytune|f.safejoint),f.sfb21mod>0&&(t.exp_nspsytune=t.exp_nspsytune|f.sfb21mod<<20),0!=r?t.msfix=f.msfix:Math.abs(t.msfix- -1)>0||(t.msfix=f.msfix),0==r&&(t.VBR_q=e,t.VBR_q_frac=s)}function a(t,e,r){var a=e,n=s.nearestBitrateFullIndex(e);if(t.VBR=u.vbr_abr,t.VBR_mean_bitrate_kbps=a,t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,320),t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.brate=t.VBR_mean_bitrate_kbps,t.VBR_mean_bitrate_kbps>320&&(t.disable_reservoir=!0),_[n].safejoint>0&&(t.exp_nspsytune=2|t.exp_nspsytune),_[n].sfscale>0&&(t.internal_flags.noise_shaping=2),Math.abs(_[n].nsbass)>0){var i=int(4*_[n].nsbass);i<0&&(i+=64),t.exp_nspsytune=t.exp_nspsytune|i<<2}return 0!=r?t.quant_comp=_[n].quant_comp:Math.abs(t.quant_comp- -1)>0||(t.quant_comp=_[n].quant_comp),0!=r?t.quant_comp_short=_[n].quant_comp_s:Math.abs(t.quant_comp_short- -1)>0||(t.quant_comp_short=_[n].quant_comp_s),0!=r?t.msfix=_[n].nsmsfix:Math.abs(t.msfix- -1)>0||(t.msfix=_[n].nsmsfix),0!=r?t.internal_flags.nsPsy.attackthre=_[n].st_lrm:Math.abs(t.internal_flags.nsPsy.attackthre- -1)>0||(t.internal_flags.nsPsy.attackthre=_[n].st_lrm),0!=r?t.internal_flags.nsPsy.attackthre_s=_[n].st_s:Math.abs(t.internal_flags.nsPsy.attackthre_s- -1)>0||(t.internal_flags.nsPsy.attackthre_s=_[n].st_s),0!=r?t.scale=_[n].scale:Math.abs(t.scale- -1)>0||(t.scale=_[n].scale),0!=r?t.maskingadjust=_[n].masking_adj:Math.abs(t.maskingadjust-0)>0||(t.maskingadjust=_[n].masking_adj),_[n].masking_adj>0?0!=r?t.maskingadjust_short=.9*_[n].masking_adj:Math.abs(t.maskingadjust_short-0)>0||(t.maskingadjust_short=.9*_[n].masking_adj):0!=r?t.maskingadjust_short=1.1*_[n].masking_adj:Math.abs(t.maskingadjust_short-0)>0||(t.maskingadjust_short=1.1*_[n].masking_adj),0!=r?t.ATHlower=-_[n].ath_lower/10:Math.abs(10*-t.ATHlower-0)>0||(t.ATHlower=-_[n].ath_lower/10),0!=r?t.ATHcurve=_[n].ath_curve:Math.abs(t.ATHcurve- -1)>0||(t.ATHcurve=_[n].ath_curve),0!=r?t.interChRatio=_[n].interch:Math.abs(t.interChRatio- -1)>0||(t.interChRatio=_[n].interch),e}function n(t,e){var r=0;return 0>e&&(r=-1,e=0),9<e&&(r=-1,e=9),t.VBR_q=e,t.VBR_q_frac=0,r}var s;this.setModules=function(t){s=t};var i=[new t(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new t(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new t(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new t(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new t(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new t(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new t(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new t(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new t(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],o=[new t(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new t(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new t(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new t(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new t(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new t(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new t(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new t(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new t(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)],_=[new e(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new e(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new e(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new e(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new e(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new e(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new e(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new e(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new e(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new e(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new e(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new e(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new e(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new e(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new e(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new e(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new e(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];this.apply_preset=function(t,e,n){switch(e){case j.R3MIX:e=j.V3,t.VBR=u.vbr_mtrh;break;case j.MEDIUM:e=j.V4,t.VBR=u.vbr_rh;break;case j.MEDIUM_FAST:e=j.V4,t.VBR=u.vbr_mtrh;break;case j.STANDARD:e=j.V2,t.VBR=u.vbr_rh;break;case j.STANDARD_FAST:e=j.V2,t.VBR=u.vbr_mtrh;break;case j.EXTREME:e=j.V0,t.VBR=u.vbr_rh;break;case j.EXTREME_FAST:e=j.V0,t.VBR=u.vbr_mtrh;break;case j.INSANE:return e=320,t.preset=e,a(t,e,n),t.VBR=u.vbr_off,e}switch(t.preset=e,e){case j.V9:return r(t,9,n),e;case j.V8:return r(t,8,n),e;case j.V7:return r(t,7,n),e;case j.V6:return r(t,6,n),e;case j.V5:return r(t,5,n),e;case j.V4:return r(t,4,n),e;case j.V3:return r(t,3,n),e;case j.V2:return r(t,2,n),e;case j.V1:return r(t,1,n),e;case j.V0:return r(t,0,n),e}return 8<=e&&e<=320?a(t,e,n):(t.preset=0,e)}}function b(){function t(t,e,r,a,n,s){for(;0!=n--;)r[a]=1e-10+t[e+0]*s[0]-r[a-1]*s[1]+t[e-1]*s[2]-r[a-2]*s[3]+t[e-2]*s[4]-r[a-3]*s[5]+t[e-3]*s[6]-r[a-4]*s[7]+t[e-4]*s[8]-r[a-5]*s[9]+t[e-5]*s[10]-r[a-6]*s[11]+t[e-6]*s[12]-r[a-7]*s[13]+t[e-7]*s[14]-r[a-8]*s[15]+t[e-8]*s[16]-r[a-9]*s[17]+t[e-9]*s[18]-r[a-10]*s[19]+t[e-10]*s[20],++a,++e}function e(t,e,r,a,n,s){for(;0!=n--;)r[a]=t[e+0]*s[0]-r[a-1]*s[1]+t[e-1]*s[2]-r[a-2]*s[3]+t[e-2]*s[4],++a,++e}function r(t,e){for(var r=0;r<MAX_ORDER;r++)t.linprebuf[r]=t.lstepbuf[r]=t.loutbuf[r]=t.rinprebuf[r]=t.rstepbuf[r]=t.routbuf[r]=0;switch(0|e){case 48e3:t.reqindex=0;break;case 44100:t.reqindex=1;break;case 32e3:t.reqindex=2;break;case 24e3:t.reqindex=3;break;case 22050:t.reqindex=4;break;case 16e3:t.reqindex=5;break;case 12e3:t.reqindex=6;break;case 11025:t.reqindex=7;break;case 8e3:t.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return t.sampleWindow=0|(e*_+l-1)/l,t.lsum=0,t.rsum=0,t.totsamp=0,W.ill(t.A,0),INIT_GAIN_ANALYSIS_OK}function a(t){return t*t}function n(t,e){var r,a=0;for(r=0;r<e;r++)a+=t[r];if(0==a)return GAIN_NOT_ENOUGH_SAMPLES;var n=0|Math.ceil(a*(1-o));for(r=e;r-- >0&&!((n-=t[r])<=0););return i-r/b.STEPS_per_dB}var i=64.82,o=(b.YULE_ORDER,.95),_=(b.MAX_SAMP_FREQ,b.RMS_WINDOW_TIME_NUMERATOR),l=b.RMS_WINDOW_TIME_DENOMINATOR,f=(b.MAX_SAMPLES_PER_WINDOW,[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]]),u=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];this.InitGainAnalysis=function(t,e){return r(t,e)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(t.linpre=MAX_ORDER,t.rinpre=MAX_ORDER,t.lstep=MAX_ORDER,t.rstep=MAX_ORDER,t.lout=MAX_ORDER,t.rout=MAX_ORDER,W.fill(t.B,0),INIT_GAIN_ANALYSIS_OK)},this.AnalyzeSamples=function(r,n,i,o,_,l,c){var h,p,m,v,d,g,S;if(0==l)return GAIN_ANALYSIS_OK;switch(S=0,d=l,c){case 1:o=n,_=i;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(l<MAX_ORDER?(J.arraycopy(n,i,r.linprebuf,MAX_ORDER,l),J.arraycopy(o,_,r.rinprebuf,MAX_ORDER,l)):(J.arraycopy(n,i,r.linprebuf,MAX_ORDER,MAX_ORDER),J.arraycopy(o,_,r.rinprebuf,MAX_ORDER,MAX_ORDER));d>0;){g=d>r.sampleWindow-r.totsamp?r.sampleWindow-r.totsamp:d,S<MAX_ORDER?(h=r.linpre+S,p=r.linprebuf,m=r.rinpre+S,v=r.rinprebuf,g>MAX_ORDER-S&&(g=MAX_ORDER-S)):(h=i+S,p=n,m=_+S,v=o),t(p,h,r.lstepbuf,r.lstep+r.totsamp,g,f[r.reqindex]),t(v,m,r.rstepbuf,r.rstep+r.totsamp,g,f[r.reqindex]),e(r.lstepbuf,r.lstep+r.totsamp,r.loutbuf,r.lout+r.totsamp,g,u[r.reqindex]),e(r.rstepbuf,r.rstep+r.totsamp,r.routbuf,r.rout+r.totsamp,g,u[r.reqindex]),h=r.lout+r.totsamp,p=r.loutbuf,m=r.rout+r.totsamp,v=r.routbuf;for(var R=g%8;0!=R--;)r.lsum+=a(p[h++]),r.rsum+=a(v[m++]);for(R=g/8;0!=R--;)r.lsum+=a(p[h+0])+a(p[h+1])+a(p[h+2])+a(p[h+3])+a(p[h+4])+a(p[h+5])+a(p[h+6])+a(p[h+7]),h+=8,r.rsum+=a(v[m+0])+a(v[m+1])+a(v[m+2])+a(v[m+3])+a(v[m+4])+a(v[m+5])+a(v[m+6])+a(v[m+7]),m+=8;if(d-=g,S+=g,r.totsamp+=g,r.totsamp==r.sampleWindow){var A=10*b.STEPS_per_dB*(0,s.default)((r.lsum+r.rsum)/r.totsamp*.5+1e-37),y=A<=0?0:0|A;y>=r.A.length&&(y=r.A.length-1),r.A[y]++,r.lsum=r.rsum=0,J.arraycopy(r.loutbuf,r.totsamp,r.loutbuf,0,MAX_ORDER),J.arraycopy(r.routbuf,r.totsamp,r.routbuf,0,MAX_ORDER),J.arraycopy(r.lstepbuf,r.totsamp,r.lstepbuf,0,MAX_ORDER),J.arraycopy(r.rstepbuf,r.totsamp,r.rstepbuf,0,MAX_ORDER),r.totsamp=0}if(r.totsamp>r.sampleWindow)return GAIN_ANALYSIS_ERROR}return l<MAX_ORDER?(J.arraycopy(r.linprebuf,l,r.linprebuf,0,MAX_ORDER-l),J.arraycopy(r.rinprebuf,l,r.rinprebuf,0,MAX_ORDER-l),J.arraycopy(n,i,r.linprebuf,MAX_ORDER-l,l),J.arraycopy(o,_,r.rinprebuf,MAX_ORDER-l,l)):(J.arraycopy(n,i+l-MAX_ORDER,r.linprebuf,0,MAX_ORDER),J.arraycopy(o,_+l-MAX_ORDER,r.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(t){for(var e=n(t.A,t.A.length),r=0;r<t.A.length;r++)t.B[r]+=t.A[r],t.A[r]=0;for(var r=0;r<MAX_ORDER;r++)t.linprebuf[r]=t.lstepbuf[r]=t.loutbuf[r]=t.rinprebuf[r]=t.rstepbuf[r]=t.routbuf[r]=0;return t.totsamp=0,t.lsum=t.rsum=0,e}}function m(){var t;this.setModules=function(e){t=e},this.ResvFrameBegin=function(e,r){var a,n=e.internal_flags,s=n.l3_side,i=t.getframebits(e);r.bits=(i-8*n.sideinfo_len)/n.mode_gr;var o=2048*n.mode_gr-8;e.brate>320?a=8*int(1e3*e.brate/(e.out_samplerate/1152)/8+.5):(a=11520,e.strict_ISO&&(a=8*int(32e4/(e.out_samplerate/1152)/8+.5))),n.ResvMax=a-i,n.ResvMax>o&&(n.ResvMax=o),(n.ResvMax<0||e.disable_reservoir)&&(n.ResvMax=0);var _=r.bits*n.mode_gr+Math.min(n.ResvSize,n.ResvMax);return _>a&&(_=a),s.resvDrain_pre=0,null!=n.pinfo&&(n.pinfo.mean_bits=r.bits/2,n.pinfo.resvsize=n.ResvSize),_},this.ResvMaxBits=function(t,e,r,a){var n,s=t.internal_flags,i=s.ResvSize,o=s.ResvMax;0!=a&&(i+=e),0!=(1&s.substep_shaping)&&(o*=.9),r.bits=e,10*i>9*o?(n=i-9*o/10,r.bits+=n,s.substep_shaping|=128):(n=0,s.substep_shaping&=127,t.disable_reservoir||0!=(1&s.substep_shaping)||(r.bits-=.1*e));var _=i<6*s.ResvMax/10?i:6*s.ResvMax/10;return _-=n,_<0&&(_=0),_},this.ResvAdjust=function(t,e){t.ResvSize-=e.part2_3_length+e.part2_length},this.ResvFrameEnd=function(t,e){var r,a=t.l3_side;t.ResvSize+=e*t.mode_gr;var n=0;a.resvDrain_post=0,a.resvDrain_pre=0,0!=(r=t.ResvSize%8)&&(n+=r),(r=t.ResvSize-n-t.ResvMax)>0&&(n+=r);var s=Math.min(8*a.main_data_begin,n)/8;a.resvDrain_pre+=8*s,n-=8*s,t.ResvSize-=8*s,a.main_data_begin-=s,a.resvDrain_post+=n,t.ResvSize-=n}}function v(){function t(t){this.bits=0|t}function e(t,e,r,a,n,s){var i=.5946/e;for(t>>=1;0!=t--;)n[s++]=i>r[a++]?0:1,n[s++]=i>r[a++]?0:1}function a(t,e,r,a,n,s){t>>=1;var i=t%2;for(t>>=1;0!=t--;){var o,_,l,f,u,c,h,b;o=r[a++]*e,_=r[a++]*e,u=0|o,l=r[a++]*e,c=0|_,f=r[a++]*e,h=0|l,o+=p.adj43[u],b=0|f,_+=p.adj43[c],n[s++]=0|o,l+=p.adj43[h],n[s++]=0|_,f+=p.adj43[b],n[s++]=0|l,n[s++]=0|f}if(0!=i){var o,_,u,c;o=r[a++]*e,_=r[a++]*e,u=0|o,c=0|_,o+=p.adj43[u],_+=p.adj43[c],n[s++]=0|o,n[s++]=0|_}}function n(t,r,n,s,i){var o,_,l,f=0,u=0,c=0,h=0,b=r,m=0,v=b,d=0,g=t,S=0;for(l=null!=i&&s.global_gain==i.global_gain,_=s.block_type==H.SHORT_TYPE?38:21,o=0;o<=_;o++){var R=-1;if((l||s.block_type==H.NORM_TYPE)&&(R=s.global_gain-(s.scalefac[o]+(0!=s.preflag?p.pretab[o]:0)<<s.scalefac_scale+1)-8*s.subblock_gain[s.window[o]]),l&&i.step[o]==R)0!=u&&(a(u,n,g,S,v,d),u=0),0!=c&&(e(c,n,g,S,v,d),c=0);else{var A=s.width[o];if(f+s.width[o]>s.max_nonzero_coeff){var y;y=s.max_nonzero_coeff-f+1,W.fill(r,s.max_nonzero_coeff,576,0),A=y,A<0&&(A=0),o=_+1}if(0==u&&0==c&&(v=b,d=m,g=t,S=h),null!=i&&i.sfb_count1>0&&o>=i.sfb_count1&&i.step[o]>0&&R>=i.step[o]?(0!=u&&(a(u,n,g,S,v,d),u=0,v=b,d=m,g=t,S=h),c+=A):(0!=c&&(e(c,n,g,S,v,d),c=0,v=b,d=m,g=t,S=h),u+=A),A<=0){0!=c&&(e(c,n,g,S,v,d),c=0),0!=u&&(a(u,n,g,S,v,d),u=0);break}}o<=_&&(m+=s.width[o],h+=s.width[o],f+=s.width[o])}0!=u&&(a(u,n,g,S,v,d),u=0),0!=c&&(e(c,n,g,S,v,d),c=0)}function s(t,e,r){var a=0,n=0;do{var s=t[e++],i=t[e++];a<s&&(a=s),n<i&&(n=i)}while(e<r);return a<n&&(a=n),a}function i(t,e,r,a,n,s){var i,o=65536*et.ht[a].xlen+et.ht[n].xlen,_=0;do{var l=t[e++],f=t[e++];0!=l&&(l>14&&(l=15,_+=o),l*=16),0!=f&&(f>14&&(f=15,_+=o),l+=f),_+=et.largetbl[l]}while(e<r);return i=65535&_,_>>=16,_>i&&(_=i,a=n),s.bits+=_,a}function o(t,e,r,a){var n=0,s=et.ht[1].hlen;do{var i=2*t[e+0]+t[e+1];e+=2,n+=s[i]}while(e<r);return a.bits+=n,1}function _(t,e,r,a,n){var s,i,o=0,_=et.ht[a].xlen;i=2==a?et.table23:et.table56;do{var l=t[e+0]*_+t[e+1];e+=2,o+=i[l]}while(e<r);return s=65535&o,o>>=16,o>s&&(o=s,a++),n.bits+=o,a}function l(t,e,r,a,n){var s=0,i=0,o=0,_=et.ht[a].xlen,l=et.ht[a].hlen,f=et.ht[a+1].hlen,u=et.ht[a+2].hlen;do{var c=t[e+0]*_+t[e+1];e+=2,s+=l[c],i+=f[c],o+=u[c]}while(e<r);var h=a;return s>i&&(s=i,h++),s>o&&(s=o,h=a+2),n.bits+=s,h}function f(t,e,r,a){var n=s(t,e,r);switch(n){case 0:return n;case 1:return o(t,e,r,a);case 2:case 3:return _(t,e,r,m[n-1],a);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return l(t,e,r,m[n-1],a);default:if(n>x.IXMAX_VAL)return a.bits=x.LARGE_BITS,-1;n-=15;var f;for(f=24;f<32&&!(et.ht[f].linmax>=n);f++);var u;for(u=f-8;u<24&&!(et.ht[u].linmax>=n);u++);return i(t,e,r,u,f,a)}}function u(e,r,a,n,s,i,o){for(var _=r.big_values,l=0;l<=22;l++)n[l]=x.LARGE_BITS;for(var l=0;l<16;l++){var u=e.scalefac_band.l[l+1];if(u>=_)break;var c=0,h=new t(c),p=f(a,0,u,h);c=h.bits;for(var b=0;b<8;b++){var m=e.scalefac_band.l[l+b+2];if(m>=_)break;var v=c;h=new t(v);var d=f(a,u,m,h);v=h.bits,n[l+b]>v&&(n[l+b]=v,s[l+b]=l,i[l+b]=p,o[l+b]=d)}}}function c(e,r,a,n,s,i,o,_){for(var l=r.big_values,u=2;u<H.SBMAX_l+1;u++){var c=e.scalefac_band.l[u];if(c>=l)break;var h=s[u-2]+r.count1bits;if(a.part2_3_length<=h)break;var p=new t(h),b=f(n,c,l,p);h=p.bits,a.part2_3_length<=h||(a.assign(r),a.part2_3_length=h,a.region0_count=i[u-2],a.region1_count=u-2-i[u-2],a.table_select[0]=o[u-2],a.table_select[1]=_[u-2],a.table_select[2]=b)}}function h(t,e){for(var r,a=e.tt[1][t],n=e.tt[0][t],s=0;s<et.scfsi_band.length-1;s++){for(r=et.scfsi_band[s];r<et.scfsi_band[s+1]&&!(n.scalefac[r]!=a.scalefac[r]&&a.scalefac[r]>=0);r++);if(r==et.scfsi_band[s+1]){for(r=et.scfsi_band[s];r<et.scfsi_band[s+1];r++)a.scalefac[r]=-1;e.scfsi[t][s]=1}}var i=0,o=0;for(r=0;r<11;r++)a.scalefac[r]!=-1&&(o++,i<a.scalefac[r]&&(i=a.scalefac[r]));for(var _=0,l=0;r<H.SBPSY_l;r++)a.scalefac[r]!=-1&&(l++,_<a.scalefac[r]&&(_=a.scalefac[r]));for(var s=0;s<16;s++)if(i<d[s]&&_<g[s]){var f=S[s]*o+R[s]*l;a.part2_length>f&&(a.part2_length=f,a.scalefac_compress=s)}}var p=null;this.qupvt=null,this.setModules=function(t){this.qupvt=t,p=t};var b=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]],m=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];this.noquant_count_bits=function(e,r,a){var n=r.l3_enc,s=Math.min(576,r.max_nonzero_coeff+2>>1<<1);for(null!=a&&(a.sfb_count1=0);s>1&&0==(n[s-1]|n[s-2]);s-=2);r.count1=s;for(var i=0,o=0;s>3;s-=4){var _;if((2147483647&(n[s-1]|n[s-2]|n[s-3]|n[s-4]))>1)break;_=2*(2*(2*n[s-4]+n[s-3])+n[s-2])+n[s-1],i+=et.t32l[_],o+=et.t33l[_]}var l=i;if(r.count1table_select=0,i>o&&(l=o,r.count1table_select=1),r.count1bits=l,r.big_values=s,0==s)return l;if(r.block_type==H.SHORT_TYPE)i=3*e.scalefac_band.s[3],i>r.big_values&&(i=r.big_values),o=r.big_values;else if(r.block_type==H.NORM_TYPE){if(i=r.region0_count=e.bv_scf[s-2],o=r.region1_count=e.bv_scf[s-1],o=e.scalefac_band.l[i+o+2],i=e.scalefac_band.l[i+1],o<s){var u=new t(l);r.table_select[2]=f(n,o,s,u),l=u.bits}}else r.region0_count=7,r.region1_count=H.SBMAX_l-1-7-1,i=e.scalefac_band.l[8],o=s,i>o&&(i=o);if(i=Math.min(i,s),o=Math.min(o,s),0<i){var u=new t(l);r.table_select[0]=f(n,0,i,u),l=u.bits}if(i<o){var u=new t(l);r.table_select[1]=f(n,i,o,u),l=u.bits}if(2==e.use_best_huffman&&(r.part2_3_length=l,best_huffman_divide(e,r),l=r.part2_3_length),null!=a&&r.block_type==H.NORM_TYPE){for(var c=0;e.scalefac_band.l[c]<r.big_values;)c++;a.sfb_count1=c}return l},this.count_bits=function(t,e,r,a){var s=r.l3_enc,i=x.IXMAX_VAL/p.IPOW20(r.global_gain);if(r.xrpow_max>i)return x.LARGE_BITS;if(n(e,s,p.IPOW20(r.global_gain),r,a),0!=(2&t.substep_shaping))for(var o=0,_=r.global_gain+r.scalefac_scale,l=.634521682242439/p.IPOW20(_),f=0;f<r.sfbmax;f++){var u=r.width[f];if(0==t.pseudohalf[f])o+=u;else{var c;for(c=o,o+=u;c<o;++c)s[c]=e[c]>=l?s[c]:0}}return this.noquant_count_bits(t,r,a)},this.best_huffman_divide=function(e,a){var n=new P,s=a.l3_enc,i=r(23),o=r(23),_=r(23),l=r(23);if(a.block_type!=H.SHORT_TYPE||1!=e.mode_gr){n.assign(a),a.block_type==H.NORM_TYPE&&(u(e,a,s,i,o,_,l),c(e,n,a,s,i,o,_,l));var h=n.big_values;if(!(0==h||(s[h-2]|s[h-1])>1||(h=a.count1+2)>576)){n.assign(a),n.count1=h;for(var p=0,b=0;h>n.big_values;h-=4){var m=2*(2*(2*s[h-4]+s[h-3])+s[h-2])+s[h-1];p+=et.t32l[m],b+=et.t33l[m]}if(n.big_values=h,n.count1table_select=0,p>b&&(p=b,n.count1table_select=1),n.count1bits=p,n.block_type==H.NORM_TYPE)c(e,n,a,s,i,o,_,l);else{if(n.part2_3_length=p,p=e.scalefac_band.l[8],p>h&&(p=h),p>0){var v=new t(n.part2_3_length);n.table_select[0]=f(s,0,p,v),n.part2_3_length=v.bits}if(h>p){var v=new t(n.part2_3_length);n.table_select[1]=f(s,p,h,v),n.part2_3_length=v.bits}a.part2_3_length>n.part2_3_length&&a.assign(n)}}}};var d=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],g=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],S=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],R=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];v.slen1_tab=S,v.slen2_tab=R,this.best_scalefac_store=function(t,e,r,a){var n,s,i,o,_=a.tt[e][r],l=0;for(i=0,n=0;n<_.sfbmax;n++){var f=_.width[n];for(i+=f,o=-f;o<0&&0==_.l3_enc[o+i];o++);0==o&&(_.scalefac[n]=l=-2)}if(0==_.scalefac_scale&&0==_.preflag){var u=0;for(n=0;n<_.sfbmax;n++)_.scalefac[n]>0&&(u|=_.scalefac[n]);if(0==(1&u)&&0!=u){for(n=0;n<_.sfbmax;n++)_.scalefac[n]>0&&(_.scalefac[n]>>=1);_.scalefac_scale=l=1}}if(0==_.preflag&&_.block_type!=H.SHORT_TYPE&&2==t.mode_gr){for(n=11;n<H.SBPSY_l&&!(_.scalefac[n]<p.pretab[n]&&_.scalefac[n]!=-2);n++);if(n==H.SBPSY_l){for(n=11;n<H.SBPSY_l;n++)_.scalefac[n]>0&&(_.scalefac[n]-=p.pretab[n]);_.preflag=l=1}}for(s=0;s<4;s++)a.scfsi[r][s]=0;for(2==t.mode_gr&&1==e&&a.tt[0][r].block_type!=H.SHORT_TYPE&&a.tt[1][r].block_type!=H.SHORT_TYPE&&(h(r,a),l=0),n=0;n<_.sfbmax;n++)_.scalefac[n]==-2&&(_.scalefac[n]=0);0!=l&&(2==t.mode_gr?this.scale_bitcount(_):this.scale_bitcount_lsf(t,_))};var A=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],y=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],w=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(t){var e,r,a,n=0,s=0,i=t.scalefac;if(t.block_type==H.SHORT_TYPE)a=A,0!=t.mixed_block_flag&&(a=y);else if(a=w,0==t.preflag){for(r=11;r<H.SBPSY_l&&!(i[r]<p.pretab[r]);r++);if(r==H.SBPSY_l)for(t.preflag=1,r=11;r<H.SBPSY_l;r++)i[r]-=p.pretab[r]}for(r=0;r<t.sfbdivide;r++)n<i[r]&&(n=i[r]);for(;r<t.sfbmax;r++)s<i[r]&&(s=i[r]);for(t.part2_length=x.LARGE_BITS,e=0;e<16;e++)n<d[e]&&s<g[e]&&t.part2_length>a[e]&&(t.part2_length=a[e],t.scalefac_compress=e);return t.part2_length==x.LARGE_BITS};var M=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(t,e){var a,n,s,i,o,_,l,f,u=r(4),c=e.scalefac;for(a=0!=e.preflag?2:0,l=0;l<4;l++)u[l]=0;if(e.block_type==H.SHORT_TYPE){n=1;var h=p.nr_of_sfb_block[a][n];for(f=0,s=0;s<4;s++)for(i=h[s]/3,l=0;l<i;l++,f++)for(o=0;o<3;o++)c[3*f+o]>u[s]&&(u[s]=c[3*f+o])}else{n=0;var h=p.nr_of_sfb_block[a][n];for(f=0,s=0;s<4;s++)for(i=h[s],l=0;l<i;l++,f++)c[f]>u[s]&&(u[s]=c[f])}for(_=!1,s=0;s<4;s++)u[s]>M[a][s]&&(_=!0);if(!_){var b,m,v,d;for(e.sfb_partition_table=p.nr_of_sfb_block[a][n],s=0;s<4;s++)e.slen[s]=B[u[s]];switch(b=e.slen[0],m=e.slen[1],v=e.slen[2],d=e.slen[3],a){case 0:e.scalefac_compress=(5*b+m<<4)+(v<<2)+d;break;case 1:e.scalefac_compress=400+(5*b+m<<2)+v;break;case 2:e.scalefac_compress=500+3*b+m;break;default:J.err.printf("intensity stereo not implemented yet\n")}}if(!_)for(e.part2_length=0,s=0;s<4;s++)e.part2_length+=e.slen[s]*e.sfb_partition_table[s];return _};var B=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4]
;this.huffman_init=function(t){for(var e=2;e<=576;e+=2){for(var r,a=0;t.scalefac_band.l[++a]<e;);for(r=b[a][0];t.scalefac_band.l[r+1]>e;)r--;for(r<0&&(r=b[a][0]),t.bv_scf[e-2]=r,r=b[a][1];t.scalefac_band.l[r+t.bv_scf[e-2]+2]>e;)r--;r<0&&(r=b[a][1]),t.bv_scf[e-1]=r}}}function d(){function e(t){J.arraycopy(t.header[t.w_ptr].buf,0,B,T,t.sideinfo_len),T+=t.sideinfo_len,E+=8*t.sideinfo_len,t.w_ptr=t.w_ptr+1&X.MAX_HEADER_BUF-1}function a(t,r,a){for(;a>0;){var n;0==x&&(x=8,T++,t.header[t.w_ptr].write_timing==E&&e(t),B[T]=0),n=Math.min(a,x),a-=n,x-=n,B[T]|=r>>a<<x,E+=n}}function n(t,e,r){for(;r>0;){var a;0==x&&(x=8,T++,B[T]=0),a=Math.min(r,x),r-=a,x-=a,B[T]|=e>>r<<x,E+=a}}function o(t,e){var r,n=t.internal_flags;if(e>=8&&(a(n,76,8),e-=8),e>=8&&(a(n,65,8),e-=8),e>=8&&(a(n,77,8),e-=8),e>=8&&(a(n,69,8),e-=8),e>=32){var s=w.getLameShortVersion();if(e>=32)for(r=0;r<s.length&&e>=8;++r)e-=8,a(n,s.charAt(r),8)}for(;e>=1;e-=1)a(n,n.ancillary_flag,1),n.ancillary_flag^=t.disable_reservoir?0:1}function _(t,e,r){for(var a=t.header[t.h_ptr].ptr;r>0;){var n=Math.min(r,8-(7&a));r-=n,t.header[t.h_ptr].buf[a>>3]|=e>>r<<8-(7&a)-n,a+=n}t.header[t.h_ptr].ptr=a}function l(t,e){t<<=8;for(var r=0;r<8;r++)t<<=1,0!=(65536&((e<<=1)^t))&&(e^=R);return e}function f(t,e){var r,a,n,s=t.internal_flags;if(r=s.l3_side,s.header[s.h_ptr].ptr=0,W.fill(s.header[s.h_ptr].buf,0,s.sideinfo_len,0),t.out_samplerate<16e3?_(s,4094,12):_(s,4095,12),_(s,t.version,1),_(s,1,2),_(s,t.error_protection?0:1,1),_(s,s.bitrate_index,4),_(s,s.samplerate_index,2),_(s,s.padding,1),_(s,t.extension,1),_(s,t.mode.ordinal(),2),_(s,s.mode_ext,2),_(s,t.copyright,1),_(s,t.original,1),_(s,t.emphasis,2),t.error_protection&&_(s,0,16),1==t.version){for(_(s,r.main_data_begin,9),2==s.channels_out?_(s,r.private_bits,3):_(s,r.private_bits,5),n=0;n<s.channels_out;n++){var i;for(i=0;i<4;i++)_(s,r.scfsi[n][i],1)}for(a=0;a<2;a++)for(n=0;n<s.channels_out;n++){var o=r.tt[a][n];_(s,o.part2_3_length+o.part2_length,12),_(s,o.big_values/2,9),_(s,o.global_gain,8),_(s,o.scalefac_compress,4),o.block_type!=H.NORM_TYPE?(_(s,1,1),_(s,o.block_type,2),_(s,o.mixed_block_flag,1),14==o.table_select[0]&&(o.table_select[0]=16),_(s,o.table_select[0],5),14==o.table_select[1]&&(o.table_select[1]=16),_(s,o.table_select[1],5),_(s,o.subblock_gain[0],3),_(s,o.subblock_gain[1],3),_(s,o.subblock_gain[2],3)):(_(s,0,1),14==o.table_select[0]&&(o.table_select[0]=16),_(s,o.table_select[0],5),14==o.table_select[1]&&(o.table_select[1]=16),_(s,o.table_select[1],5),14==o.table_select[2]&&(o.table_select[2]=16),_(s,o.table_select[2],5),_(s,o.region0_count,4),_(s,o.region1_count,3)),_(s,o.preflag,1),_(s,o.scalefac_scale,1),_(s,o.count1table_select,1)}}else for(_(s,r.main_data_begin,8),_(s,r.private_bits,s.channels_out),a=0,n=0;n<s.channels_out;n++){var o=r.tt[a][n];_(s,o.part2_3_length+o.part2_length,12),_(s,o.big_values/2,9),_(s,o.global_gain,8),_(s,o.scalefac_compress,9),o.block_type!=H.NORM_TYPE?(_(s,1,1),_(s,o.block_type,2),_(s,o.mixed_block_flag,1),14==o.table_select[0]&&(o.table_select[0]=16),_(s,o.table_select[0],5),14==o.table_select[1]&&(o.table_select[1]=16),_(s,o.table_select[1],5),_(s,o.subblock_gain[0],3),_(s,o.subblock_gain[1],3),_(s,o.subblock_gain[2],3)):(_(s,0,1),14==o.table_select[0]&&(o.table_select[0]=16),_(s,o.table_select[0],5),14==o.table_select[1]&&(o.table_select[1]=16),_(s,o.table_select[1],5),14==o.table_select[2]&&(o.table_select[2]=16),_(s,o.table_select[2],5),_(s,o.region0_count,4),_(s,o.region1_count,3)),_(s,o.scalefac_scale,1),_(s,o.count1table_select,1)}t.error_protection&&CRC_writeheader(s,s.header[s.h_ptr].buf);var l=s.h_ptr;s.h_ptr=l+1&X.MAX_HEADER_BUF-1,s.header[s.h_ptr].write_timing=s.header[l].write_timing+e,s.h_ptr==s.w_ptr&&J.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}function u(t,e){var r,n=et.ht[e.count1table_select+32],s=0,i=e.big_values,o=e.big_values;for(r=(e.count1-e.big_values)/4;r>0;--r){var _,l=0,f=0;_=e.l3_enc[i+0],0!=_&&(f+=8,e.xr[o+0]<0&&l++),_=e.l3_enc[i+1],0!=_&&(f+=4,l*=2,e.xr[o+1]<0&&l++),_=e.l3_enc[i+2],0!=_&&(f+=2,l*=2,e.xr[o+2]<0&&l++),_=e.l3_enc[i+3],0!=_&&(f++,l*=2,e.xr[o+3]<0&&l++),i+=4,o+=4,a(t,l+n.table[f],n.hlen[f]),s+=n.hlen[f]}return s}function c(t,e,r,n,s){var i=et.ht[e],o=0;if(0==e)return o;for(var _=r;_<n;_+=2){var l=0,f=0,u=i.xlen,c=i.xlen,h=0,p=s.l3_enc[_],b=s.l3_enc[_+1];if(0!=p&&(s.xr[_]<0&&h++,l--),e>15){if(p>14){h|=p-15<<1,f=u,p=15}if(b>14){var m=b-15;h<<=u,h|=m,f+=u,b=15}c=16}0!=b&&(h<<=1,s.xr[_+1]<0&&h++,l--),p=p*c+b,f-=l,l+=i.hlen[p],a(t,i.table[p],l),a(t,h,f),o+=l+f}return o}function h(t,e){var r=3*t.scalefac_band.s[3];r>e.big_values&&(r=e.big_values);var a=c(t,e.table_select[0],0,r,e);return a+=c(t,e.table_select[1],r,e.big_values,e)}function p(t,e){var r,a,n,s;r=e.big_values;var i=e.region0_count+1;return n=t.scalefac_band.l[i],i+=e.region1_count+1,s=t.scalefac_band.l[i],n>r&&(n=r),s>r&&(s=r),a=c(t,e.table_select[0],0,n,e),a+=c(t,e.table_select[1],n,s,e),a+=c(t,e.table_select[2],s,r,e)}function m(t){var e,r,n,s,i=0,o=t.internal_flags,_=o.l3_side;if(1==t.version)for(e=0;e<2;e++)for(r=0;r<o.channels_out;r++){var l=_.tt[e][r],f=v.slen1_tab[l.scalefac_compress],c=v.slen2_tab[l.scalefac_compress];for(s=0,n=0;n<l.sfbdivide;n++)l.scalefac[n]!=-1&&(a(o,l.scalefac[n],f),s+=f);for(;n<l.sfbmax;n++)l.scalefac[n]!=-1&&(a(o,l.scalefac[n],c),s+=c);s+=l.block_type==H.SHORT_TYPE?h(o,l):p(o,l),s+=u(o,l),i+=s}else for(e=0,r=0;r<o.channels_out;r++){var b,m,l=_.tt[e][r],d=0;if(s=0,n=0,m=0,l.block_type==H.SHORT_TYPE){for(;m<4;m++){var g=l.sfb_partition_table[m]/3,S=l.slen[m];for(b=0;b<g;b++,n++)a(o,Math.max(l.scalefac[3*n+0],0),S),a(o,Math.max(l.scalefac[3*n+1],0),S),a(o,Math.max(l.scalefac[3*n+2],0),S),d+=3*S}s+=h(o,l)}else{for(;m<4;m++){var g=l.sfb_partition_table[m],S=l.slen[m];for(b=0;b<g;b++,n++)a(o,Math.max(l.scalefac[n],0),S),d+=S}s+=p(o,l)}s+=u(o,l),i+=d+s}return i}function d(){this.total=0}function g(t,e){var r,a,n,s,i,o=t.internal_flags;return i=o.w_ptr,s=o.h_ptr-1,s==-1&&(s=X.MAX_HEADER_BUF-1),r=o.header[s].write_timing-E,e.total=r,r>=0&&(a=1+s-i,s<i&&(a=1+s-i+X.MAX_HEADER_BUF),r-=8*a*o.sideinfo_len),n=S.getframebits(t),r+=n,e.total+=n,e.total%8!=0?e.total=1+e.total/8:e.total=e.total/8,e.total+=T+1,r<0&&J.err.println("strange error flushing buffer ... \n"),r}var S=this,R=32773,A=null,y=null,w=null,M=null;this.setModules=function(t,e,r,a){A=t,y=e,w=r,M=a};var B=null,E=0,T=0,x=0;this.getframebits=function(t){var e,r=t.internal_flags;return e=0!=r.bitrate_index?et.bitrate_table[t.version][r.bitrate_index]:t.brate,8*(0|72e3*(t.version+1)*e/t.out_samplerate+r.padding)},this.CRC_writeheader=function(t,e){var r=65535;r=l(255&e[2],r),r=l(255&e[3],r);for(var a=6;a<t.sideinfo_len;a++)r=l(255&e[a],r);e[4]=byte(r>>8),e[5]=byte(255&r)},this.flush_bitstream=function(t){var e,r,a=t.internal_flags,n=a.h_ptr-1;if(n==-1&&(n=X.MAX_HEADER_BUF-1),e=a.l3_side,!((r=g(t,new d))<0)){if(o(t,r),a.ResvSize=0,e.main_data_begin=0,a.findReplayGain){var i=A.GetTitleGain(a.rgdata);a.RadioGain=0|Math.floor(10*i+.5)}a.findPeakSample&&(a.noclipGainChange=0|Math.ceil(20*(0,s.default)(a.PeakSample/32767)*10),a.noclipGainChange>0&&(EQ(t.scale,1)||EQ(t.scale,0))?a.noclipScale=Math.floor(32767/a.PeakSample*100)/100:a.noclipScale=-1)}},this.add_dummy_byte=function(t,e,r){for(var a,s=t.internal_flags;r-- >0;)for(n(s,e,8),a=0;a<X.MAX_HEADER_BUF;++a)s.header[a].write_timing+=8},this.format_bitstream=function(t){var e,r=t.internal_flags;e=r.l3_side;var a=this.getframebits(t);o(t,e.resvDrain_pre),f(t,a);var n=8*r.sideinfo_len;if(n+=m(t),o(t,e.resvDrain_post),n+=e.resvDrain_post,e.main_data_begin+=(a-n)/8,g(t,new d)!=r.ResvSize&&J.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*e.main_data_begin!=r.ResvSize&&(J.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*e.main_data_begin,r.ResvSize,e.resvDrain_post,e.resvDrain_pre,8*r.sideinfo_len,n-e.resvDrain_post-8*r.sideinfo_len,n,n%8,a),J.err.println("This is a fatal error.  It has several possible causes:"),J.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),J.err.println(" 9%%  Your system is overclocked"),J.err.println(" 1%%  bug in LAME encoding library"),r.ResvSize=8*e.main_data_begin),E>1e9){var s;for(s=0;s<X.MAX_HEADER_BUF;++s)r.header[s].write_timing-=E;E=0}return 0},this.copy_buffer=function(t,e,a,n,s){var o=T+1;if(o<=0)return 0;if(0!=n&&o>n)return-1;if(J.arraycopy(B,0,e,a,o),T=-1,x=0,0!=s){var _=r(1);if(_[0]=t.nMusicCRC,M.updateMusicCRC(_,e,a,o),t.nMusicCRC=_[0],o>0&&(t.VBR_seek_table.nBytesWritten+=o),t.decode_on_the_fly)for(var l,f=i([2,1152]),u=o,c=-1;0!=c;)if(c=y.hip_decode1_unclipped(t.hip,e,a,u,f[0],f[1]),u=0,c==-1&&(c=0),c>0){if(t.findPeakSample){for(l=0;l<c;l++)f[0][l]>t.PeakSample?t.PeakSample=f[0][l]:-f[0][l]>t.PeakSample&&(t.PeakSample=-f[0][l]);if(t.channels_out>1)for(l=0;l<c;l++)f[1][l]>t.PeakSample?t.PeakSample=f[1][l]:-f[1][l]>t.PeakSample&&(t.PeakSample=-f[1][l])}if(t.findReplayGain&&A.AnalyzeSamples(t.rgdata,f[0],0,f[1],0,c,t.channels_out)==b.GAIN_ANALYSIS_ERROR)return-6}}return o},this.init_bit_stream_w=function(e){B=t(j.LAME_MAXMP3BUFFER),e.h_ptr=e.w_ptr=0,e.header[e.h_ptr].write_timing=0,T=-1,x=0,E=0}}function g(){function e(t,e){if(t.nVbrNumFrames++,t.sum+=e,!(++t.seen<t.want)&&(t.pos<t.size&&(t.bag[t.pos]=t.sum,t.pos++,t.seen=0),t.pos==t.size)){for(var r=1;r<t.size;r+=2)t.bag[r/2]=t.bag[r];t.want*=2,t.pos/=2}}function r(t,e){if(!(t.pos<=0))for(var r=1;r<v;++r){var a,n,s=r/v,i=0|Math.floor(s*t.pos);i>t.pos-1&&(i=t.pos-1),a=t.bag[i],n=t.sum;var o=0|256*a/n;o>255&&(o=255),e[r]=255&o}}function a(t,e){var r=255&t[e+0];return r<<=8,r|=255&t[e+1],r<<=8,r|=255&t[e+2],r<<=8,r|=255&t[e+3]}function n(t,e,r){t[e+0]=255&r>>24,t[e+1]=255&r>>16,t[e+2]=255&r>>8,t[e+3]=255&r}function s(t,e,r){t[e+0]=255&r>>8,t[e+1]=255&r}function i(t,e){return new String(t,e,B.length(),M).equals(B)||new String(t,e,E.length(),M).equals(E)}function o(t,e,r){return 255&(t<<e|r&~(-1<<e))}function _(t,e){var r=t.internal_flags;e[0]=o(e[0],8,255),e[1]=o(e[1],3,7),e[1]=o(e[1],1,t.out_samplerate<16e3?0:1),e[1]=o(e[1],1,t.version),e[1]=o(e[1],2,1),e[1]=o(e[1],1,t.error_protection?0:1),e[2]=o(e[2],4,r.bitrate_index),e[2]=o(e[2],2,r.samplerate_index),e[2]=o(e[2],1,0),e[2]=o(e[2],1,t.extension),e[3]=o(e[3],2,t.mode.ordinal()),e[3]=o(e[3],2,r.mode_ext),e[3]=o(e[3],1,t.copyright),e[3]=o(e[3],1,t.original),e[3]=o(e[3],2,t.emphasis),e[0]=255;var a,n=241&e[1];a=1==t.version?A:t.out_samplerate<16e3?w:y,t.VBR==u.vbr_off&&(a=t.brate);var s;s=t.free_format?0:255&16*p.BitrateIndex(a,t.version,t.out_samplerate),1==t.version?(e[1]=255&(10|n),n=13&e[2],e[2]=255&(s|n)):(e[1]=255&(2|n),n=13&e[2],e[2]=255&(s|n))}function l(t,e){return e=e>>8^T[255&(e^t)]}function c(t,e,r,a,i){var o,_,u,c=t.internal_flags,h=0,p=t.encoder_delay,b=t.encoder_padding,v=100-10*t.VBR_q-t.quality,d=m.getLameVeryShortVersion(),g=[1,5,3,2,4,0,3],S=0|(t.lowpassfreq/100+.5>255?255:t.lowpassfreq/100+.5),R=0,A=0,y=t.internal_flags.noise_shaping,w=0,M=0,B=0,E=0,T=0,x=0!=(1&t.exp_nspsytune),k=0!=(2&t.exp_nspsytune),P=!1,I=!1,O=t.internal_flags.nogap_total,L=t.internal_flags.nogap_current,H=t.ATHtype,N=0;switch(t.VBR){case vbr_abr:u=t.VBR_mean_bitrate_kbps;break;case vbr_off:u=t.brate;break;default:u=t.VBR_min_bitrate_kbps}switch(o=t.VBR.ordinal()<g.length?g[t.VBR.ordinal()]:0,_=0+o,c.findReplayGain&&(c.RadioGain>510&&(c.RadioGain=510),c.RadioGain<-510&&(c.RadioGain=-510),A=8192,A|=3072,c.RadioGain>=0?A|=c.RadioGain:(A|=512,A|=-c.RadioGain)),c.findPeakSample&&(R=Math.abs(0|c.PeakSample/32767*Math.pow(2,23)+.5)),O!=-1&&(L>0&&(I=!0),L<O-1&&(P=!0)),N=H+((x?1:0)<<4)+((k?1:0)<<5)+((P?1:0)<<6)+((I?1:0)<<7),v<0&&(v=0),t.mode){case MONO:w=0;break;case STEREO:w=1;break;case DUAL_CHANNEL:w=2;break;case JOINT_STEREO:w=t.force_ms?4:3;break;case NOT_SET:default:w=7}B=t.in_samplerate<=32e3?0:48e3==t.in_samplerate?2:t.in_samplerate>48e3?3:1,(t.short_blocks==f.short_block_forced||t.short_blocks==f.short_block_dispensed||t.lowpassfreq==-1&&t.highpassfreq==-1||t.scale_left<t.scale_right||t.scale_left>t.scale_right||t.disable_reservoir&&t.brate<320||t.noATH||t.ATHonly||0==H||t.in_samplerate<=32e3)&&(M=1),E=y+(w<<2)+(M<<5)+(B<<6),T=c.nMusicCRC,n(r,a+h,v),h+=4;for(var V=0;V<9;V++)r[a+h+V]=255&d.charAt(V);h+=9,r[a+h]=255&_,h++,r[a+h]=255&S,h++,n(r,a+h,R),h+=4,s(r,a+h,A),h+=2,s(r,a+h,0),h+=2,r[a+h]=255&N,h++,r[a+h]=u>=255?255:255&u,h++,r[a+h]=255&p>>4,r[a+h+1]=255&(p<<4)+(b>>8),r[a+h+2]=255&b,h+=3,r[a+h]=255&E,h++,r[a+h++]=0,s(r,a+h,t.preset),h+=2,n(r,a+h,e),h+=4,s(r,a+h,T),h+=2;for(var D=0;D<h;D++)i=l(r[a+D],i);return s(r,a+h,i),h+=2}function h(e){e.seek(0);var r=t(10);e.readFully(r);return new String(r,"ISO-8859-1").startsWith("ID3")?0:((127&r[6])<<21|(127&r[7])<<14|(127&r[8])<<7|127&r[9])+r.length}var p,b,m;this.setModules=function(t,e,r){p=t,b=e,m=r};var v=g.NUMTOCENTRIES,d=g.MAXFRAMESIZE,S=v+4+4+4+4+4,R=S+9+1+1+8+1+1+3+1+1+2+4+2+2,A=128,y=64,w=32,M=null,B="Xing",E="Info",T=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.addVbrFrame=function(t){var r=t.internal_flags,a=et.bitrate_table[t.version][r.bitrate_index];e(r.VBR_seek_table,a)},this.getVbrTag=function(t){var e=new VBRTagData,r=0;e.flags=0;var n=t[r+1]>>3&1,s=t[r+2]>>2&3,o=t[r+3]>>6&3,_=t[r+2]>>4&15;if(_=et.bitrate_table[n][_],t[r+1]>>4==14?e.samprate=et.samplerate_table[2][s]:e.samprate=et.samplerate_table[n][s],r+=0!=n?3!=o?36:21:3!=o?21:13,!i(t,r))return null;r+=4,e.hId=n;var l=e.flags=a(t,r);if(r+=4,0!=(1&l)&&(e.frames=a(t,r),r+=4),0!=(2&l)&&(e.bytes=a(t,r),r+=4),0!=(4&l)){if(null!=e.toc)for(var f=0;f<v;f++)e.toc[f]=t[r+f];r+=v}e.vbrScale=-1,0!=(8&l)&&(e.vbrScale=a(t,r),r+=4),e.headersize=72e3*(n+1)*_/e.samprate,r+=21;var u=t[r+0]<<4;u+=t[r+1]>>4;var c=(15&t[r+1])<<8;return c+=255&t[r+2],(u<0||u>3e3)&&(u=-1),(c<0||c>3e3)&&(c=-1),e.encDelay=u,e.encPadding=c,e},this.InitVbrTag=function(e){var r,a=e.internal_flags;r=1==e.version?A:e.out_samplerate<16e3?w:y,e.VBR==u.vbr_off&&(r=e.brate);var n=72e3*(e.version+1)*r/e.out_samplerate,s=a.sideinfo_len+R;if(a.VBR_seek_table.TotalFrameSize=n,n<s||n>d)return void(e.bWriteVbrTag=!1);a.VBR_seek_table.nVbrNumFrames=0,a.VBR_seek_table.nBytesWritten=0,a.VBR_seek_table.sum=0,a.VBR_seek_table.seen=0,a.VBR_seek_table.want=1,a.VBR_seek_table.pos=0,null==a.VBR_seek_table.bag&&(a.VBR_seek_table.bag=new int[400],a.VBR_seek_table.size=400);var i=t(d);_(e,i);for(var o=a.VBR_seek_table.TotalFrameSize,l=0;l<o;++l)b.add_dummy_byte(e,255&i[l],1)},this.updateMusicCRC=function(t,e,r,a){for(var n=0;n<a;++n)t[0]=l(e[r+n],t[0])},this.getLameTagFrame=function(e,a){var s=e.internal_flags;if(!e.bWriteVbrTag)return 0;if(s.Class_ID!=j.LAME_ID)return 0;if(s.VBR_seek_table.pos<=0)return 0;if(a.length<s.VBR_seek_table.TotalFrameSize)return s.VBR_seek_table.TotalFrameSize;W.fill(a,0,s.VBR_seek_table.TotalFrameSize,0),_(e,a);var i=t(v);if(e.free_format)for(var o=1;o<v;++o)i[o]=255&255*o/100;else r(s.VBR_seek_table,i);var f=s.sideinfo_len;e.error_protection&&(f-=2),e.VBR==u.vbr_off?(a[f++]=255&E.charAt(0),a[f++]=255&E.charAt(1),a[f++]=255&E.charAt(2),a[f++]=255&E.charAt(3)):(a[f++]=255&B.charAt(0),a[f++]=255&B.charAt(1),a[f++]=255&B.charAt(2),a[f++]=255&B.charAt(3)),n(a,f,15),f+=4,n(a,f,s.VBR_seek_table.nVbrNumFrames),f+=4;var h=s.VBR_seek_table.nBytesWritten+s.VBR_seek_table.TotalFrameSize;n(a,f,0|h),f+=4,J.arraycopy(i,0,a,f,i.length),f+=i.length,e.error_protection&&b.CRC_writeheader(s,a);for(var p=0,o=0;o<f;o++)p=l(a[o],p);return f+=c(e,h,a,f,p),s.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(e,r){if(e.internal_flags.VBR_seek_table.pos<=0)return-1;if(r.seek(r.length()),0==r.length())return-1;var a=h(r);r.seek(a);var n=t(d),s=getLameTagFrame(e,n);return s>n.length?-1:s<1?0:(r.write(n,0,s),0)}}function S(t,e,r,a){this.xlen=t,this.linmax=e,this.table=r,this.hlen=a}function R(t){this.bits=t}function A(){var t,e;this.setModules=function(r,a){t=r,e=a}}function y(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function w(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=c.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function M(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=a(H.SBMAX_l),this.s=a(H.SBMAX_s),this.psfb21=a(H.PSFB21),this.psfb12=a(H.PSFB12),this.cb_l=a(H.CBANDS),this.cb_s=a(H.CBANDS),this.eql_w=a(H.BLKSIZE/2)}function B(){this.linprebuf=a(2*b.MAX_ORDER),this.linpre=0,this.lstepbuf=a(b.MAX_SAMPLES_PER_WINDOW+b.MAX_ORDER),this.lstep=0,this.loutbuf=a(b.MAX_SAMPLES_PER_WINDOW+b.MAX_ORDER),this.lout=0,this.rinprebuf=a(2*b.MAX_ORDER),this.rinpre=0,this.rstepbuf=a(b.MAX_SAMPLES_PER_WINDOW+b.MAX_ORDER),this.rstep=0,this.routbuf=a(b.MAX_SAMPLES_PER_WINDOW+b.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=r(0|b.STEPS_per_dB*b.MAX_dB),this.B=r(0|b.STEPS_per_dB*b.MAX_dB)}function E(t){var e=t;this.quantize=e,this.iteration_loop=function(t,e,n,s){var i,o=t.internal_flags,_=a(rt.SFBMAX),l=a(576),f=r(2),u=0,c=o.l3_side,h=new R(u);this.quantize.rv.ResvFrameBegin(t,h),u=h.bits;for(var p=0;p<o.mode_gr;p++){i=this.quantize.qupvt.on_pe(t,e,f,u,p,p),o.mode_ext==H.MPG_MD_MS_LR&&(this.quantize.ms_convert(o.l3_side,p),this.quantize.qupvt.reduce_side(f,n[p],u,i));for(var b=0;b<o.channels_out;b++){var m,v,d=c.tt[p][b];d.block_type!=H.SHORT_TYPE?(m=0,v=o.PSY.mask_adjust-m):(m=0,v=o.PSY.mask_adjust_short-m),o.masking_lower=Math.pow(10,.1*v),this.quantize.init_outer_loop(o,d),this.quantize.init_xrpow(o,d,l)&&(this.quantize.qupvt.calc_xmin(t,s[p][b],d,_),this.quantize.outer_loop(t,d,_,l,b,f[b])),this.quantize.iteration_finish_one(o,p,b)}}this.quantize.rv.ResvFrameEnd(o,u)}}function T(t,e,a,n){this.l=r(1+H.SBMAX_l),this.s=r(1+H.SBMAX_s),this.psfb21=r(1+H.PSFB21),this.psfb12=r(1+H.PSFB12);var s=this.l,i=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],J.arraycopy(this.arrL,0,s,0,Math.min(this.arrL.length,this.l.length)),J.arraycopy(this.arrS,0,i,0,Math.min(this.arrS.length,this.s.length)),J.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),J.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function x(){function t(t){return v[t+x.Q_MAX2]}function e(t,e){var r=l.ATHformula(e,t);return r-=b,r=Math.pow(10,r/10+t.ATHlower)}function n(t){for(var r=t.internal_flags.ATH.l,a=t.internal_flags.ATH.psfb21,n=t.internal_flags.ATH.s,i=t.internal_flags.ATH.psfb12,o=t.internal_flags,_=t.out_samplerate,l=0;l<H.SBMAX_l;l++){var f=o.scalefac_band.l[l],u=o.scalefac_band.l[l+1];r[l]=tt.MAX_VALUE;for(var c=f;c<u;c++){var h=c*_/1152,p=e(t,h);r[l]=Math.min(r[l],p)}}for(var l=0;l<H.PSFB21;l++){var f=o.scalefac_band.psfb21[l],u=o.scalefac_band.psfb21[l+1];a[l]=tt.MAX_VALUE;for(var c=f;c<u;c++){var h=c*_/1152,p=e(t,h);a[l]=Math.min(a[l],p)}}for(var l=0;l<H.SBMAX_s;l++){var f=o.scalefac_band.s[l],u=o.scalefac_band.s[l+1];n[l]=tt.MAX_VALUE;for(var c=f;c<u;c++){var h=c*_/384,p=e(t,h);n[l]=Math.min(n[l],p)}n[l]*=o.scalefac_band.s[l+1]-o.scalefac_band.s[l]}for(var l=0;l<H.PSFB12;l++){var f=o.scalefac_band.psfb12[l],u=o.scalefac_band.psfb12[l+1];i[l]=tt.MAX_VALUE;for(var c=f;c<u;c++){var h=c*_/384,p=e(t,h);i[l]=Math.min(i[l],p)}i[l]*=o.scalefac_band.s[13]-o.scalefac_band.s[12]}if(t.noATH){for(var l=0;l<H.SBMAX_l;l++)r[l]=1e-20;for(var l=0;l<H.PSFB21;l++)a[l]=1e-20;for(var l=0;l<H.SBMAX_s;l++)n[l]=1e-20;for(var l=0;l<H.PSFB12;l++)i[l]=1e-20}o.ATH.floor=10*(0,s.default)(e(t,-1))}function i(t){this.s=t}var o=null,_=null,l=null;this.setModules=function(t,e,r){o=t,_=e,l=r},this.IPOW20=function(t){return g[t]};var f=x.IXMAX_VAL,c=f+2,h=x.Q_MAX,p=x.Q_MAX2,b=(x.LARGE_BITS,100);this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var m=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=m,this.sfBandIndex=[new T([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new T([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new T([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new T([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new T([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new T([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new T([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new T([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new T([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var v=a(h+p+1),g=a(h),S=a(c),A=a(c);this.adj43=A,this.iteration_init=function(t){var e,r=t.internal_flags,a=r.l3_side;if(0==r.iteration_init_init){for(r.iteration_init_init=1,a.main_data_begin=0,n(t),S[0]=0,e=1;e<c;e++)S[e]=Math.pow(e,4/3);for(e=0;e<c-1;e++)A[e]=e+1-Math.pow(.5*(S[e]+S[e+1]),.75);for(A[e]=.5,e=0;e<h;e++)g[e]=Math.pow(2,(e-210)*-.1875);for(e=0;e<=h+p;e++)v[e]=Math.pow(2,.25*(e-210-p));o.huffman_init(r);var s,i,_,l;for(e=t.exp_nspsytune>>2&63,e>=32&&(e-=64),s=Math.pow(10,e/4/10),e=t.exp_nspsytune>>8&63,e>=32&&(e-=64),i=Math.pow(10,e/4/10),e=t.exp_nspsytune>>14&63,e>=32&&(e-=64),_=Math.pow(10,e/4/10),e=t.exp_nspsytune>>20&63,e>=32&&(e-=64),l=_*Math.pow(10,e/4/10),e=0;e<H.SBMAX_l;e++){var f;f=e<=6?s:e<=13?i:e<=20?_:l,r.nsPsy.longfact[e]=f}for(e=0;e<H.SBMAX_s;e++){var f;f=e<=5?s:e<=10?i:e<=11?_:l,r.nsPsy.shortfact[e]=f}}},this.on_pe=function(t,e,a,n,s,i){var o,l,f=t.internal_flags,u=0,c=r(2),h=new R(u),p=_.ResvMaxBits(t,n,h,i);u=h.bits;var b=u+p;for(b>X.MAX_BITS_PER_GRANULE&&(b=X.MAX_BITS_PER_GRANULE),o=0,l=0;l<f.channels_out;++l)a[l]=Math.min(X.MAX_BITS_PER_CHANNEL,u/f.channels_out),c[l]=0|a[l]*e[s][l]/700-a[l],c[l]>3*n/4&&(c[l]=3*n/4),c[l]<0&&(c[l]=0),c[l]+a[l]>X.MAX_BITS_PER_CHANNEL&&(c[l]=Math.max(0,X.MAX_BITS_PER_CHANNEL-a[l])),o+=c[l];if(o>p)for(l=0;l<f.channels_out;++l)c[l]=p*c[l]/o;for(l=0;l<f.channels_out;++l)a[l]+=c[l],p-=c[l];for(o=0,l=0;l<f.channels_out;++l)o+=a[l];if(o>X.MAX_BITS_PER_GRANULE){var m=0;for(l=0;l<f.channels_out;++l)a[l]*=X.MAX_BITS_PER_GRANULE,a[l]/=o,m+=a[l]}return b},this.reduce_side=function(t,e,r,a){var n=.33*(.5-e)/.5;n<0&&(n=0),n>.5&&(n=.5);var s=0|.5*n*(t[0]+t[1]);s>X.MAX_BITS_PER_CHANNEL-t[0]&&(s=X.MAX_BITS_PER_CHANNEL-t[0]),s<0&&(s=0),t[1]>=125&&(t[1]-s>125?(t[0]<r&&(t[0]+=s),t[1]-=s):(t[0]+=t[1]-125,t[1]=125)),(s=t[0]+t[1])>a&&(t[0]=a*t[0]/s,t[1]=a*t[1]/s)},this.athAdjust=function(t,e,r){var a=90.30873362,n=$.FAST_LOG10_X(e,10),s=t*t,i=0;return n-=r,s>1e-20&&(i=1+$.FAST_LOG10_X(s,10/a)),i<0&&(i=0),n*=i,n+=r+a-94.82444863,Math.pow(10,.1*n)},this.calc_xmin=function(t,e,r,a){var n,s=0,i=t.internal_flags,o=0,_=0,l=i.ATH,f=r.xr,c=t.VBR==u.vbr_mtrh?1:0,h=i.masking_lower;for(t.VBR!=u.vbr_mtrh&&t.VBR!=u.vbr_mt||(h=1),n=0;n<r.psy_lmax;n++){var p,b,m,v,g,S;b=t.VBR==u.vbr_rh||t.VBR==u.vbr_mtrh?athAdjust(l.adjust,l.l[n],l.floor):l.adjust*l.l[n],g=r.width[n],m=b/g,v=2.220446049250313e-16,S=g>>1,p=0;do{var R,A;R=f[o]*f[o],p+=R,v+=R<m?R:m,o++,A=f[o]*f[o],p+=A,v+=A<m?A:m,o++}while(--S>0);if(p>b&&_++,n==H.SBPSY_l){var y=b*i.nsPsy.longfact[n];v<y&&(v=y)}if(0!=c&&(b=v),!t.ATHonly){var w=e.en.l[n];if(w>0){var y;y=p*e.thm.l[n]*h/w,0!=c&&(y*=i.nsPsy.longfact[n]),b<y&&(b=y)}}a[s++]=0!=c?b:b*i.nsPsy.longfact[n]}var M=575;if(r.block_type!=H.SHORT_TYPE)for(var B=576;0!=B--&&d.EQ(f[B],0);)M=B;r.max_nonzero_coeff=M;for(var E=r.sfb_smin;n<r.psymax;E++,n+=3){var g,T,x;for(x=t.VBR==u.vbr_rh||t.VBR==u.vbr_mtrh?athAdjust(l.adjust,l.s[E],l.floor):l.adjust*l.s[E],g=r.width[n],T=0;T<3;T++){var b,m,v,p=0,S=g>>1;m=x/g,v=2.220446049250313e-16;do{var R,A;R=f[o]*f[o],p+=R,v+=R<m?R:m,o++,A=f[o]*f[o],p+=A,v+=A<m?A:m,o++}while(--S>0);if(p>x&&_++,E==H.SBPSY_s){var y=x*i.nsPsy.shortfact[E];v<y&&(v=y)}if(b=0!=c?v:x,!t.ATHonly&&!t.ATHshort){var w=e.en.s[E][T];if(w>0){var y;y=p*e.thm.s[E][T]*h/w,0!=c&&(y*=i.nsPsy.shortfact[E]),b<y&&(b=y)}}a[s++]=0!=c?b:b*i.nsPsy.shortfact[E]}t.useTemporal&&(a[s-3]>a[s-3+1]&&(a[s-3+1]+=(a[s-3]-a[s-3+1])*i.decay),a[s-3+1]>a[s-3+2]&&(a[s-3+2]+=(a[s-3+1]-a[s-3+2])*i.decay))}return _},this.calc_noise_core=function(t,e,r,n){var s=0,i=e.s,o=t.l3_enc;if(i>t.count1)for(;0!=r--;){var _;_=t.xr[i],i++,s+=_*_,_=t.xr[i],i++,s+=_*_}else if(i>t.big_values){var l=a(2);for(l[0]=0,l[1]=n;0!=r--;){var _;_=Math.abs(t.xr[i])-l[o[i]],i++,s+=_*_,_=Math.abs(t.xr[i])-l[o[i]],i++,s+=_*_}}else for(;0!=r--;){var _;_=Math.abs(t.xr[i])-S[o[i]]*n,i++,s+=_*_,_=Math.abs(t.xr[i])-S[o[i]]*n,i++,s+=_*_}return e.s=i,s},this.calc_noise=function(e,r,a,n,s){var o,_,l=0,f=0,u=0,c=0,h=0,p=-20,b=0,v=e.scalefac,d=0;for(n.over_SSD=0,o=0;o<e.psymax;o++){var g=e.global_gain-(v[d++]+(0!=e.preflag?m[o]:0)<<e.scalefac_scale+1)-8*e.subblock_gain[e.window[o]],S=0;if(null!=s&&s.step[o]==g)S=s.noise[o],b+=e.width[o],a[l++]=S/r[f++],S=s.noise_log[o];else{var R=t(g);if(_=e.width[o]>>1,b+e.width[o]>e.max_nonzero_coeff){var A;A=e.max_nonzero_coeff-b+1,_=A>0?A>>1:0}var y=new i(b);S=this.calc_noise_core(e,y,_,R),b=y.s,null!=s&&(s.step[o]=g,s.noise[o]=S),S=a[l++]=S/r[f++],S=$.FAST_LOG10(Math.max(S,1e-20)),null!=s&&(s.noise_log[o]=S)}if(null!=s&&(s.global_gain=e.global_gain),h+=S,S>0){var w;w=Math.max(0|10*S+.5,1),n.over_SSD+=w*w,u++,c+=S}p=Math.max(p,S)}return n.over_count=u,n.tot_noise=h,n.over_noise=c,n.max_noise=p,u},this.set_pinfo=function(t,e,r,n,s){var i,o,_,l,f,u=t.internal_flags,c=0==e.scalefac_scale?.5:1,h=e.scalefac,p=a(rt.SFBMAX),b=a(rt.SFBMAX),v=new y;calc_xmin(t,r,e,p),calc_noise(e,p,b,v,null);var d=0;for(o=e.sfb_lmax,e.block_type!=H.SHORT_TYPE&&0==e.mixed_block_flag&&(o=22),i=0;i<o;i++){var g=u.scalefac_band.l[i],S=u.scalefac_band.l[i+1],R=S-g;for(l=0;d<S;d++)l+=e.xr[d]*e.xr[d];l/=R,f=1e15,u.pinfo.en[n][s][i]=f*l,u.pinfo.xfsf[n][s][i]=f*p[i]*b[i]/R,r.en.l[i]>0&&!t.ATHonly?l/=r.en.l[i]:l=0,u.pinfo.thr[n][s][i]=f*Math.max(l*r.thm.l[i],u.ATH.l[i]),u.pinfo.LAMEsfb[n][s][i]=0,0!=e.preflag&&i>=11&&(u.pinfo.LAMEsfb[n][s][i]=-c*m[i]),i<H.SBPSY_l&&(u.pinfo.LAMEsfb[n][s][i]-=c*h[i])}if(e.block_type==H.SHORT_TYPE)for(o=i,i=e.sfb_smin;i<H.SBMAX_s;i++)for(var g=u.scalefac_band.s[i],S=u.scalefac_band.s[i+1],R=S-g,A=0;A<3;A++){for(l=0,_=g;_<S;_++)l+=e.xr[d]*e.xr[d],d++;l=Math.max(l/R,1e-20),f=1e15,u.pinfo.en_s[n][s][3*i+A]=f*l,u.pinfo.xfsf_s[n][s][3*i+A]=f*p[o]*b[o]/R,r.en.s[i][A]>0?l/=r.en.s[i][A]:l=0,(t.ATHonly||t.ATHshort)&&(l=0),u.pinfo.thr_s[n][s][3*i+A]=f*Math.max(l*r.thm.s[i][A],u.ATH.s[i]),u.pinfo.LAMEsfb_s[n][s][3*i+A]=-2*e.subblock_gain[A],i<H.SBPSY_s&&(u.pinfo.LAMEsfb_s[n][s][3*i+A]-=c*h[o]),o++}u.pinfo.LAMEqss[n][s]=e.global_gain,u.pinfo.LAMEmainbits[n][s]=e.part2_3_length+e.part2_length,u.pinfo.LAMEsfbits[n][s]=e.part2_length,u.pinfo.over[n][s]=v.over_count,u.pinfo.max_noise[n][s]=10*v.max_noise,u.pinfo.over_noise[n][s]=10*v.over_noise,u.pinfo.tot_noise[n][s]=10*v.tot_noise,u.pinfo.over_SSD[n][s]=v.over_SSD}}function k(){this.global_gain=0,this.sfb_count1=0,this.step=r(39),this.noise=a(39),this.noise_log=a(39)}function P(){function t(t){return new Int32Array(t)}function e(t){return new Float32Array(t)}this.xr=a(576),this.l3_enc=r(576),this.scalefac=r(rt.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=r(3),this.subblock_gain=r(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=r(rt.SFBMAX),this.window=r(rt.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=r(4),this.max_nonzero_coeff=0;var n=this;this.assign=function(r){n.xr=e(r.xr),n.l3_enc=t(r.l3_enc),n.scalefac=t(r.scalefac),n.xrpow_max=r.xrpow_max,n.part2_3_length=r.part2_3_length,n.big_values=r.big_values,n.count1=r.count1,n.global_gain=r.global_gain,n.scalefac_compress=r.scalefac_compress,n.block_type=r.block_type,n.mixed_block_flag=r.mixed_block_flag,n.table_select=t(r.table_select),n.subblock_gain=t(r.subblock_gain),n.region0_count=r.region0_count,n.region1_count=r.region1_count,n.preflag=r.preflag,n.scalefac_scale=r.scalefac_scale,n.count1table_select=r.count1table_select,n.part2_length=r.part2_length,
n.sfb_lmax=r.sfb_lmax,n.sfb_smin=r.sfb_smin,n.psy_lmax=r.psy_lmax,n.sfbmax=r.sfbmax,n.psymax=r.psymax,n.sfbdivide=r.sfbdivide,n.width=t(r.width),n.window=t(r.window),n.count1bits=r.count1bits,n.sfb_partition_table=r.sfb_partition_table.slice(0),n.slen=t(r.slen),n.max_nonzero_coeff=r.max_nonzero_coeff}}function I(){function t(t,e,r,a){a=0;for(var n=0;n<=r;++n){var s=Math.abs(t.xr[n]);a+=s,e[n]=Math.sqrt(s*Math.sqrt(s)),e[n]>t.xrpow_max&&(t.xrpow_max=e[n])}return a}function e(t,e){var r=t.ATH,a=e.xr;if(e.block_type!=H.SHORT_TYPE)for(var n=!1,s=H.PSFB21-1;s>=0&&!n;s--){var i=t.scalefac_band.psfb21[s],o=t.scalefac_band.psfb21[s+1],_=m.athAdjust(r.adjust,r.psfb21[s],r.floor);t.nsPsy.longfact[21]>1e-12&&(_*=t.nsPsy.longfact[21]);for(var l=o-1;l>=i;l--){if(!(Math.abs(a[l])<_)){n=!0;break}a[l]=0}}else for(var f=0;f<3;f++)for(var n=!1,s=H.PSFB12-1;s>=0&&!n;s--){var i=3*t.scalefac_band.s[12]+(t.scalefac_band.s[13]-t.scalefac_band.s[12])*f+(t.scalefac_band.psfb12[s]-t.scalefac_band.psfb12[0]),o=i+(t.scalefac_band.psfb12[s+1]-t.scalefac_band.psfb12[s]),u=m.athAdjust(r.adjust,r.psfb12[s],r.floor);t.nsPsy.shortfact[12]>1e-12&&(u*=t.nsPsy.shortfact[12]);for(var l=o-1;l>=i;l--){if(!(Math.abs(a[l])<u)){n=!0;break}a[l]=0}}}function r(t){this.ordinal=t}function n(t,e,a,n,s){var i,o=t.CurrentStep[n],_=!1,l=t.OldValue[n],f=r.BINSEARCH_NONE;for(e.global_gain=l,a-=e.part2_length;;){var u;if(i=v.count_bits(t,s,e,null),1==o||i==a)break;i>a?(f==r.BINSEARCH_DOWN&&(_=!0),_&&(o/=2),f=r.BINSEARCH_UP,u=o):(f==r.BINSEARCH_UP&&(_=!0),_&&(o/=2),f=r.BINSEARCH_DOWN,u=-o),e.global_gain+=u,e.global_gain<0&&(e.global_gain=0,_=!0),e.global_gain>255&&(e.global_gain=255,_=!0)}for(;i>a&&e.global_gain<255;)e.global_gain++,i=v.count_bits(t,s,e,null);return t.CurrentStep[n]=l-e.global_gain>=4?4:2,t.OldValue[n]=e.global_gain,e.part2_3_length=i,i}function s(t){for(var e=0;e<t.sfbmax;e++)if(t.scalefac[e]+t.subblock_gain[t.window[e]]==0)return!1;return!0}function i(t){return $.FAST_LOG10(.368+.632*t*t*t)}function o(t,e){for(var r=1e-37,a=0;a<e.psymax;a++)r+=i(t[a]);return Math.max(1e-20,r)}function _(t,e,r,a,n){var s;switch(t){default:case 9:e.over_count>0?(s=r.over_SSD<=e.over_SSD,r.over_SSD==e.over_SSD&&(s=r.bits<e.bits)):s=r.max_noise<0&&10*r.max_noise+r.bits<=10*e.max_noise+e.bits;break;case 0:s=r.over_count<e.over_count||r.over_count==e.over_count&&r.over_noise<e.over_noise||r.over_count==e.over_count&&d.EQ(r.over_noise,e.over_noise)&&r.tot_noise<e.tot_noise;break;case 8:r.max_noise=o(n,a);case 1:s=r.max_noise<e.max_noise;break;case 2:s=r.tot_noise<e.tot_noise;break;case 3:s=r.tot_noise<e.tot_noise&&r.max_noise<e.max_noise;break;case 4:s=r.max_noise<=0&&e.max_noise>.2||r.max_noise<=0&&e.max_noise<0&&e.max_noise>r.max_noise-.2&&r.tot_noise<e.tot_noise||r.max_noise<=0&&e.max_noise>0&&e.max_noise>r.max_noise-.2&&r.tot_noise<e.tot_noise+e.over_noise||r.max_noise>0&&e.max_noise>-.05&&e.max_noise>r.max_noise-.1&&r.tot_noise+r.over_noise<e.tot_noise+e.over_noise||r.max_noise>0&&e.max_noise>-.1&&e.max_noise>r.max_noise-.15&&r.tot_noise+r.over_noise+r.over_noise<e.tot_noise+e.over_noise+e.over_noise;break;case 5:s=r.over_noise<e.over_noise||d.EQ(r.over_noise,e.over_noise)&&r.tot_noise<e.tot_noise;break;case 6:s=r.over_noise<e.over_noise||d.EQ(r.over_noise,e.over_noise)&&(r.max_noise<e.max_noise||d.EQ(r.max_noise,e.max_noise)&&r.tot_noise<=e.tot_noise);break;case 7:s=r.over_count<e.over_count||r.over_noise<e.over_noise}return 0==e.over_count&&(s=s&&r.bits<e.bits),s}function l(t,e,r,a,n){var s,i=t.internal_flags;s=0==e.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var o=0,_=0;_<e.sfbmax;_++)o<r[_]&&(o=r[_]);var l=i.noise_shaping_amp;switch(3==l&&(l=n?2:1),l){case 2:break;case 1:o>1?o=Math.pow(o,.5):o*=.95;break;case 0:default:o>1?o=1:o*=.95}for(var f=0,_=0;_<e.sfbmax;_++){var u,c=e.width[_];if(f+=c,!(r[_]<o)){if(0!=(2&i.substep_shaping)&&(i.pseudohalf[_]=0==i.pseudohalf[_]?1:0,0==i.pseudohalf[_]&&2==i.noise_shaping_amp))return;for(e.scalefac[_]++,u=-c;u<0;u++)a[f+u]*=s,a[f+u]>e.xrpow_max&&(e.xrpow_max=a[f+u]);if(2==i.noise_shaping_amp)return}}}function f(t,e){for(var r=0,a=0;a<t.sfbmax;a++){var n=t.width[a],s=t.scalefac[a];if(0!=t.preflag&&(s+=m.pretab[a]),r+=n,0!=(1&s)){s++;for(var i=-n;i<0;i++)e[r+i]*=1.2968395546510096,e[r+i]>t.xrpow_max&&(t.xrpow_max=e[r+i])}t.scalefac[a]=s>>1}t.preflag=0,t.scalefac_scale=1}function c(t,e,r){var a,n=e.scalefac;for(a=0;a<e.sfb_lmax;a++)if(n[a]>=16)return!0;for(var s=0;s<3;s++){var i=0,o=0;for(a=e.sfb_lmax+s;a<e.sfbdivide;a+=3)i<n[a]&&(i=n[a]);for(;a<e.sfbmax;a+=3)o<n[a]&&(o=n[a]);if(!(i<16&&o<8)){if(e.subblock_gain[s]>=7)return!0;e.subblock_gain[s]++;var _=t.scalefac_band.l[e.sfb_lmax];for(a=e.sfb_lmax+s;a<e.sfbmax;a+=3){var l,f=e.width[a],u=n[a];if((u-=4>>e.scalefac_scale)>=0)n[a]=u,_+=3*f;else{n[a]=0;var c=210+(u<<e.scalefac_scale+1);l=m.IPOW20(c),_+=f*(s+1);for(var h=-f;h<0;h++)r[_+h]*=l,r[_+h]>e.xrpow_max&&(e.xrpow_max=r[_+h]);_+=f*(3-s-1)}}var l=m.IPOW20(202);_+=e.width[a]*(s+1);for(var h=-e.width[a];h<0;h++)r[_+h]*=l,r[_+h]>e.xrpow_max&&(e.xrpow_max=r[_+h])}}return!1}function h(t,e,r,a,n){var i=t.internal_flags;l(t,e,r,a,n);var o=s(e);return!o&&(!(o=2==i.mode_gr?v.scale_bitcount(e):v.scale_bitcount_lsf(i,e))||(i.noise_shaping>1&&(W.fill(i.pseudohalf,0),0==e.scalefac_scale?(f(e,a),o=!1):e.block_type==H.SHORT_TYPE&&i.subblock_gain>0&&(o=c(i,e,a)||s(e))),o||(o=2==i.mode_gr?v.scale_bitcount(e):v.scale_bitcount_lsf(i,e)),!o))}var p;this.rv=null;var b;this.qupvt=null;var m,v,g=new A;this.setModules=function(t,e,r,a){p=t,b=e,this.rv=e,m=r,this.qupvt=r,v=a,g.setModules(m,v)},this.ms_convert=function(t,e){for(var r=0;r<576;++r){var a=t.tt[e][0].xr[r],n=t.tt[e][1].xr[r];t.tt[e][0].xr[r]=(a+n)*(.5*$.SQRT2),t.tt[e][1].xr[r]=(a-n)*(.5*$.SQRT2)}},this.init_xrpow=function(e,r,a){var n=0,s=0|r.max_nonzero_coeff;if(r.xrpow_max=0,W.fill(a,s,576,0),(n=t(r,a,s,n))>1e-20){var i=0;0!=(2&e.substep_shaping)&&(i=1);for(var o=0;o<r.psymax;o++)e.pseudohalf[o]=i;return!0}return W.fill(r.l3_enc,0,576,0),!1},this.init_outer_loop=function(t,r){r.part2_3_length=0,r.big_values=0,r.count1=0,r.global_gain=210,r.scalefac_compress=0,r.table_select[0]=0,r.table_select[1]=0,r.table_select[2]=0,r.subblock_gain[0]=0,r.subblock_gain[1]=0,r.subblock_gain[2]=0,r.subblock_gain[3]=0,r.region0_count=0,r.region1_count=0,r.preflag=0,r.scalefac_scale=0,r.count1table_select=0,r.part2_length=0,r.sfb_lmax=H.SBPSY_l,r.sfb_smin=H.SBPSY_s,r.psy_lmax=t.sfb21_extra?H.SBMAX_l:H.SBPSY_l,r.psymax=r.psy_lmax,r.sfbmax=r.sfb_lmax,r.sfbdivide=11;for(var n=0;n<H.SBMAX_l;n++)r.width[n]=t.scalefac_band.l[n+1]-t.scalefac_band.l[n],r.window[n]=3;if(r.block_type==H.SHORT_TYPE){var s=a(576);r.sfb_smin=0,r.sfb_lmax=0,0!=r.mixed_block_flag&&(r.sfb_smin=3,r.sfb_lmax=2*t.mode_gr+4),r.psymax=r.sfb_lmax+3*((t.sfb21_extra?H.SBMAX_s:H.SBPSY_s)-r.sfb_smin),r.sfbmax=r.sfb_lmax+3*(H.SBPSY_s-r.sfb_smin),r.sfbdivide=r.sfbmax-18,r.psy_lmax=r.sfb_lmax;var i=t.scalefac_band.l[r.sfb_lmax];J.arraycopy(r.xr,0,s,0,576);for(var n=r.sfb_smin;n<H.SBMAX_s;n++)for(var o=t.scalefac_band.s[n],_=t.scalefac_band.s[n+1],l=0;l<3;l++)for(var f=o;f<_;f++)r.xr[i++]=s[3*f+l];for(var u=r.sfb_lmax,n=r.sfb_smin;n<H.SBMAX_s;n++)r.width[u]=r.width[u+1]=r.width[u+2]=t.scalefac_band.s[n+1]-t.scalefac_band.s[n],r.window[u]=0,r.window[u+1]=1,r.window[u+2]=2,u+=3}r.count1bits=0,r.sfb_partition_table=m.nr_of_sfb_block[0][0],r.slen[0]=0,r.slen[1]=0,r.slen[2]=0,r.slen[3]=0,r.max_nonzero_coeff=575,W.fill(r.scalefac,0),e(t,r)},r.BINSEARCH_NONE=new r(0),r.BINSEARCH_UP=new r(1),r.BINSEARCH_DOWN=new r(2),this.trancate_smallspectrums=function(t,e,r,n){var s=a(rt.SFBMAX);if((0!=(4&t.substep_shaping)||e.block_type!=H.SHORT_TYPE)&&0==(128&t.substep_shaping)){m.calc_noise(e,r,s,new y,null);for(var i=0;i<576;i++){var o=0;0!=e.l3_enc[i]&&(o=Math.abs(e.xr[i])),n[i]=o}var i=0,_=8;e.block_type==H.SHORT_TYPE&&(_=6);do{var l,f,u,c,h=e.width[_];if(i+=h,!(s[_]>=1||(W.sort(n,i-h,h),d.EQ(n[i-1],0)))){l=(1-s[_])*r[_],f=0,c=0;do{var p;for(u=1;c+u<h&&!d.NEQ(n[c+i-h],n[c+i+u-h]);u++);if(p=n[c+i-h]*n[c+i-h]*u,l<p){0!=c&&(f=n[c+i-h-1]);break}l-=p,c+=u}while(c<h);if(!d.EQ(f,0))do{Math.abs(e.xr[i-h])<=f&&(e.l3_enc[i-h]=0)}while(--h>0)}}while(++_<e.psymax);e.part2_3_length=v.noquant_count_bits(t,e,null)}},this.outer_loop=function(t,e,r,s,i,o){var l,f=t.internal_flags,c=new P,p=a(576),b=a(rt.SFBMAX),d=new y,g=new k,S=9999999,R=!1,A=!1,w=0;if(n(f,e,o,i,s),0==f.noise_shaping)return 100;m.calc_noise(e,r,b,d,g),d.bits=e.part2_3_length,c.assign(e);var M=0;for(J.arraycopy(s,0,p,0,576);!R;){do{var B,E=new y,T=255;if(B=0!=(2&f.substep_shaping)?20:3,f.sfb21_extra){if(b[c.sfbmax]>1)break;if(c.block_type==H.SHORT_TYPE&&(b[c.sfbmax+1]>1||b[c.sfbmax+2]>1))break}if(!h(t,c,b,s,A))break;0!=c.scalefac_scale&&(T=254);var x=o-c.part2_length;if(x<=0)break;for(;(c.part2_3_length=v.count_bits(f,s,c,g))>x&&c.global_gain<=T;)c.global_gain++;if(c.global_gain>T)break;if(0==d.over_count){for(;(c.part2_3_length=v.count_bits(f,s,c,g))>S&&c.global_gain<=T;)c.global_gain++;if(c.global_gain>T)break}if(m.calc_noise(c,r,b,E,g),E.bits=c.part2_3_length,l=e.block_type!=H.SHORT_TYPE?t.quant_comp:t.quant_comp_short,0!=(l=_(l,d,E,c,b)?1:0))S=e.part2_3_length,d=E,e.assign(c),M=0,J.arraycopy(s,0,p,0,576);else if(0==f.full_outer_loop){if(++M>B&&0==d.over_count)break;if(3==f.noise_shaping_amp&&A&&M>30)break;if(3==f.noise_shaping_amp&&A&&c.global_gain-w>15)break}}while(c.global_gain+c.scalefac_scale<255);3==f.noise_shaping_amp?A?R=!0:(c.assign(e),J.arraycopy(p,0,s,0,576),M=0,w=c.global_gain,A=!0):R=!0}return t.VBR==u.vbr_rh||t.VBR==u.vbr_mtrh?J.arraycopy(p,0,s,0,576):0!=(1&f.substep_shaping)&&trancate_smallspectrums(f,e,r,s),d.over_count},this.iteration_finish_one=function(t,e,r){var a=t.l3_side,n=a.tt[e][r];v.best_scalefac_store(t,e,r,a),1==t.use_best_huffman&&v.best_huffman_divide(t,n),b.ResvAdjust(t,n)},this.VBR_encode_granule=function(t,e,r,n,s,i,o){var _,l,f=t.internal_flags,u=new P,c=a(576),h=o,p=o+1,b=(o+i)/2,m=0,v=f.sfb21_extra;W.fill(u.l3_enc,0);do{f.sfb21_extra=!(b>h-42)&&v,l=outer_loop(t,e,r,n,s,b),l<=0?(m=1,p=e.part2_3_length,u.assign(e),J.arraycopy(n,0,c,0,576),o=p-32,_=o-i,b=(o+i)/2):(i=b+32,_=o-i,b=(o+i)/2,0!=m&&(m=2,e.assign(u),J.arraycopy(c,0,n,0,576)))}while(_>12);f.sfb21_extra=v,2==m&&J.arraycopy(u.l3_enc,0,e.l3_enc,0,576)},this.get_framebits=function(t,e){var r=t.internal_flags;r.bitrate_index=r.VBR_min_bitrate;var a=p.getframebits(t);r.bitrate_index=1,a=p.getframebits(t);for(var n=1;n<=r.VBR_max_bitrate;n++){r.bitrate_index=n;var s=new R(a);e[n]=b.ResvFrameBegin(t,s),a=s.bits}},this.VBR_old_prepare=function(t,e,r,a,n,s,i,o,_){var l,f=t.internal_flags,u=0,c=1,h=0;f.bitrate_index=f.VBR_max_bitrate;var p=b.ResvFrameBegin(t,new R(0))/f.mode_gr;get_framebits(t,s);for(var v=0;v<f.mode_gr;v++){var d=m.on_pe(t,e,o[v],p,v,0);f.mode_ext==H.MPG_MD_MS_LR&&(ms_convert(f.l3_side,v),m.reduce_side(o[v],r[v],p,d));for(var g=0;g<f.channels_out;++g){var S=f.l3_side.tt[v][g];S.block_type!=H.SHORT_TYPE?(u=1.28/(1+Math.exp(3.5-e[v][g]/300))-.05,l=f.PSY.mask_adjust-u):(u=2.56/(1+Math.exp(3.5-e[v][g]/300))-.14,l=f.PSY.mask_adjust_short-u),f.masking_lower=Math.pow(10,.1*l),init_outer_loop(f,S),_[v][g]=m.calc_xmin(t,a[v][g],S,n[v][g]),0!=_[v][g]&&(c=0),i[v][g]=126,h+=o[v][g]}}for(var v=0;v<f.mode_gr;v++)for(var g=0;g<f.channels_out;g++)h>s[f.VBR_max_bitrate]&&(o[v][g]*=s[f.VBR_max_bitrate],o[v][g]/=h),i[v][g]>o[v][g]&&(i[v][g]=o[v][g]);return c},this.bitpressure_strategy=function(t,e,r,a){for(var n=0;n<t.mode_gr;n++)for(var s=0;s<t.channels_out;s++){for(var i=t.l3_side.tt[n][s],o=e[n][s],_=0,l=0;l<i.psy_lmax;l++)o[_++]*=1+.029*l*l/H.SBMAX_l/H.SBMAX_l;if(i.block_type==H.SHORT_TYPE)for(var l=i.sfb_smin;l<H.SBMAX_s;l++)o[_++]*=1+.029*l*l/H.SBMAX_s/H.SBMAX_s,o[_++]*=1+.029*l*l/H.SBMAX_s/H.SBMAX_s,o[_++]*=1+.029*l*l/H.SBMAX_s/H.SBMAX_s;a[n][s]=0|Math.max(r[n][s],.9*a[n][s])}},this.VBR_new_prepare=function(t,e,r,a,n,s){var i,o=t.internal_flags,_=1,l=0,f=0;if(t.free_format){o.bitrate_index=0;var u=new R(l);i=b.ResvFrameBegin(t,u),l=u.bits,n[0]=i}else{o.bitrate_index=o.VBR_max_bitrate;var u=new R(l);b.ResvFrameBegin(t,u),l=u.bits,get_framebits(t,n),i=n[o.VBR_max_bitrate]}for(var c=0;c<o.mode_gr;c++){m.on_pe(t,e,s[c],l,c,0),o.mode_ext==H.MPG_MD_MS_LR&&ms_convert(o.l3_side,c);for(var h=0;h<o.channels_out;++h){var p=o.l3_side.tt[c][h];o.masking_lower=Math.pow(10,.1*o.PSY.mask_adjust),init_outer_loop(o,p),0!=m.calc_xmin(t,r[c][h],p,a[c][h])&&(_=0),f+=s[c][h]}}for(var c=0;c<o.mode_gr;c++)for(var h=0;h<o.channels_out;h++)f>i&&(s[c][h]*=i,s[c][h]/=f);return _},this.calc_target_bits=function(t,e,r,a,n,s){var i,o,_,l,f=t.internal_flags,u=f.l3_side,c=0;f.bitrate_index=f.VBR_max_bitrate;var h=new R(c);for(s[0]=b.ResvFrameBegin(t,h),c=h.bits,f.bitrate_index=1,c=p.getframebits(t)-8*f.sideinfo_len,n[0]=c/(f.mode_gr*f.channels_out),c=t.VBR_mean_bitrate_kbps*t.framesize*1e3,0!=(1&f.substep_shaping)&&(c*=1.09),c/=t.out_samplerate,c-=8*f.sideinfo_len,c/=f.mode_gr*f.channels_out,i=.93+.07*(11-t.compression_ratio)/5.5,i<.9&&(i=.9),i>1&&(i=1),o=0;o<f.mode_gr;o++){var v=0;for(_=0;_<f.channels_out;_++){if(a[o][_]=int(i*c),e[o][_]>700){var d=int((e[o][_]-700)/1.4),g=u.tt[o][_];a[o][_]=int(i*c),g.block_type==H.SHORT_TYPE&&d<c/2&&(d=c/2),d>3*c/2?d=3*c/2:d<0&&(d=0),a[o][_]+=d}a[o][_]>X.MAX_BITS_PER_CHANNEL&&(a[o][_]=X.MAX_BITS_PER_CHANNEL),v+=a[o][_]}if(v>X.MAX_BITS_PER_GRANULE)for(_=0;_<f.channels_out;++_)a[o][_]*=X.MAX_BITS_PER_GRANULE,a[o][_]/=v}if(f.mode_ext==H.MPG_MD_MS_LR)for(o=0;o<f.mode_gr;o++)m.reduce_side(a[o],r[o],c*f.channels_out,X.MAX_BITS_PER_GRANULE);for(l=0,o=0;o<f.mode_gr;o++)for(_=0;_<f.channels_out;_++)a[o][_]>X.MAX_BITS_PER_CHANNEL&&(a[o][_]=X.MAX_BITS_PER_CHANNEL),l+=a[o][_];if(l>s[0])for(o=0;o<f.mode_gr;o++)for(_=0;_<f.channels_out;_++)a[o][_]*=s[0],a[o][_]/=l}}function O(){this.thm=new Y,this.en=new Y}function L(){function t(t,e,r){for(var a=10,s=e+238-14-286,i=-15;i<0;i++){var o,_,l;o=n[a+-10],_=t[s+-224]*o,l=t[e+224]*o,o=n[a+-9],_+=t[s+-160]*o,l+=t[e+160]*o,o=n[a+-8],_+=t[s+-96]*o,l+=t[e+96]*o,o=n[a+-7],_+=t[s+-32]*o,l+=t[e+32]*o,o=n[a+-6],_+=t[s+32]*o,l+=t[e+-32]*o,o=n[a+-5],_+=t[s+96]*o,l+=t[e+-96]*o,o=n[a+-4],_+=t[s+160]*o,l+=t[e+-160]*o,o=n[a+-3],_+=t[s+224]*o,l+=t[e+-224]*o,o=n[a+-2],_+=t[e+-256]*o,l-=t[s+256]*o,o=n[a+-1],_+=t[e+-192]*o,l-=t[s+192]*o,o=n[a+0],_+=t[e+-128]*o,l-=t[s+128]*o,o=n[a+1],_+=t[e+-64]*o,l-=t[s+64]*o,o=n[a+2],_+=t[e+0]*o,l-=t[s+0]*o,o=n[a+3],_+=t[e+64]*o,l-=t[s+-64]*o,o=n[a+4],_+=t[e+128]*o,l-=t[s+-128]*o,o=n[a+5],_+=t[e+192]*o,l-=t[s+-192]*o,_*=n[a+6],o=l-_,r[30+2*i]=l+_,r[31+2*i]=n[a+7]*o,a+=18,e--,s++}var _,l,f,u;l=t[e+-16]*n[a+-10],_=t[e+-32]*n[a+-2],l+=(t[e+-48]-t[e+16])*n[a+-9],_+=t[e+-96]*n[a+-1],l+=(t[e+-80]+t[e+48])*n[a+-8],_+=t[e+-160]*n[a+0],l+=(t[e+-112]-t[e+80])*n[a+-7],_+=t[e+-224]*n[a+1],l+=(t[e+-144]+t[e+112])*n[a+-6],_-=t[e+32]*n[a+2],l+=(t[e+-176]-t[e+144])*n[a+-5],_-=t[e+96]*n[a+3],l+=(t[e+-208]+t[e+176])*n[a+-4],_-=t[e+160]*n[a+4],l+=(t[e+-240]-t[e+208])*n[a+-3],_-=t[e+224],f=_-l,u=_+l,l=r[14],_=r[15]-l,r[31]=u+l,r[30]=f+_,r[15]=f-_,r[14]=u-l;var c;c=r[28]-r[0],r[0]+=r[28],r[28]=c*n[a+-36+7],c=r[29]-r[1],r[1]+=r[29],r[29]=c*n[a+-36+7],c=r[26]-r[2],r[2]+=r[26],r[26]=c*n[a+-72+7],c=r[27]-r[3],r[3]+=r[27],r[27]=c*n[a+-72+7],c=r[24]-r[4],r[4]+=r[24],r[24]=c*n[a+-108+7],c=r[25]-r[5],r[5]+=r[25],r[25]=c*n[a+-108+7],c=r[22]-r[6],r[6]+=r[22],r[22]=c*$.SQRT2,c=r[23]-r[7],r[7]+=r[23],r[23]=c*$.SQRT2-r[7],r[7]-=r[6],r[22]-=r[7],r[23]-=r[22],c=r[6],r[6]=r[31]-c,r[31]=r[31]+c,c=r[7],r[7]=r[30]-c,r[30]=r[30]+c,c=r[22],r[22]=r[15]-c,r[15]=r[15]+c,c=r[23],r[23]=r[14]-c,r[14]=r[14]+c,c=r[20]-r[8],r[8]+=r[20],r[20]=c*n[a+-180+7],c=r[21]-r[9],r[9]+=r[21],r[21]=c*n[a+-180+7],c=r[18]-r[10],r[10]+=r[18],r[18]=c*n[a+-216+7],c=r[19]-r[11],r[11]+=r[19],r[19]=c*n[a+-216+7],c=r[16]-r[12],r[12]+=r[16],r[16]=c*n[a+-252+7],c=r[17]-r[13],r[13]+=r[17],r[17]=c*n[a+-252+7],c=-r[20]+r[24],r[20]+=r[24],r[24]=c*n[a+-216+7],c=-r[21]+r[25],r[21]+=r[25],r[25]=c*n[a+-216+7],c=r[4]-r[8],r[4]+=r[8],r[8]=c*n[a+-216+7],c=r[5]-r[9],r[5]+=r[9],r[9]=c*n[a+-216+7],c=r[0]-r[12],r[0]+=r[12],r[12]=c*n[a+-72+7],c=r[1]-r[13],r[1]+=r[13],r[13]=c*n[a+-72+7],c=r[16]-r[28],r[16]+=r[28],r[28]=c*n[a+-72+7],c=-r[17]+r[29],r[17]+=r[29],r[29]=c*n[a+-72+7],c=$.SQRT2*(r[2]-r[10]),r[2]+=r[10],r[10]=c,c=$.SQRT2*(r[3]-r[11]),r[3]+=r[11],r[11]=c,c=$.SQRT2*(-r[18]+r[26]),r[18]+=r[26],r[26]=c-r[18],c=$.SQRT2*(-r[19]+r[27]),r[19]+=r[27],r[27]=c-r[19],c=r[2],r[19]-=r[3],r[3]-=c,r[2]=r[31]-c,r[31]+=c,c=r[3],r[11]-=r[19],r[18]-=c,r[3]=r[30]-c,r[30]+=c,c=r[18],r[27]-=r[11],r[19]-=c,r[18]=r[15]-c,r[15]+=c,c=r[19],r[10]-=c,r[19]=r[14]-c,r[14]+=c,c=r[10],r[11]-=c,r[10]=r[23]-c,r[23]+=c,c=r[11],r[26]-=c,r[11]=r[22]-c,r[22]+=c,c=r[26],r[27]-=c,r[26]=r[7]-c,r[7]+=c,c=r[27],r[27]=r[6]-c,r[6]+=c,c=$.SQRT2*(r[0]-r[4]),r[0]+=r[4],r[4]=c,c=$.SQRT2*(r[1]-r[5]),r[1]+=r[5],r[5]=c,c=$.SQRT2*(r[16]-r[20]),r[16]+=r[20],r[20]=c,c=$.SQRT2*(r[17]-r[21]),r[17]+=r[21],r[21]=c,c=-$.SQRT2*(r[8]-r[12]),r[8]+=r[12],r[12]=c-r[8],c=-$.SQRT2*(r[9]-r[13]),r[9]+=r[13],r[13]=c-r[9],c=-$.SQRT2*(r[25]-r[29]),r[25]+=r[29],r[29]=c-r[25],c=-$.SQRT2*(r[24]+r[28]),r[24]-=r[28],r[28]=c-r[24],c=r[24]-r[16],r[24]=c,c=r[20]-c,r[20]=c,c=r[28]-c,r[28]=c,c=r[25]-r[17],r[25]=c,c=r[21]-c,r[21]=c,c=r[29]-c,r[29]=c,c=r[17]-r[1],r[17]=c,c=r[9]-c,r[9]=c,c=r[25]-c,r[25]=c,c=r[5]-c,r[5]=c,c=r[21]-c,r[21]=c,c=r[13]-c,r[13]=c,c=r[29]-c,r[29]=c,c=r[1]-r[0],r[1]=c,c=r[16]-c,r[16]=c,c=r[17]-c,r[17]=c,c=r[8]-c,r[8]=c,c=r[9]-c,r[9]=c,c=r[24]-c,r[24]=c,c=r[25]-c,r[25]=c,c=r[4]-c,r[4]=c,c=r[5]-c,r[5]=c,c=r[20]-c,r[20]=c,c=r[21]-c,r[21]=c,c=r[12]-c;r[12]=c,c=r[13]-c,r[13]=c,c=r[28]-c,r[28]=c,c=r[29]-c,r[29]=c,c=r[0],r[0]+=r[31],r[31]-=c,c=r[1],r[1]+=r[30],r[30]-=c,c=r[16],r[16]+=r[15],r[15]-=c,c=r[17],r[17]+=r[14],r[14]-=c,c=r[8],r[8]+=r[23],r[23]-=c,c=r[9],r[9]+=r[22],r[22]-=c,c=r[24],r[24]+=r[7],r[7]-=c,c=r[25],r[25]+=r[6],r[6]-=c,c=r[4],r[4]+=r[27],r[27]-=c,c=r[5],r[5]+=r[26],r[26]-=c,c=r[20],r[20]+=r[11],r[11]-=c,c=r[21],r[21]+=r[10],r[10]-=c,c=r[12],r[12]+=r[19],r[19]-=c,c=r[13],r[13]+=r[18],r[18]-=c,c=r[28],r[28]+=r[3],r[3]-=c,c=r[29],r[29]+=r[2],r[2]-=c}function e(t,e){for(var r=0;r<3;r++){var a,n,i,o,_,l;o=t[e+6]*s[H.SHORT_TYPE][0]-t[e+15],a=t[e+0]*s[H.SHORT_TYPE][2]-t[e+9],n=o+a,i=o-a,o=t[e+15]*s[H.SHORT_TYPE][0]+t[e+6],a=t[e+9]*s[H.SHORT_TYPE][2]+t[e+0],_=o+a,l=-o+a,a=2.069978111953089e-11*(t[e+3]*s[H.SHORT_TYPE][1]-t[e+12]),o=2.069978111953089e-11*(t[e+12]*s[H.SHORT_TYPE][1]+t[e+3]),t[e+0]=1.90752519173728e-11*n+a,t[e+15]=1.90752519173728e-11*-_+o,i=.8660254037844387*i*1.907525191737281e-11,_=.5*_*1.907525191737281e-11+o,t[e+3]=i-_,t[e+6]=i+_,n=.5*n*1.907525191737281e-11-a,l=.8660254037844387*l*1.907525191737281e-11,t[e+9]=n+l,t[e+12]=n-l,e++}}function r(t,e,r){var a,n,s,i,_,l,f,u,c,h;s=r[17]-r[9],_=r[15]-r[11],l=r[14]-r[12],f=r[0]+r[8],u=r[1]+r[7],c=r[2]+r[6],h=r[3]+r[5],t[e+17]=f+c-h-(u-r[4]),n=(f+c-h)*o[19]+(u-r[4]),a=(s-_-l)*o[18],t[e+5]=a+n,t[e+6]=a-n,i=(r[16]-r[10])*o[18],u=u*o[19]+r[4],a=s*o[12]+i+_*o[13]+l*o[14],n=-f*o[16]+u-c*o[17]+h*o[15],t[e+1]=a+n,t[e+2]=a-n,a=s*o[13]-i-_*o[14]+l*o[12],n=-f*o[17]+u-c*o[15]+h*o[16],t[e+9]=a+n,t[e+10]=a-n,a=s*o[14]-i+_*o[12]-l*o[13],n=f*o[15]-u+c*o[16]-h*o[17],t[e+13]=a+n,t[e+14]=a-n;var p,b,m,v,d,g,S,R;p=r[8]-r[0],m=r[6]-r[2],v=r[5]-r[3],d=r[17]+r[9],g=r[16]+r[10],S=r[15]+r[11],R=r[14]+r[12],t[e+0]=d+S+R+(g+r[13]),a=(d+S+R)*o[19]-(g+r[13]),n=(p-m+v)*o[18],t[e+11]=a+n,t[e+12]=a-n,b=(r[7]-r[1])*o[18],g=r[13]-g*o[19],a=d*o[15]-g+S*o[16]+R*o[17],n=p*o[14]+b+m*o[12]+v*o[13],t[e+3]=a+n,t[e+4]=a-n,a=-d*o[17]+g-S*o[15]-R*o[16],n=p*o[13]+b-m*o[14]-v*o[12],t[e+7]=a+n,t[e+8]=a-n,a=-d*o[16]+g-S*o[17]-R*o[15],n=p*o[12]-b+m*o[13]-v*o[14],t[e+15]=a+n,t[e+16]=a-n}var n=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*$.SQRT2*.5/2384e-9,.017876148*$.SQRT2*.5/2384e-9,.003134727*$.SQRT2*.5/2384e-9,.002457142*$.SQRT2*.5/2384e-9,971317e-9*$.SQRT2*.5/2384e-9,218868e-9*$.SQRT2*.5/2384e-9,101566e-9*$.SQRT2*.5/2384e-9,13828e-9*$.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,49591e-9/2384e-9,1995.1556208053692,21458e-9/2384e-9,-69618e-9/2384e-9],s=[[2.382191739347913e-13,6.423305872147834e-13,9.400849094049688e-13,1.122435026096556e-12,1.183840321267481e-12,1.122435026096556e-12,9.40084909404969e-13,6.423305872147839e-13,2.382191739347918e-13,5.456116108943412e-12,4.878985199565852e-12,4.240448995017367e-12,3.559909094758252e-12,2.858043359288075e-12,2.156177623817898e-12,1.475637723558783e-12,8.371015190102974e-13,2.599706096327376e-13,-5.456116108943412e-12,-4.878985199565852e-12,-4.240448995017367e-12,-3.559909094758252e-12,-2.858043359288076e-12,-2.156177623817898e-12,-1.475637723558783e-12,-8.371015190102975e-13,-2.599706096327376e-13,-2.382191739347923e-13,-6.423305872147843e-13,-9.400849094049696e-13,-1.122435026096556e-12,-1.183840321267481e-12,-1.122435026096556e-12,-9.400849094049694e-13,-6.42330587214784e-13,-2.382191739347918e-13],[2.382191739347913e-13,6.423305872147834e-13,9.400849094049688e-13,1.122435026096556e-12,1.183840321267481e-12,1.122435026096556e-12,9.400849094049688e-13,6.423305872147841e-13,2.382191739347918e-13,5.456116108943413e-12,4.878985199565852e-12,4.240448995017367e-12,3.559909094758253e-12,2.858043359288075e-12,2.156177623817898e-12,1.475637723558782e-12,8.371015190102975e-13,2.599706096327376e-13,-5.461314069809755e-12,-4.921085770524055e-12,-4.343405037091838e-12,-3.732668368707687e-12,-3.093523840190885e-12,-2.430835727329465e-12,-1.734679010007751e-12,-9.74825365660928e-13,-2.797435120168326e-13,0,0,0,0,0,0,-2.283748241799531e-13,-4.037858874020686e-13,-2.146547464825323e-13],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2.283748241799531e-13,4.037858874020686e-13,2.146547464825323e-13,5.461314069809755e-12,4.921085770524055e-12,4.343405037091838e-12,3.732668368707687e-12,3.093523840190885e-12,2.430835727329466e-12,1.734679010007751e-12,9.74825365660928e-13,2.797435120168326e-13,-5.456116108943413e-12,-4.878985199565852e-12,-4.240448995017367e-12,-3.559909094758253e-12,-2.858043359288075e-12,-2.156177623817898e-12,-1.475637723558782e-12,-8.371015190102975e-13,-2.599706096327376e-13,-2.382191739347913e-13,-6.423305872147834e-13,-9.400849094049688e-13,-1.122435026096556e-12,-1.183840321267481e-12,-1.122435026096556e-12,-9.400849094049688e-13,-6.423305872147841e-13,-2.382191739347918e-13]],i=s[H.SHORT_TYPE],o=s[H.SHORT_TYPE],_=s[H.SHORT_TYPE],l=s[H.SHORT_TYPE],f=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];this.mdct_sub48=function(n,o,u){for(var c=o,h=286,p=0;p<n.channels_out;p++){for(var b=0;b<n.mode_gr;b++){for(var m,v=n.l3_side.tt[b][p],d=v.xr,g=0,S=n.sb_sample[p][1-b],R=0,A=0;A<9;A++)for(t(c,h,S[R]),t(c,h+32,S[R+1]),R+=2,h+=64,m=1;m<32;m+=2)S[R-1][m]*=-1;for(m=0;m<32;m++,g+=18){var y=v.block_type,w=n.sb_sample[p][b],M=n.sb_sample[p][1-b];if(0!=v.mixed_block_flag&&m<2&&(y=0),n.amp_filter[m]<1e-12)W.fill(d,g+0,g+18,0);else{if(n.amp_filter[m]<1)for(var A=0;A<18;A++)M[A][f[m]]*=n.amp_filter[m];if(y==H.SHORT_TYPE){for(var A=-3;A<0;A++){var B=s[H.SHORT_TYPE][A+3];d[g+3*A+9]=w[9+A][f[m]]*B-w[8-A][f[m]],d[g+3*A+18]=w[14-A][f[m]]*B+w[15+A][f[m]],d[g+3*A+10]=w[15+A][f[m]]*B-w[14-A][f[m]],d[g+3*A+19]=M[2-A][f[m]]*B+M[3+A][f[m]],d[g+3*A+11]=M[3+A][f[m]]*B-M[2-A][f[m]],d[g+3*A+20]=M[8-A][f[m]]*B+M[9+A][f[m]]}e(d,g)}else{for(var E=a(18),A=-9;A<0;A++){var T,x;T=s[y][A+27]*M[A+9][f[m]]+s[y][A+36]*M[8-A][f[m]],x=s[y][A+9]*w[A+9][f[m]]-s[y][A+18]*w[8-A][f[m]],E[A+9]=T-x*i[3+A+9],E[A+18]=T*i[3+A+9]+x}r(d,g,E)}}if(y!=H.SHORT_TYPE&&0!=m)for(var A=7;A>=0;--A){var k,P;k=d[g+A]*_[20+A]+d[g+-1-A]*l[28+A],P=d[g+A]*l[28+A]-d[g+-1-A]*_[20+A],d[g+-1-A]=k,d[g+A]=P}}}if(c=u,h=286,1==n.mode_gr)for(var I=0;I<18;I++)J.arraycopy(n.sb_sample[p][1][I],0,n.sb_sample[p][0][I],0,32)}}}function H(){function t(t){var e,r;if(0==t.ATH.useAdjust)return void(t.ATH.adjust=1);if(r=t.loudness_sq[0][0],e=t.loudness_sq[1][0],2==t.channels_out?(r+=t.loudness_sq[0][1],e+=t.loudness_sq[1][1]):(r+=r,e+=e),2==t.mode_gr&&(r=Math.max(r,e)),r*=.5,(r*=t.ATH.aaSensitivityP)>.03125)t.ATH.adjust>=1?t.ATH.adjust=1:t.ATH.adjust<t.ATH.adjustLimit&&(t.ATH.adjust=t.ATH.adjustLimit),t.ATH.adjustLimit=1;else{var a=31.98*r+625e-6;t.ATH.adjust>=a?(t.ATH.adjust*=.075*a+.925,t.ATH.adjust<a&&(t.ATH.adjust=a)):t.ATH.adjustLimit>=a?t.ATH.adjust=a:t.ATH.adjust<t.ATH.adjustLimit&&(t.ATH.adjust=t.ATH.adjustLimit),t.ATH.adjustLimit=a}}function e(t){var e,r;for(t.bitrate_stereoMode_Hist[t.bitrate_index][4]++,t.bitrate_stereoMode_Hist[15][4]++,2==t.channels_out&&(t.bitrate_stereoMode_Hist[t.bitrate_index][t.mode_ext]++,t.bitrate_stereoMode_Hist[15][t.mode_ext]++),e=0;e<t.mode_gr;++e)for(r=0;r<t.channels_out;++r){var a=0|t.l3_side.tt[e][r].block_type;0!=t.l3_side.tt[e][r].mixed_block_flag&&(a=4),t.bitrate_blockType_Hist[t.bitrate_index][a]++,t.bitrate_blockType_Hist[t.bitrate_index][5]++,t.bitrate_blockType_Hist[15][a]++,t.bitrate_blockType_Hist[15][5]++}}function n(t,e){var r,n,s=t.internal_flags;if(0==s.lame_encode_frame_init){var i,o,_=a(2014),l=a(2014);for(s.lame_encode_frame_init=1,i=0,o=0;i<286+576*(1+s.mode_gr);++i)i<576*s.mode_gr?(_[i]=0,2==s.channels_out&&(l[i]=0)):(_[i]=e[0][o],2==s.channels_out&&(l[i]=e[1][o]),++o);for(n=0;n<s.mode_gr;n++)for(r=0;r<s.channels_out;r++)s.l3_side.tt[n][r].block_type=H.SHORT_TYPE;b.mdct_sub48(s,_,l)}}var s=H.FFTOFFSET,o=H.MPG_MD_MS_LR,_=null;this.psy=null;var f=null,h=null,p=null;this.setModules=function(t,e,r,a){_=t,this.psy=e,f=e,h=a,p=r};var b=new L;this.lame_encode_mp3_frame=function(a,m,v,d,g,S){var R,A=l([2,2]);A[0][0]=new O,A[0][1]=new O,A[1][0]=new O,A[1][1]=new O;var y=l([2,2]);y[0][0]=new O,y[0][1]=new O,y[1][0]=new O,y[1][1]=new O;var w,M,B,E,T=[null,null],x=a.internal_flags,k=i([2,4]),P=[.5,.5],I=[[0,0],[0,0]],L=[[0,0],[0,0]];if(T[0]=m,T[1]=v,0==x.lame_encode_frame_init&&n(a,T),x.padding=0,(x.slot_lag-=x.frac_SpF)<0&&(x.slot_lag+=a.out_samplerate,x.padding=1),0!=x.psymodel){var N=[null,null],V=0,D=r(2);for(E=0;E<x.mode_gr;E++){for(B=0;B<x.channels_out;B++)N[B]=T[B],V=576+576*E-H.FFTOFFSET;if(0!=(a.VBR==u.vbr_mtrh||a.VBR==u.vbr_mt?f.L3psycho_anal_vbr(a,N,V,E,A,y,I[E],L[E],k[E],D):f.L3psycho_anal_ns(a,N,V,E,A,y,I[E],L[E],k[E],D)))return-4;for(a.mode==c.JOINT_STEREO&&(P[E]=k[E][2]+k[E][3],P[E]>0&&(P[E]=k[E][3]/P[E])),B=0;B<x.channels_out;B++){var Y=x.l3_side.tt[E][B];Y.block_type=D[B],Y.mixed_block_flag=0}}}else for(E=0;E<x.mode_gr;E++)for(B=0;B<x.channels_out;B++)x.l3_side.tt[E][B].block_type=NORM_TYPE,x.l3_side.tt[E][B].mixed_block_flag=0,
L[E][B]=I[E][B]=700;if(t(x),b.mdct_sub48(x,T[0],T[1]),x.mode_ext=H.MPG_MD_LR_LR,a.force_ms)x.mode_ext=H.MPG_MD_MS_LR;else if(a.mode==c.JOINT_STEREO){var X=0,C=0;for(E=0;E<x.mode_gr;E++)for(B=0;B<x.channels_out;B++)X+=L[E][B],C+=I[E][B];if(X<=1*C){var q=x.l3_side.tt[0],j=x.l3_side.tt[x.mode_gr-1];q[0].block_type==q[1].block_type&&j[0].block_type==j[1].block_type&&(x.mode_ext=H.MPG_MD_MS_LR)}}if(x.mode_ext==o?(w=y,M=L):(w=A,M=I),a.analysis&&null!=x.pinfo)for(E=0;E<x.mode_gr;E++)for(B=0;B<x.channels_out;B++)x.pinfo.ms_ratio[E]=x.ms_ratio[E],x.pinfo.ms_ener_ratio[E]=P[E],x.pinfo.blocktype[E][B]=x.l3_side.tt[E][B].block_type,x.pinfo.pe[E][B]=M[E][B],J.arraycopy(x.l3_side.tt[E][B].xr,0,x.pinfo.xr[E][B],0,576),x.mode_ext==o&&(x.pinfo.ers[E][B]=x.pinfo.ers[E][B+2],J.arraycopy(x.pinfo.energy[E][B+2],0,x.pinfo.energy[E][B],0,x.pinfo.energy[E][B].length));if(a.VBR==u.vbr_off||a.VBR==u.vbr_abr){var F,U;for(F=0;F<18;F++)x.nsPsy.pefirbuf[F]=x.nsPsy.pefirbuf[F+1];for(U=0,E=0;E<x.mode_gr;E++)for(B=0;B<x.channels_out;B++)U+=M[E][B];for(x.nsPsy.pefirbuf[18]=U,U=x.nsPsy.pefirbuf[9],F=0;F<9;F++)U+=(x.nsPsy.pefirbuf[F]+x.nsPsy.pefirbuf[18-F])*H.fircoef[F];for(U=3350*x.mode_gr*x.channels_out/U,E=0;E<x.mode_gr;E++)for(B=0;B<x.channels_out;B++)M[E][B]*=U}if(x.iteration_loop.iteration_loop(a,M,P,w),_.format_bitstream(a),R=_.copy_buffer(x,d,g,S,1),a.bWriteVbrTag&&h.addVbrFrame(a),a.analysis&&null!=x.pinfo){for(B=0;B<x.channels_out;B++){var z;for(z=0;z<s;z++)x.pinfo.pcmdata[B][z]=x.pinfo.pcmdata[B][z+a.framesize];for(z=s;z<1600;z++)x.pinfo.pcmdata[B][z]=T[B][z-s]}p.set_frame_pinfo(a,w)}return e(x),R}}function N(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function V(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[r(4),r(4)];for(var t=0;t<2;t++)for(var e=0;e<2;e++)this.tt[t][e]=new P}function D(){this.last_en_subshort=i([4,9]),this.lastAttacks=r(4),this.pefirbuf=a(19),this.longfact=a(H.SBMAX_l),this.shortfact=a(H.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function Y(){this.l=a(H.SBMAX_l),this.s=i([H.SBMAX_s,3]);var t=this;this.assign=function(e){J.arraycopy(e.l,0,t.l,0,H.SBMAX_l);for(var r=0;r<H.SBMAX_s;r++)for(var a=0;a<3;a++)t.s[r][a]=e.s[r][a]}}function X(){function e(){this.write_timing=0,this.ptr=0,this.buf=t(s)}var s=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=i([2,X.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new V,this.ms_ratio=a(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=r(2),this.CurrentStep=r(2),this.masking_lower=0,this.bv_scf=r(576),this.pseudohalf=r(rt.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*X.BPC+1),this.itime=n(2),this.sideinfo_len=0,this.sb_sample=i([2,2,18,H.SBLIMIT]),this.amp_filter=a(32),this.header=new Array(X.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new T,this.minval_l=a(H.CBANDS),this.minval_s=a(H.CBANDS),this.nb_1=i([4,H.CBANDS]),this.nb_2=i([4,H.CBANDS]),this.nb_s1=i([4,H.CBANDS]),this.nb_s2=i([4,H.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=a(4),this.loudness_sq=i([2,2]),this.loudness_sq_save=a(2),this.mld_l=a(H.SBMAX_l),this.mld_s=a(H.SBMAX_s),this.bm_l=r(H.SBMAX_l),this.bo_l=r(H.SBMAX_l),this.bm_s=r(H.SBMAX_s),this.bo_s=r(H.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=o([H.CBANDS,2]),this.s3ind_s=o([H.CBANDS,2]),this.numlines_s=r(H.CBANDS),this.numlines_l=r(H.CBANDS),this.rnumlines_l=a(H.CBANDS),this.mld_cb_l=a(H.CBANDS),this.mld_cb_s=a(H.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=a(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=r(2),this.nsPsy=new D,this.VBR_seek_table=new N,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=o([16,5]),this.bitrate_blockType_Hist=o([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var _=0;_<this.en.length;_++)this.en[_]=new Y;for(var _=0;_<this.thm.length;_++)this.thm[_]=new Y;for(var _=0;_<this.header.length;_++)this.header[_]=new e}function C(){function t(t,e,r){var a,s,i,o=0;r<<=1;var _=e+r;a=4;do{var l,f,u,c,h,p,b;b=a>>1,c=a,h=a<<1,p=h+c,a=h<<1,s=e,i=s+b;do{var m,v,d,g;v=t[s+0]-t[s+c],m=t[s+0]+t[s+c],g=t[s+h]-t[s+p],d=t[s+h]+t[s+p],t[s+h]=m-d,t[s+0]=m+d,t[s+p]=v-g,t[s+c]=v+g,v=t[i+0]-t[i+c],m=t[i+0]+t[i+c],g=$.SQRT2*t[i+p],d=$.SQRT2*t[i+h],t[i+h]=m-d,t[i+0]=m+d,t[i+p]=v-g,t[i+c]=v+g,i+=a,s+=a}while(s<_);for(f=n[o+0],l=n[o+1],u=1;u<b;u++){var S,R;S=1-2*l*l,R=2*l*f,s=e+u,i=e+c-u;do{var A,y,w,m,v,M,d,B,g,E;y=R*t[s+c]-S*t[i+c],A=S*t[s+c]+R*t[i+c],v=t[s+0]-A,m=t[s+0]+A,M=t[i+0]-y,w=t[i+0]+y,y=R*t[s+p]-S*t[i+p],A=S*t[s+p]+R*t[i+p],g=t[s+h]-A,d=t[s+h]+A,E=t[i+h]-y,B=t[i+h]+y,y=l*d-f*E,A=f*d+l*E,t[s+h]=m-A,t[s+0]=m+A,t[i+p]=M-y,t[i+c]=M+y,y=f*B-l*g,A=l*B+f*g,t[i+h]=w-A,t[i+0]=w+A,t[s+p]=v-y,t[s+c]=v+y,i+=a,s+=a}while(s<_);S=f,f=S*n[o+0]-l*n[o+1],l=S*n[o+1]+l*n[o+0]}o+=2}while(a<r)}var e=a(H.BLKSIZE),r=a(H.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475],s=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(e,a,n,i,o){for(var _=0;_<3;_++){var l=H.BLKSIZE_s/2,f=65535&192*(_+1),u=H.BLKSIZE_s/8-1;do{var c,h,p,b,m,v=255&s[u<<2];c=r[v]*i[n][o+v+f],m=r[127-v]*i[n][o+v+f+128],h=c-m,c+=m,p=r[v+64]*i[n][o+v+f+64],m=r[63-v]*i[n][o+v+f+192],b=p-m,p+=m,l-=4,a[_][l+0]=c+p,a[_][l+2]=c-p,a[_][l+1]=h+b,a[_][l+3]=h-b,c=r[v+1]*i[n][o+v+f+1],m=r[126-v]*i[n][o+v+f+129],h=c-m,c+=m,p=r[v+65]*i[n][o+v+f+65],m=r[62-v]*i[n][o+v+f+193],b=p-m,p+=m,a[_][l+H.BLKSIZE_s/2+0]=c+p,a[_][l+H.BLKSIZE_s/2+2]=c-p,a[_][l+H.BLKSIZE_s/2+1]=h+b,a[_][l+H.BLKSIZE_s/2+3]=h-b}while(--u>=0);t(a[_],l,H.BLKSIZE_s/2)}},this.fft_long=function(r,a,n,i,o){var _=H.BLKSIZE/8-1,l=H.BLKSIZE/2;do{var f,u,c,h,p,b=255&s[_];f=e[b]*i[n][o+b],p=e[b+512]*i[n][o+b+512],u=f-p,f+=p,c=e[b+256]*i[n][o+b+256],p=e[b+768]*i[n][o+b+768],h=c-p,c+=p,l-=4,a[l+0]=f+c,a[l+2]=f-c,a[l+1]=u+h,a[l+3]=u-h,f=e[b+1]*i[n][o+b+1],p=e[b+513]*i[n][o+b+513],u=f-p,f+=p,c=e[b+257]*i[n][o+b+257],p=e[b+769]*i[n][o+b+769],h=c-p,c+=p,a[l+H.BLKSIZE/2+0]=f+c,a[l+H.BLKSIZE/2+2]=f-c,a[l+H.BLKSIZE/2+1]=u+h,a[l+H.BLKSIZE/2+3]=u-h}while(--_>=0);t(a,l,H.BLKSIZE/2)},this.init_fft=function(t){for(var a=0;a<H.BLKSIZE;a++)e[a]=.42-.5*Math.cos(2*Math.PI*(a+.5)/H.BLKSIZE)+.08*Math.cos(4*Math.PI*(a+.5)/H.BLKSIZE);for(var a=0;a<H.BLKSIZE_s/2;a++)r[a]=.5*(1-Math.cos(2*Math.PI*(a+.5)/H.BLKSIZE_s))}}function q(){function t(t){return t}function e(t,e){for(var r=0,a=0;a<H.BLKSIZE/2;++a)r+=t[a]*e.ATH.eql_w[a];return r*=st}function n(r,a,n,s,i,o,_,l,f,u,c){var h=r.internal_flags;if(f<2)Z.fft_long(h,s[i],f,u,c),Z.fft_short(h,o[_],f,u,c);else if(2==f){for(var p=H.BLKSIZE-1;p>=0;--p){var b=s[i+0][p],m=s[i+1][p];s[i+0][p]=(b+m)*$.SQRT2*.5,s[i+1][p]=(b-m)*$.SQRT2*.5}for(var v=2;v>=0;--v)for(var p=H.BLKSIZE_s-1;p>=0;--p){var b=o[_+0][v][p],m=o[_+1][v][p];o[_+0][v][p]=(b+m)*$.SQRT2*.5,o[_+1][v][p]=(b-m)*$.SQRT2*.5}}a[0]=t(s[i+0][0]),a[0]*=a[0];for(var p=H.BLKSIZE/2-1;p>=0;--p){var d=s[i+0][H.BLKSIZE/2-p],g=s[i+0][H.BLKSIZE/2+p];a[H.BLKSIZE/2-p]=t(.5*(d*d+g*g))}for(var v=2;v>=0;--v){n[v][0]=o[_+0][v][0],n[v][0]*=n[v][0];for(var p=H.BLKSIZE_s/2-1;p>=0;--p){var d=o[_+0][v][H.BLKSIZE_s/2-p],g=o[_+0][v][H.BLKSIZE_s/2+p];n[v][H.BLKSIZE_s/2-p]=t(.5*(d*d+g*g))}}for(var S=0,p=11;p<H.HBLKSIZE;p++)S+=a[p];if(h.tot_ener[f]=S,r.analysis){for(var p=0;p<H.HBLKSIZE;p++)h.pinfo.energy[l][f][p]=h.pinfo.energy_save[f][p],h.pinfo.energy_save[f][p]=a[p];h.pinfo.pe[l][f]=h.pe[f]}2==r.athaa_loudapprox&&f<2&&(h.loudness_sq[l][f]=h.loudness_sq_save[f],h.loudness_sq_save[f]=e(a,h))}function s(){z=Math.pow(10,(lt+1)/16),G=Math.pow(10,(ft+1)/16),K=Math.pow(10,ut/10)}function o(t,e,r,a,n,s){var i;if(e>t){if(!(e<t*G))return t+e;i=e/t}else{if(t>=e*G)return t+e;i=t/e}if(t+=e,a+3<=6){if(i>=z)return t;var o=0|$.FAST_LOG10_X(i,16);return t*pt[o]}var o=0|$.FAST_LOG10_X(i,16);if(e=0!=s?n.ATH.cb_s[r]*n.ATH.adjust:n.ATH.cb_l[r]*n.ATH.adjust,t<K*e){if(t>e){var _,l;return _=1,o<=13&&(_=bt[o]),l=$.FAST_LOG10_X(t/e,10/15),t*((ht[o]-_)*l+_)}return o>13?t:t*bt[o]}return t*ht[o]}function _(t,e,r){var a;if(t<0&&(t=0),e<0&&(e=0),t<=0)return e;if(e<=0)return t;if(a=e>t?e/t:t/e,-2<=r&&r<=2){if(a>=z)return t+e;return(t+e)*mt[0|$.FAST_LOG10_X(a,16)]}return a<G?t+e:(t<e&&(t=e),t)}function l(t,e){var r=t.internal_flags;if(r.channels_out>1){for(var a=0;a<H.SBMAX_l;a++){var n=r.thm[0].l[a],s=r.thm[1].l[a];r.thm[0].l[a]+=s*e,r.thm[1].l[a]+=n*e}for(var a=0;a<H.SBMAX_s;a++)for(var i=0;i<3;i++){var n=r.thm[0].s[a][i],s=r.thm[1].s[a][i];r.thm[0].s[a][i]+=s*e,r.thm[1].s[a][i]+=n*e}}}function h(t){for(var e=0;e<H.SBMAX_l;e++)if(!(t.thm[0].l[e]>1.58*t.thm[1].l[e]||t.thm[1].l[e]>1.58*t.thm[0].l[e])){var r=t.mld_l[e]*t.en[3].l[e],a=Math.max(t.thm[2].l[e],Math.min(t.thm[3].l[e],r));r=t.mld_l[e]*t.en[2].l[e];var n=Math.max(t.thm[3].l[e],Math.min(t.thm[2].l[e],r));t.thm[2].l[e]=a,t.thm[3].l[e]=n}for(var e=0;e<H.SBMAX_s;e++)for(var s=0;s<3;s++)if(!(t.thm[0].s[e][s]>1.58*t.thm[1].s[e][s]||t.thm[1].s[e][s]>1.58*t.thm[0].s[e][s])){var r=t.mld_s[e]*t.en[3].s[e][s],a=Math.max(t.thm[2].s[e][s],Math.min(t.thm[3].s[e][s],r));r=t.mld_s[e]*t.en[2].s[e][s];var n=Math.max(t.thm[3].s[e][s],Math.min(t.thm[2].s[e][s],r));t.thm[2].s[e][s]=a,t.thm[3].s[e][s]=n}}function p(t,e,r){var a=e,n=Math.pow(10,r);e*=2,a*=2;for(var s=0;s<H.SBMAX_l;s++){var i,o,_,l;if(l=t.ATH.cb_l[t.bm_l[s]]*n,i=Math.min(Math.max(t.thm[0].l[s],l),Math.max(t.thm[1].l[s],l)),o=Math.max(t.thm[2].l[s],l),_=Math.max(t.thm[3].l[s],l),i*e<o+_){var f=i*a/(o+_);o*=f,_*=f}t.thm[2].l[s]=Math.min(o,t.thm[2].l[s]),t.thm[3].l[s]=Math.min(_,t.thm[3].l[s])}n*=H.BLKSIZE_s/H.BLKSIZE;for(var s=0;s<H.SBMAX_s;s++)for(var u=0;u<3;u++){var i,o,_,l;if(l=t.ATH.cb_s[t.bm_s[s]]*n,i=Math.min(Math.max(t.thm[0].s[s][u],l),Math.max(t.thm[1].s[s][u],l)),o=Math.max(t.thm[2].s[s][u],l),_=Math.max(t.thm[3].s[s][u],l),i*e<o+_){var f=i*e/(o+_);o*=f,_*=f}t.thm[2].s[s][u]=Math.min(t.thm[2].s[s][u],o),t.thm[3].s[s][u]=Math.min(t.thm[3].s[s][u],_)}}function b(t,e,r,a,n){var s,i,o=0,_=0;for(s=i=0;s<H.SBMAX_s;++i,++s){for(var l=t.bo_s[s],f=t.npart_s,u=l<f?l:f;i<u;)o+=e[i],_+=r[i],i++;if(t.en[a].s[s][n]=o,t.thm[a].s[s][n]=_,i>=f){++s;break}var c=t.PSY.bo_s_weight[s],h=1-c;o=c*e[i],_=c*r[i],t.en[a].s[s][n]+=o,t.thm[a].s[s][n]+=_,o=h*e[i],_=h*r[i]}for(;s<H.SBMAX_s;++s)t.en[a].s[s][n]=0,t.thm[a].s[s][n]=0}function m(t,e,r,a){var n,s,i=0,o=0;for(n=s=0;n<H.SBMAX_l;++s,++n){for(var _=t.bo_l[n],l=t.npart_l,f=_<l?_:l;s<f;)i+=e[s],o+=r[s],s++;if(t.en[a].l[n]=i,t.thm[a].l[n]=o,s>=l){++n;break}var u=t.PSY.bo_l_weight[n],c=1-u;i=u*e[s],o=u*r[s],t.en[a].l[n]+=i,t.thm[a].l[n]+=o,i=c*e[s],o=c*r[s]}for(;n<H.SBMAX_l;++n)t.en[a].l[n]=0,t.thm[a].l[n]=0}function v(t,e,r,a,n,s){var i,o,_=t.internal_flags;for(o=i=0;o<_.npart_s;++o){for(var l=0,f=0,u=_.numlines_s[o],c=0;c<u;++c,++i){var h=e[s][i];l+=h,f<h&&(f=h)}r[o]=l}for(i=o=0;o<_.npart_s;o++){var p=_.s3ind_s[o][0],b=_.s3_ss[i++]*r[p];for(++p;p<=_.s3ind_s[o][1];)b+=_.s3_ss[i]*r[p],++i,++p;var m=rt*_.nb_s1[n][o];if(a[o]=Math.min(b,m),_.blocktype_old[1&n]==H.SHORT_TYPE){var m=at*_.nb_s2[n][o],v=a[o];a[o]=Math.min(m,v)}_.nb_s2[n][o]=_.nb_s1[n][o],_.nb_s1[n][o]=b}for(;o<=H.CBANDS;++o)r[o]=0,a[o]=0}function d(t,e,r,a){var n=t.internal_flags;t.short_blocks!=f.short_block_coupled||0!=e[0]&&0!=e[1]||(e[0]=e[1]=0);for(var s=0;s<n.channels_out;s++)a[s]=H.NORM_TYPE,t.short_blocks==f.short_block_dispensed&&(e[s]=1),t.short_blocks==f.short_block_forced&&(e[s]=0),0!=e[s]?n.blocktype_old[s]==H.SHORT_TYPE&&(a[s]=H.STOP_TYPE):(a[s]=H.SHORT_TYPE,n.blocktype_old[s]==H.NORM_TYPE&&(n.blocktype_old[s]=H.START_TYPE),n.blocktype_old[s]==H.STOP_TYPE&&(n.blocktype_old[s]=H.SHORT_TYPE)),r[s]=n.blocktype_old[s],n.blocktype_old[s]=a[s]}function g(t,e,r){return r>=1?t:r<=0?e:e>0?Math.pow(t/e,r)*e:0}function S(t,e){for(var r=309.07,a=0;a<H.SBMAX_s-1;a++)for(var n=0;n<3;n++){var s=t.thm.s[a][n];if(s>0){var i=s*e,o=t.en.s[a][n];o>i&&(r+=o>1e10*i?vt[a]*(10*Q):vt[a]*$.FAST_LOG10(o/i))}}return r}function R(t,e){for(var r=281.0575,a=0;a<H.SBMAX_l-1;a++){var n=t.thm.l[a];if(n>0){var s=n*e,i=t.en.l[a];i>s&&(r+=i>1e10*s?dt[a]*(10*Q):dt[a]*$.FAST_LOG10(i/s))}}return r}function A(t,e,r,a,n){var s,i;for(s=i=0;s<t.npart_l;++s){var o,_=0,l=0;for(o=0;o<t.numlines_l[s];++o,++i){var f=e[i];_+=f,l<f&&(l=f)}r[s]=_,a[s]=l,n[s]=_*t.rnumlines_l[s]}}function y(t,e,r,a){var n=ct.length-1,s=0,i=r[s]+r[s+1];if(i>0){var o=e[s];o<e[s+1]&&(o=e[s+1]),i=20*(2*o-i)/(i*(t.numlines_l[s]+t.numlines_l[s+1]-1));var _=0|i;_>n&&(_=n),a[s]=_}else a[s]=0;for(s=1;s<t.npart_l-1;s++)if((i=r[s-1]+r[s]+r[s+1])>0){var o=e[s-1];o<e[s]&&(o=e[s]),o<e[s+1]&&(o=e[s+1]),i=20*(3*o-i)/(i*(t.numlines_l[s-1]+t.numlines_l[s]+t.numlines_l[s+1]-1));var _=0|i;_>n&&(_=n),a[s]=_}else a[s]=0;if((i=r[s-1]+r[s])>0){var o=e[s-1];o<e[s]&&(o=e[s]),i=20*(2*o-i)/(i*(t.numlines_l[s-1]+t.numlines_l[s]-1));var _=0|i;_>n&&(_=n),a[s]=_}else a[s]=0}function w(e,r,a,n,s,i,o,_){var l=e.internal_flags;if(n<2)Z.fft_long(l,o[_],n,r,a);else if(2==n)for(var f=H.BLKSIZE-1;f>=0;--f){var u=o[_+0][f],c=o[_+1][f];o[_+0][f]=(u+c)*$.SQRT2*.5,o[_+1][f]=(u-c)*$.SQRT2*.5}i[0]=t(o[_+0][0]),i[0]*=i[0];for(var f=H.BLKSIZE/2-1;f>=0;--f){var h=o[_+0][H.BLKSIZE/2-f],p=o[_+0][H.BLKSIZE/2+f];i[H.BLKSIZE/2-f]=t(.5*(h*h+p*p))}for(var b=0,f=11;f<H.HBLKSIZE;f++)b+=i[f];if(l.tot_ener[n]=b,e.analysis){for(var f=0;f<H.HBLKSIZE;f++)l.pinfo.energy[s][n][f]=l.pinfo.energy_save[n][f],l.pinfo.energy_save[n][f]=i[f];l.pinfo.pe[s][n]=l.pe[n]}}function M(e,r,a,n,s,i,o,_){var l=e.internal_flags;if(0==s&&n<2&&Z.fft_short(l,o[_],n,r,a),2==n)for(var f=H.BLKSIZE_s-1;f>=0;--f){var u=o[_+0][s][f],c=o[_+1][s][f];o[_+0][s][f]=(u+c)*$.SQRT2*.5,o[_+1][s][f]=(u-c)*$.SQRT2*.5}i[s][0]=o[_+0][s][0],i[s][0]*=i[s][0];for(var f=H.BLKSIZE_s/2-1;f>=0;--f){var h=o[_+0][s][H.BLKSIZE_s/2-f],p=o[_+0][s][H.BLKSIZE_s/2+f];i[s][H.BLKSIZE_s/2-f]=t(.5*(h*h+p*p))}}function B(t,r,a,n){var s=t.internal_flags;2==t.athaa_loudapprox&&a<2&&(s.loudness_sq[r][a]=s.loudness_sq_save[a],s.loudness_sq_save[a]=e(n,s))}function E(t,e,r,n,s,o,_,l,f,u){for(var h=i([2,576]),p=t.internal_flags,b=p.channels_out,m=t.mode==c.JOINT_STEREO?4:b,v=0;v<b;v++){firbuf=e[v];for(var d=r+576-350-ot+192,g=0;g<576;g++){var S,R;S=firbuf[d+g+10],R=0;for(var A=0;A<(ot-1)/2-1;A+=2)S+=St[A]*(firbuf[d+g+A]+firbuf[d+g+ot-A]),R+=St[A+1]*(firbuf[d+g+A+1]+firbuf[d+g+ot-A-1]);h[v][g]=S+R}s[n][v].en.assign(p.en[v]),s[n][v].thm.assign(p.thm[v]),m>2&&(o[n][v].en.assign(p.en[v+2]),o[n][v].thm.assign(p.thm[v+2]))}for(var v=0;v<m;v++){var y=a(12),w=a(12),M=[0,0,0,0],B=h[1&v],E=0,T=3==v?p.nsPsy.attackthre_s:p.nsPsy.attackthre,x=1;if(2==v)for(var g=0,A=576;A>0;++g,--A){var k=h[0][g],P=h[1][g];h[0][g]=k+P,h[1][g]=k-P}for(var g=0;g<3;g++)w[g]=p.nsPsy.last_en_subshort[v][g+6],y[g]=w[g]/p.nsPsy.last_en_subshort[v][g+4],M[0]+=w[g];for(var g=0;g<9;g++){for(var I=E+64,O=1;E<I;E++)O<Math.abs(B[E])&&(O=Math.abs(B[E]));p.nsPsy.last_en_subshort[v][g]=w[g+3]=O,M[1+g/3]+=O,O>w[g+3-2]?O/=w[g+3-2]:O=w[g+3-2]>10*O?w[g+3-2]/(10*O):0,y[g+3]=O}for(var g=0;g<3;++g){var L=w[3*g+3]+w[3*g+4]+w[3*g+5],H=1;6*w[3*g+5]<L&&(H*=.5,6*w[3*g+4]<L&&(H*=.5)),l[v][g]=H}if(t.analysis){for(var N=y[0],g=1;g<12;g++)N<y[g]&&(N=y[g]);p.pinfo.ers[n][v]=p.pinfo.ers_save[v],p.pinfo.ers_save[v]=N}for(var g=0;g<12;g++)0==f[v][g/3]&&y[g]>T&&(f[v][g/3]=g%3+1);for(var g=1;g<4;g++){var V=M[g-1],D=M[g];Math.max(V,D)<4e4&&V<1.7*D&&D<1.7*V&&(1==g&&f[v][0]<=f[v][g]&&(f[v][0]=0),f[v][g]=0)}f[v][0]<=p.nsPsy.lastAttacks[v]&&(f[v][0]=0),3!=p.nsPsy.lastAttacks[v]&&f[v][0]+f[v][1]+f[v][2]+f[v][3]==0||(x=0,0!=f[v][1]&&0!=f[v][0]&&(f[v][1]=0),0!=f[v][2]&&0!=f[v][1]&&(f[v][2]=0),0!=f[v][3]&&0!=f[v][2]&&(f[v][3]=0)),v<2?u[v]=x:0==x&&(u[0]=u[1]=0),_[v]=p.tot_ener[v]}}function T(t,e,r){if(0==r)for(var a=0;a<t.npart_s;a++)t.nb_s2[e][a]=t.nb_s1[e][a],t.nb_s1[e][a]=0}function x(t,e){for(var r=0;r<t.npart_l;r++)t.nb_2[e][r]=t.nb_1[e][r],t.nb_1[e][r]=0}function k(t,e,r,a){var n=ct.length-1,s=0,i=r[s]+r[s+1];if(i>0){var o=e[s];o<e[s+1]&&(o=e[s+1]),i=20*(2*o-i)/(i*(t.numlines_s[s]+t.numlines_s[s+1]-1));var _=0|i;_>n&&(_=n),a[s]=_}else a[s]=0;for(s=1;s<t.npart_s-1;s++)if((i=r[s-1]+r[s]+r[s+1])>0){var o=e[s-1];o<e[s]&&(o=e[s]),o<e[s+1]&&(o=e[s+1]),i=20*(3*o-i)/(i*(t.numlines_s[s-1]+t.numlines_s[s]+t.numlines_s[s+1]-1));var _=0|i;_>n&&(_=n),a[s]=_}else a[s]=0;if((i=r[s-1]+r[s])>0){var o=e[s-1];o<e[s]&&(o=e[s]),i=20*(2*o-i)/(i*(t.numlines_s[s-1]+t.numlines_s[s]-1));var _=0|i;_>n&&(_=n),a[s]=_}else a[s]=0}function P(t,e,r,n,s,i){var o,l,f,u=t.internal_flags,c=new float[H.CBANDS],h=a(H.CBANDS),p=new int[H.CBANDS];for(f=l=0;f<u.npart_s;++f){var b=0,m=0,v=u.numlines_s[f];for(o=0;o<v;++o,++l){var d=e[i][l];b+=d,m<d&&(m=d)}r[f]=b,c[f]=m,h[f]=b/v}for(;f<H.CBANDS;++f)c[f]=0,h[f]=0;for(k(u,c,h,p),l=f=0;f<u.npart_s;f++){var g,S,R,A,y,w=u.s3ind_s[f][0],M=u.s3ind_s[f][1];for(g=p[w],S=1,A=u.s3_ss[l]*r[w]*ct[p[w]],++l,++w;w<=M;)g+=p[w],S+=1,R=u.s3_ss[l]*r[w]*ct[p[w]],A=_(A,R,w-f),++l,++w;g=(1+2*g)/(2*S),y=.5*ct[g],A*=y,n[f]=A,u.nb_s2[s][f]=u.nb_s1[s][f],u.nb_s1[s][f]=A,R=c[f],R*=u.minval_s[f],R*=y,n[f]>R&&(n[f]=R),u.masking_lower>1&&(n[f]*=u.masking_lower),n[f]>r[f]&&(n[f]=r[f]),u.masking_lower<1&&(n[f]*=u.masking_lower)}for(;f<H.CBANDS;++f)r[f]=0,n[f]=0}function I(t,e,n,s,i){var o,l=a(H.CBANDS),f=a(H.CBANDS),u=r(H.CBANDS+2);A(t,e,n,l,f),y(t,l,f,u);var c=0;for(o=0;o<t.npart_l;o++){var h,p,b,m,v=t.s3ind[o][0],d=t.s3ind[o][1],g=0,S=0;for(g=u[v],S+=1,p=t.s3_ll[c]*n[v]*ct[u[v]],++c,++v;v<=d;)g+=u[v],S+=1,h=t.s3_ll[c]*n[v]*ct[u[v]],m=_(p,h,v-o),p=m,++c,++v;if(g=(1+2*g)/(2*S),b=.5*ct[g],p*=b,t.blocktype_old[1&i]==H.SHORT_TYPE){var R=J*t.nb_1[i][o];s[o]=R>0?Math.min(p,R):Math.min(p,n[o]*it)}else{var R,w=et*t.nb_2[i][o],M=J*t.nb_1[i][o];w<=0&&(w=p),M<=0&&(M=p),R=t.blocktype_old[1&i]==H.NORM_TYPE?Math.min(M,w):M,s[o]=Math.min(p,R)}t.nb_2[i][o]=t.nb_1[i][o],t.nb_1[i][o]=p,h=l[o],h*=t.minval_l[o],h*=b,s[o]>h&&(s[o]=h),t.masking_lower>1&&(s[o]*=t.masking_lower),s[o]>n[o]&&(s[o]=n[o]),t.masking_lower<1&&(s[o]*=t.masking_lower)}for(;o<H.CBANDS;++o)n[o]=0,s[o]=0}function O(t,e){var r=t.internal_flags;t.short_blocks!=f.short_block_coupled||0!=e[0]&&0!=e[1]||(e[0]=e[1]=0);for(var a=0;a<r.channels_out;a++)t.short_blocks==f.short_block_dispensed&&(e[a]=1),t.short_blocks==f.short_block_forced&&(e[a]=0)}function L(t,e,r){for(var a=t.internal_flags,n=0;n<a.channels_out;n++){var s=H.NORM_TYPE;0!=e[n]?a.blocktype_old[n]==H.SHORT_TYPE&&(s=H.STOP_TYPE):(s=H.SHORT_TYPE,a.blocktype_old[n]==H.NORM_TYPE&&(a.blocktype_old[n]=H.START_TYPE),a.blocktype_old[n]==H.STOP_TYPE&&(a.blocktype_old[n]=H.SHORT_TYPE)),r[n]=a.blocktype_old[n],a.blocktype_old[n]=s}}function N(t,e,r,a,n,s,i){for(var o,_,l=2*s,f=s>0?Math.pow(10,n):1,u=0;u<i;++u){var c=t[2][u],h=t[3][u],p=e[0][u],b=e[1][u],m=e[2][u],v=e[3][u];if(p<=1.58*b&&b<=1.58*p){var d=r[u]*h,g=r[u]*c;_=Math.max(m,Math.min(v,d)),o=Math.max(v,Math.min(m,g))}else _=m,o=v;if(s>0){var S,R,A=a[u]*f;if(S=Math.min(Math.max(p,A),Math.max(b,A)),m=Math.max(_,A),v=Math.max(o,A),(R=m+v)>0&&S*l<R){var y=S*l/R;m*=y,v*=y}_=Math.min(m,_),o=Math.min(v,o)}_>c&&(_=c),o>h&&(o=h),e[2][u]=_,e[3][u]=o}}function V(t,e){var r,a=t;return r=a>=0?27*-a:a*e,r<=-72?0:Math.exp(r*_t)}function D(t){var e,r,a=0,n=0,s=0;for(s=0;V(s,t)>1e-20;s-=1);for(e=s,r=0;Math.abs(r-e)>1e-12;)s=(r+e)/2,V(s,t)>0?r=s:e=s;a=e;var e,r,s=0;for(s=0;V(s,t)>1e-20;s+=1);for(e=0,r=s;Math.abs(r-e)>1e-12;)s=(r+e)/2,V(s,t)>0?e=s:r=s;n=r;var i,o=0;for(i=0;i<=1e3;++i){var s=a+i*(n-a)/1e3;o+=V(s,t)}return 1001/(o*(n-a))}function Y(t){var e,r,a,n;return e=t,e*=e>=0?3:1.5,e>=.5&&e<=2.5?(n=e-.5,r=8*(n*n-2*n)):r=0,e+=.474,(a=15.811389+7.5*e-17.5*Math.sqrt(1+e*e))<=-60?0:(e=Math.exp((r+a)*_t),e/=.6609193)}function X(t){return t<0&&(t=0),t*=.001,13*Math.atan(.76*t)+3.5*Math.atan(t*t/56.25)}function q(t,e,n,s,i,o,_,l,f,u,c,h){var p,b=a(H.CBANDS+1),m=l/(h>15?1152:384),v=r(H.HBLKSIZE);l/=f;var d=0,g=0;for(p=0;p<H.CBANDS;p++){var S,R;for(S=X(l*d),b[p]=l*d,R=d;X(l*R)-S<nt&&R<=f/2;R++);for(t[p]=R-d,g=p+1;d<R;)v[d++]=p;if(d>f/2){d=f/2,++p;break}}b[p]=l*d;for(var A=0;A<h;A++){var y,w,M,B,E;M=u[A],B=u[A+1],y=0|Math.floor(.5+c*(M-.5)),y<0&&(y=0),w=0|Math.floor(.5+c*(B-.5)),w>f/2&&(w=f/2),n[A]=(v[y]+v[w])/2,e[A]=v[w];var T=m*B;_[A]=(T-b[e[A]])/(b[e[A]+1]-b[e[A]]),_[A]<0?_[A]=0:_[A]>1&&(_[A]=1),E=X(l*u[A]*c),E=Math.min(E,15.5)/15.5,o[A]=Math.pow(10,1.25*(1-Math.cos(Math.PI*E))-2.5)}d=0;for(var x=0;x<g;x++){var S,k,P=t[x];S=X(l*d),k=X(l*(d+P-1)),s[x]=.5*(S+k),S=X(l*(d-.5)),k=X(l*(d+P-.5)),i[x]=k-S,d+=P}return g}function j(t,e,r,n,s,o){var _,l=i([H.CBANDS,H.CBANDS]),f=0;if(o)for(var u=0;u<e;u++)for(_=0;_<e;_++){var c=Y(r[u]-r[_])*n[_];l[u][_]=c*s[u]}else for(_=0;_<e;_++)for(var h=15+Math.min(21/r[_],12),p=D(h),u=0;u<e;u++){var c=p*V(r[u]-r[_],h)*n[_];l[u][_]=c*s[u]}for(var u=0;u<e;u++){for(_=0;_<e&&!(l[u][_]>0);_++);for(t[u][0]=_,_=e-1;_>0&&!(l[u][_]>0);_--);t[u][1]=_,f+=t[u][1]-t[u][0]+1}for(var b=a(f),m=0,u=0;u<e;u++)for(_=t[u][0];_<=t[u][1];_++)b[m++]=l[u][_];return b}function F(t){var e=X(t);return e=Math.min(e,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*e))-2.5)}function U(t,e){return t<-.3&&(t=3410),t/=1e3,t=Math.max(.1,t),3.64*Math.pow(t,-.8)-6.8*Math.exp(-.6*Math.pow(t-3.4,2))+6*Math.exp(-.15*Math.pow(t-8.7,2))+.001*(.6+.04*e)*Math.pow(t,4)}var z,G,K,Z=new C,Q=2.302585092994046,J=2,et=16,rt=2,at=16,nt=.34,st=1/217621504/(H.BLKSIZE/2),it=.3,ot=21,_t=.2302585093,lt=8,ft=23,ut=15,ct=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],ht=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],pt=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],bt=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276],mt=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],vt=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130],dt=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1],gt=[-1.730326e-17,-.01703172,-1.349528e-17,.0418072,-6.73278e-17,-.0876324,-3.0835e-17,.1863476,-1.104424e-16,-.627638];this.L3psycho_anal_ns=function(t,e,s,_,f,w,M,B,E,T){var x,k,P,I,O,L,N,V,D,Y=t.internal_flags,X=i([2,H.BLKSIZE]),C=i([2,3,H.BLKSIZE_s]),q=a(H.CBANDS+1),j=a(H.CBANDS+1),F=a(H.CBANDS+2),U=r(2),z=r(2),G=i([2,576]),K=r(H.CBANDS+2),Z=r(H.CBANDS+2);for(W.fill(Z,0),x=Y.channels_out,t.mode==c.JOINT_STEREO&&(x=4),D=t.VBR==u.vbr_off?0==Y.ResvMax?0:Y.ResvSize/Y.ResvMax*.5:t.VBR==u.vbr_rh||t.VBR==u.vbr_mtrh||t.VBR==u.vbr_mt?.6:1,k=0;k<Y.channels_out;k++){var Q=e[k],$=s+576-350-ot+192;for(I=0;I<576;I++){var tt,rt;for(tt=Q[$+I+10],rt=0,O=0;O<(ot-1)/2-1;O+=2)tt+=gt[O]*(Q[$+I+O]+Q[$+I+ot-O]),rt+=gt[O+1]*(Q[$+I+O+1]+Q[$+I+ot-O-1]);G[k][I]=tt+rt}f[_][k].en.assign(Y.en[k]),f[_][k].thm.assign(Y.thm[k]),x>2&&(w[_][k].en.assign(Y.en[k+2]),w[_][k].thm.assign(Y.thm[k+2]))}for(k=0;k<x;k++){var at,nt,st,_t=a(12),lt=[0,0,0,0],ft=a(12),ut=1,ht=a(H.CBANDS),pt=a(H.CBANDS),bt=[0,0,0,0],mt=a(H.HBLKSIZE),vt=i([3,H.HBLKSIZE_s]);for(I=0;I<3;I++)_t[I]=Y.nsPsy.last_en_subshort[k][I+6],ft[I]=_t[I]/Y.nsPsy.last_en_subshort[k][I+4],lt[0]+=_t[I];if(2==k)for(I=0;I<576;I++){var dt,St;dt=G[0][I],St=G[1][I],G[0][I]=dt+St,G[1][I]=dt-St}var Rt=G[1&k],At=0;for(I=0;I<9;I++){for(var yt=At+64,wt=1;At<yt;At++)wt<Math.abs(Rt[At])&&(wt=Math.abs(Rt[At]));Y.nsPsy.last_en_subshort[k][I]=_t[I+3]=wt,lt[1+I/3]+=wt,wt>_t[I+3-2]?wt/=_t[I+3-2]:wt=_t[I+3-2]>10*wt?_t[I+3-2]/(10*wt):0,ft[I+3]=wt}if(t.analysis){var Mt=ft[0];for(I=1;I<12;I++)Mt<ft[I]&&(Mt=ft[I]);Y.pinfo.ers[_][k]=Y.pinfo.ers_save[k],Y.pinfo.ers_save[k]=Mt}for(st=3==k?Y.nsPsy.attackthre_s:Y.nsPsy.attackthre,I=0;I<12;I++)0==bt[I/3]&&ft[I]>st&&(bt[I/3]=I%3+1);for(I=1;I<4;I++){var Bt;Bt=lt[I-1]>lt[I]?lt[I-1]/lt[I]:lt[I]/lt[I-1],Bt<1.7&&(bt[I]=0,1==I&&(bt[0]=0))}for(0!=bt[0]&&0!=Y.nsPsy.lastAttacks[k]&&(bt[0]=0),3!=Y.nsPsy.lastAttacks[k]&&bt[0]+bt[1]+bt[2]+bt[3]==0||(ut=0,0!=bt[1]&&0!=bt[0]&&(bt[1]=0),0!=bt[2]&&0!=bt[1]&&(bt[2]=0),0!=bt[3]&&0!=bt[2]&&(bt[3]=0)),k<2?z[k]=ut:0==ut&&(z[0]=z[1]=0),E[k]=Y.tot_ener[k],nt=C,at=X,n(t,mt,vt,at,1&k,nt,1&k,_,k,e,s),A(Y,mt,q,ht,pt),y(Y,ht,pt,K),V=0;V<3;V++){var Et,Tt;for(v(t,vt,j,F,k,V),b(Y,j,F,k,V),N=0;N<H.SBMAX_s;N++){if(Tt=Y.thm[k].s[N][V],Tt*=.8,bt[V]>=2||1==bt[V+1]){var xt=0!=V?V-1:2,wt=g(Y.thm[k].s[N][xt],Tt,.6*D);Tt=Math.min(Tt,wt)}if(1==bt[V]){var xt=0!=V?V-1:2,wt=g(Y.thm[k].s[N][xt],Tt,it*D);Tt=Math.min(Tt,wt)}else if(0!=V&&3==bt[V-1]||0==V&&3==Y.nsPsy.lastAttacks[k]){var xt=2!=V?V+1:0,wt=g(Y.thm[k].s[N][xt],Tt,it*D);Tt=Math.min(Tt,wt)}Et=_t[3*V+3]+_t[3*V+4]+_t[3*V+5],6*_t[3*V+5]<Et&&(Tt*=.5,6*_t[3*V+4]<Et&&(Tt*=.5)),Y.thm[k].s[N][V]=Tt}}for(Y.nsPsy.lastAttacks[k]=bt[2],L=0,P=0;P<Y.npart_l;P++){for(var kt=Y.s3ind[P][0],Pt=q[kt]*ct[K[kt]],It=Y.s3_ll[L++]*Pt;++kt<=Y.s3ind[P][1];)Pt=q[kt]*ct[K[kt]],It=o(It,Y.s3_ll[L++]*Pt,kt,kt-P,Y,0);It*=.158489319246111,Y.blocktype_old[1&k]==H.SHORT_TYPE?F[P]=It:F[P]=g(Math.min(It,Math.min(J*Y.nb_1[k][P],et*Y.nb_2[k][P])),It,D),Y.nb_2[k][P]=Y.nb_1[k][P],Y.nb_1[k][P]=It}for(;P<=H.CBANDS;++P)q[P]=0,F[P]=0;m(Y,q,F,k)}if(t.mode!=c.STEREO&&t.mode!=c.JOINT_STEREO||t.interChRatio>0&&l(t,t.interChRatio),t.mode==c.JOINT_STEREO){var Ot;h(Y),Ot=t.msfix,Math.abs(Ot)>0&&p(Y,Ot,t.ATHlower*Y.ATH.adjust)}for(d(t,z,T,U),k=0;k<x;k++){var Lt,Ht,Nt,Vt=0;k>1?(Lt=B,Vt=-2,Ht=H.NORM_TYPE,T[0]!=H.SHORT_TYPE&&T[1]!=H.SHORT_TYPE||(Ht=H.SHORT_TYPE),Nt=w[_][k-2]):(Lt=M,Vt=0,Ht=T[k],Nt=f[_][k]),Ht==H.SHORT_TYPE?Lt[Vt+k]=S(Nt,Y.masking_lower):Lt[Vt+k]=R(Nt,Y.masking_lower),t.analysis&&(Y.pinfo.pe[_][k]=Lt[Vt+k])}return 0};var St=[-1.730326e-17,-.01703172,-1.349528e-17,.0418072,-6.73278e-17,-.0876324,-3.0835e-17,.1863476,-1.104424e-16,-.627638];this.L3psycho_anal_vbr=function(t,e,n,s,o,_,l,f,u,h){var p,v,d=t.internal_flags,A=a(H.HBLKSIZE),y=i([3,H.HBLKSIZE_s]),k=i([2,H.BLKSIZE]),V=i([2,3,H.BLKSIZE_s]),D=i([4,H.CBANDS]),Y=i([4,H.CBANDS]),X=i([4,3]),C=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],q=r(2),j=t.mode==c.JOINT_STEREO?4:d.channels_out;E(t,e,n,s,o,_,u,X,C,q),O(t,q);for(var F=0;F<j;F++){var U=1&F;p=k,w(t,e,n,F,s,A,p,U),B(t,s,F,A),0!=q[U]?I(d,A,D[F],Y[F],F):x(d,F)}q[0]+q[1]==2&&t.mode==c.JOINT_STEREO&&N(D,Y,d.mld_cb_l,d.ATH.cb_l,t.ATHlower*d.ATH.adjust,t.msfix,d.npart_l);for(var F=0;F<j;F++){var U=1&F;0!=q[U]&&m(d,D[F],Y[F],F)}for(var z=0;z<3;z++){for(var F=0;F<j;++F){var U=1&F;0!=q[U]?T(d,F,z):(v=V,M(t,e,n,F,z,y,v,U),P(t,y,D[F],Y[F],F,z))}q[0]+q[1]==0&&t.mode==c.JOINT_STEREO&&N(D,Y,d.mld_cb_s,d.ATH.cb_s,t.ATHlower*d.ATH.adjust,t.msfix,d.npart_s);for(var F=0;F<j;++F){var U=1&F;0==q[U]&&b(d,D[F],Y[F],F,z)}}for(var F=0;F<j;F++){var U=1&F;if(0==q[U])for(var G=0;G<H.SBMAX_s;G++){for(var K=a(3),z=0;z<3;z++){var Z=d.thm[F].s[G][z];if(Z*=.8,C[F][z]>=2||1==C[F][z+1]){var Q=0!=z?z-1:2,W=g(d.thm[F].s[G][Q],Z,.36);Z=Math.min(Z,W)}else if(1==C[F][z]){var Q=0!=z?z-1:2,W=g(d.thm[F].s[G][Q],Z,.6*it);Z=Math.min(Z,W)}else if(0!=z&&3==C[F][z-1]||0==z&&3==d.nsPsy.lastAttacks[F]){var Q=2!=z?z+1:0,W=g(d.thm[F].s[G][Q],Z,.6*it);Z=Math.min(Z,W)}Z*=X[F][z],K[z]=Z}for(var z=0;z<3;z++)d.thm[F].s[G][z]=K[z]}}for(var F=0;F<j;F++)d.nsPsy.lastAttacks[F]=C[F][2];L(t,q,h);for(var F=0;F<j;F++){var J,$,tt,et;F>1?(J=f,$=-2,tt=H.NORM_TYPE,h[0]!=H.SHORT_TYPE&&h[1]!=H.SHORT_TYPE||(tt=H.SHORT_TYPE),et=_[s][F-2]):(J=l,$=0,tt=h[F],et=o[s][F]),tt==H.SHORT_TYPE?J[$+F]=S(et,d.masking_lower):J[$+F]=R(et,d.masking_lower),t.analysis&&(d.pinfo.pe[s][F]=J[$+F])}return 0},this.psymodel_init=function(t){var e,r=t.internal_flags,n=!0,i=13,o=0,_=0,l=-8.25,f=-4.5,c=a(H.CBANDS),h=a(H.CBANDS),p=a(H.CBANDS),b=t.out_samplerate;switch(t.experimentalZ){default:case 0:n=!0;break;case 1:n=t.VBR!=u.vbr_mtrh&&t.VBR!=u.vbr_mt;break;case 2:n=!1;break;case 3:i=8,o=-1.75,_=-.0125,l=-8.25,f=-2.25}for(r.ms_ener_ratio_old=.25,r.blocktype_old[0]=r.blocktype_old[1]=H.NORM_TYPE,e=0;e<4;++e){for(var m=0;m<H.CBANDS;++m)r.nb_1[e][m]=1e20,r.nb_2[e][m]=1e20,r.nb_s1[e][m]=r.nb_s2[e][m]=1;for(var v=0;v<H.SBMAX_l;v++)r.en[e].l[v]=1e20,r.thm[e].l[v]=1e20;for(var m=0;m<3;++m){for(var v=0;v<H.SBMAX_s;v++)r.en[e].s[v][m]=1e20,r.thm[e].s[v][m]=1e20;r.nsPsy.lastAttacks[e]=0}for(var m=0;m<9;m++)r.nsPsy.last_en_subshort[e][m]=10}for(r.loudness_sq_save[0]=r.loudness_sq_save[1]=0,r.npart_l=q(r.numlines_l,r.bo_l,r.bm_l,c,h,r.mld_l,r.PSY.bo_l_weight,b,H.BLKSIZE,r.scalefac_band.l,H.BLKSIZE/1152,H.SBMAX_l),e=0;e<r.npart_l;e++){var d=o;c[e]>=i&&(d=_*(c[e]-i)/(24-i)+o*(24-c[e])/(24-i)),p[e]=Math.pow(10,d/10),r.numlines_l[e]>0?r.rnumlines_l[e]=1/r.numlines_l[e]:r.rnumlines_l[e]=0}r.s3_ll=j(r.s3ind,r.npart_l,c,h,p,n);var m=0;for(e=0;e<r.npart_l;e++){var g;g=tt.MAX_VALUE;for(var S=0;S<r.numlines_l[e];S++,m++){var R,A=b*m/(1e3*H.BLKSIZE);R=this.ATHformula(1e3*A,t)-20,R=Math.pow(10,.1*R),R*=r.numlines_l[e],g>R&&(g=R)}r.ATH.cb_l[e]=g,g=-20+20*c[e]/10,g>6&&(g=100),g<-15&&(g=-15),g-=8,r.minval_l[e]=Math.pow(10,g/10)*r.numlines_l[e]}for(r.npart_s=q(r.numlines_s,r.bo_s,r.bm_s,c,h,r.mld_s,r.PSY.bo_s_weight,b,H.BLKSIZE_s,r.scalefac_band.s,H.BLKSIZE_s/384,H.SBMAX_s),m=0,e=0;e<r.npart_s;e++){var g,d=l;c[e]>=i&&(d=f*(c[e]-i)/(24-i)+l*(24-c[e])/(24-i)),p[e]=Math.pow(10,d/10),g=tt.MAX_VALUE;for(var S=0;S<r.numlines_s[e];S++,m++){var R,A=b*m/(1e3*H.BLKSIZE_s);R=this.ATHformula(1e3*A,t)-20,R=Math.pow(10,.1*R),R*=r.numlines_s[e],g>R&&(g=R)}r.ATH.cb_s[e]=g,g=-7+7*c[e]/12,c[e]>12&&(g*=1+3.1*Math.log(1+g)),c[e]<12&&(g*=1+2.3*Math.log(1-g)),g<-15&&(g=-15),g-=8,r.minval_s[e]=Math.pow(10,g/10)*r.numlines_s[e]}r.s3_ss=j(r.s3ind_s,r.npart_s,c,h,p,n),s(),Z.init_fft(r),r.decay=Math.exp(-1*Q/(.01*b/192));var y;y=3.5,0!=(2&t.exp_nspsytune)&&(y=1),Math.abs(t.msfix)>0&&(y=t.msfix),t.msfix=y;for(var w=0;w<r.npart_l;w++)r.s3ind[w][1]>r.npart_l-1&&(r.s3ind[w][1]=r.npart_l-1);var M=576*r.mode_gr/b;if(r.ATH.decay=Math.pow(10,-1.2*M),r.ATH.adjust=.01,r.ATH.adjustLimit=1,t.ATHtype!=-1){var A,B=t.out_samplerate/H.BLKSIZE,E=0;for(A=0,e=0;e<H.BLKSIZE/2;++e)A+=B,r.ATH.eql_w[e]=1/Math.pow(10,this.ATHformula(A,t)/10),E+=r.ATH.eql_w[e];for(E=1/E,e=H.BLKSIZE/2;--e>=0;)r.ATH.eql_w[e]*=E}for(var w=m=0;w<r.npart_s;++w)for(e=0;e<r.numlines_s[w];++e)++m;for(var w=m=0;w<r.npart_l;++w)for(e=0;e<r.numlines_l[w];++e)++m;for(m=0,e=0;e<r.npart_l;e++){var A=b*(m+r.numlines_l[e]/2)/(1*H.BLKSIZE)
;r.mld_cb_l[e]=F(A),m+=r.numlines_l[e]}for(;e<H.CBANDS;++e)r.mld_cb_l[e]=1;for(m=0,e=0;e<r.npart_s;e++){var A=b*(m+r.numlines_s[e]/2)/(1*H.BLKSIZE_s);r.mld_cb_s[e]=F(A),m+=r.numlines_s[e]}for(;e<H.CBANDS;++e)r.mld_cb_s[e]=1;return 0},this.ATHformula=function(t,e){var r;switch(e.ATHtype){case 0:r=U(t,9);break;case 1:r=U(t,-1);break;case 2:r=U(t,0);break;case 3:r=U(t,1)+6;break;case 4:r=U(t,e.ATHcurve);break;default:r=U(t,0)}return r}}function j(){function t(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=a(H.SBMAX_l),this.bo_s_weight=a(H.SBMAX_s)}function e(){this.lowerlimit=0}function r(t,e){this.lowpass=e}function n(t){var e;return t.class_id=Q,e=t.internal_flags=new X,t.mode=c.NOT_SET,t.original=1,t.in_samplerate=44100,t.num_channels=2,t.num_samples=-1,t.bWriteVbrTag=!0,t.quality=-1,t.short_blocks=null,e.subblock_gain=-1,t.lowpassfreq=0,t.highpassfreq=0,t.lowpasswidth=-1,t.highpasswidth=-1,t.VBR=u.vbr_off,t.VBR_q=4,t.ATHcurve=-1,t.VBR_mean_bitrate_kbps=128,t.VBR_min_bitrate_kbps=0,t.VBR_max_bitrate_kbps=0,t.VBR_hard_min=0,e.VBR_min_bitrate=1,e.VBR_max_bitrate=13,t.quant_comp=-1,t.quant_comp_short=-1,t.msfix=-1,e.resample_ratio=1,e.OldValue[0]=180,e.OldValue[1]=180,e.CurrentStep[0]=4,e.CurrentStep[1]=4,e.masking_lower=1,e.nsPsy.attackthre=-1,e.nsPsy.attackthre_s=-1,t.scale=-1,t.athaa_type=-1,t.ATHtype=-1,t.athaa_loudapprox=-1,t.athaa_sensitivity=0,t.useTemporal=null,t.interChRatio=-1,e.mf_samples_to_encode=H.ENCDELAY+H.POSTDELAY,t.encoder_padding=0,e.mf_size=H.ENCDELAY-H.MDCTDELAY,t.findReplayGain=!1,t.decode_on_the_fly=!1,e.decode_on_the_fly=!1,e.findReplayGain=!1,e.findPeakSample=!1,e.RadioGain=0,e.AudiophileGain=0,e.noclipGainChange=0,e.noclipScale=-1,t.preset=0,t.write_id3tag_automatic=!0,0}function s(t){return t>1?0:t<=0?1:Math.cos(Math.PI/2*t)}function i(t,e){var r=44100;return e>=48e3?r=48e3:e>=44100?r=44100:e>=32e3?r=32e3:e>=24e3?r=24e3:e>=22050?r=22050:e>=16e3?r=16e3:e>=12e3?r=12e3:e>=11025?r=11025:e>=8e3&&(r=8e3),t==-1?r:(t<=15960&&(r=44100),t<=15250&&(r=32e3),t<=11220&&(r=24e3),t<=9970&&(r=22050),t<=7230&&(r=16e3),t<=5420&&(r=12e3),t<=4510&&(r=11025),t<=3970&&(r=8e3),e<r?e>44100?48e3:e>32e3?44100:e>24e3?32e3:e>22050?24e3:e>16e3?22050:e>12e3?16e3:e>11025?12e3:e>8e3?11025:8e3:r)}function l(t,e){switch(t){case 44100:return e.version=1,0;case 48e3:return e.version=1,1;case 32e3:return e.version=1,2;case 22050:return e.version=0,0;case 24e3:return e.version=0,1;case 16e3:return e.version=0,2;case 11025:return e.version=0,0;case 12e3:return e.version=0,1;case 8e3:return e.version=0,2;default:return e.version=0,-1}}function h(t,e,r){r<16e3&&(e=2);for(var a=et.bitrate_table[e][1],n=2;n<=14;n++)et.bitrate_table[e][n]>0&&Math.abs(et.bitrate_table[e][n]-t)<Math.abs(a-t)&&(a=et.bitrate_table[e][n]);return a}function p(t,e,r){r<16e3&&(e=2);for(var a=0;a<=14;a++)if(et.bitrate_table[e][a]>0&&et.bitrate_table[e][a]==t)return a;return-1}function m(t,e){var a=[new r(8,2e3),new r(16,3700),new r(24,3900),new r(32,5500),new r(40,7e3),new r(48,7500),new r(56,1e4),new r(64,11e3),new r(80,13500),new r(96,15100),new r(112,15600),new r(128,17e3),new r(160,17500),new r(192,18600),new r(224,19400),new r(256,19700),new r(320,20500)],n=N.nearestBitrateFullIndex(e);t.lowerlimit=a[n].lowpass}function v(t){var e=t.internal_flags,r=32,a=-1;if(e.lowpass1>0){for(var n=999,i=0;i<=31;i++){var o=i/31;o>=e.lowpass2&&(r=Math.min(r,i)),e.lowpass1<o&&o<e.lowpass2&&(n=Math.min(n,i))}e.lowpass1=999==n?(r-.75)/31:(n-.75)/31,e.lowpass2=r/31}if(e.highpass2>0&&e.highpass2<.75/31*.9&&(e.highpass1=0,e.highpass2=0,J.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),e.highpass2>0){for(var _=-1,i=0;i<=31;i++){var o=i/31;o<=e.highpass1&&(a=Math.max(a,i)),e.highpass1<o&&o<e.highpass2&&(_=Math.max(_,i))}e.highpass1=a/31,e.highpass2=_==-1?(a+.75)/31:(_+.75)/31}for(var i=0;i<32;i++){var l,f,o=i/31;l=e.highpass2>e.highpass1?s((e.highpass2-o)/(e.highpass2-e.highpass1+1e-20)):1,f=e.lowpass2>e.lowpass1?s((o-e.lowpass1)/(e.lowpass2-e.lowpass1+1e-20)):1,e.amp_filter[i]=l*f}}function g(t){var e=t.internal_flags;switch(t.quality){default:case 9:e.psymodel=0,e.noise_shaping=0,e.noise_shaping_amp=0,e.noise_shaping_stop=0,e.use_best_huffman=0,e.full_outer_loop=0;break;case 8:t.quality=7;case 7:e.psymodel=1,e.noise_shaping=0,e.noise_shaping_amp=0,e.noise_shaping_stop=0,e.use_best_huffman=0,e.full_outer_loop=0;break;case 6:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),e.noise_shaping_amp=0,e.noise_shaping_stop=0,e.subblock_gain==-1&&(e.subblock_gain=1),e.use_best_huffman=0,e.full_outer_loop=0;break;case 5:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),e.noise_shaping_amp=0,e.noise_shaping_stop=0,e.subblock_gain==-1&&(e.subblock_gain=1),e.use_best_huffman=0,e.full_outer_loop=0;break;case 4:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),e.noise_shaping_amp=0,e.noise_shaping_stop=0,e.subblock_gain==-1&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0;break;case 3:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),e.noise_shaping_amp=1,e.noise_shaping_stop=1,e.subblock_gain==-1&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0;break;case 2:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),0==e.substep_shaping&&(e.substep_shaping=2),e.noise_shaping_amp=1,e.noise_shaping_stop=1,e.subblock_gain==-1&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0;break;case 1:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),0==e.substep_shaping&&(e.substep_shaping=2),e.noise_shaping_amp=2,e.noise_shaping_stop=1,e.subblock_gain==-1&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0;break;case 0:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),0==e.substep_shaping&&(e.substep_shaping=2),e.noise_shaping_amp=2,e.noise_shaping_stop=1,e.subblock_gain==-1&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0}}function S(t){var e=t.internal_flags;t.frameNum=0,t.write_id3tag_automatic&&G.id3tag_write_v2(t),e.bitrate_stereoMode_Hist=o([16,5]),e.bitrate_blockType_Hist=o([16,6]),e.PeakSample=0,t.bWriteVbrTag&&U.InitVbrTag(t)}function R(t,e){(null==t.in_buffer_0||t.in_buffer_nsamples<e)&&(t.in_buffer_0=a(e),t.in_buffer_1=a(e),t.in_buffer_nsamples=e)}function A(t){var e=H.BLKSIZE+t.framesize-H.FFTOFFSET;return e=Math.max(e,512+t.framesize-32)}function y(t,e,r,a,n,s,i){var o,_,l,f,u,c=t.internal_flags,h=0,p=[null,null],m=[null,null];if(c.Class_ID!=Q)return-3;if(0==a)return 0;if((u=D.copy_buffer(c,n,s,i,0))<0)return u;if(s+=u,h+=u,m[0]=e,m[1]=r,d.NEQ(t.scale,0)&&d.NEQ(t.scale,1))for(_=0;_<a;++_)m[0][_]*=t.scale,2==c.channels_out&&(m[1][_]*=t.scale);if(d.NEQ(t.scale_left,0)&&d.NEQ(t.scale_left,1))for(_=0;_<a;++_)m[0][_]*=t.scale_left;if(d.NEQ(t.scale_right,0)&&d.NEQ(t.scale_right,1))for(_=0;_<a;++_)m[1][_]*=t.scale_right;if(2==t.num_channels&&1==c.channels_out)for(_=0;_<a;++_)m[0][_]=.5*(m[0][_]+m[1][_]),m[1][_]=0;f=A(t),p[0]=c.mfbuf[0],p[1]=c.mfbuf[1];for(var v=0;a>0;){var g=[null,null],S=0,R=0;g[0]=m[0],g[1]=m[1];var y=new x;if(L(t,p,g,v,a,y),S=y.n_in,R=y.n_out,c.findReplayGain&&!c.decode_on_the_fly&&V.AnalyzeSamples(c.rgdata,p[0],c.mf_size,p[1],c.mf_size,R,c.channels_out)==b.GAIN_ANALYSIS_ERROR)return-6;if(a-=S,v+=S,c.channels_out,c.mf_size+=R,c.mf_samples_to_encode<1&&(c.mf_samples_to_encode=H.ENCDELAY+H.POSTDELAY),c.mf_samples_to_encode+=R,c.mf_size>=f){var w=i-h;if(0==i&&(w=0),(o=T(t,p[0],p[1],n,s,w))<0)return o;for(s+=o,h+=o,c.mf_size-=t.framesize,c.mf_samples_to_encode-=t.framesize,l=0;l<c.channels_out;l++)for(_=0;_<c.mf_size;_++)p[l][_]=p[l][_+t.framesize]}}return h}function T(t,e,r,a,n,s){var i=N.enc.lame_encode_mp3_frame(t,e,r,a,n,s);return t.frameNum++,i}function x(){this.n_in=0,this.n_out=0}function k(){this.num_used=0}function P(t,e){return 0!=e?P(e,t%e):t}function I(t,e,r){var a=Math.PI*e;t/=r,t<0&&(t=0),t>1&&(t=1);var n=t-.5,s=.42-.5*Math.cos(2*t*Math.PI)+.08*Math.cos(4*t*Math.PI);return Math.abs(n)<1e-9?a/Math.PI:s*Math.sin(r*a*n)/(Math.PI*r*n)}function O(t,e,r,n,s,i,o,_,l){var f,u,c=t.internal_flags,h=0,p=t.out_samplerate/P(t.out_samplerate,t.in_samplerate);p>X.BPC&&(p=X.BPC);var b=Math.abs(c.resample_ratio-Math.floor(.5+c.resample_ratio))<1e-4?1:0,m=1/c.resample_ratio;m>1&&(m=1);var v=31;0==v%2&&--v,v+=b;var d=v+1;if(0==c.fill_buffer_resample_init){for(c.inbuf_old[0]=a(d),c.inbuf_old[1]=a(d),f=0;f<=2*p;++f)c.blackfilt[f]=a(d);for(c.itime[0]=0,c.itime[1]=0,h=0;h<=2*p;h++){var g=0,S=(h-p)/(2*p);for(f=0;f<=v;f++)g+=c.blackfilt[h][f]=I(f-S,m,v);for(f=0;f<=v;f++)c.blackfilt[h][f]/=g}c.fill_buffer_resample_init=1}var R=c.inbuf_old[l];for(u=0;u<n;u++){var A,y;if(A=u*c.resample_ratio,h=0|Math.floor(A-c.itime[l]),v+h-v/2>=o)break;var S=A-c.itime[l]-(h+v%2*.5);y=0|Math.floor(2*S*p+p+.5);var w=0;for(f=0;f<=v;++f){var M,B=f+h-v/2;M=B<0?R[d+B]:s[i+B],w+=M*c.blackfilt[y][f]}e[r+u]=w}if(_.num_used=Math.min(o,v+h-v/2),c.itime[l]+=_.num_used-u*c.resample_ratio,_.num_used>=d)for(f=0;f<d;f++)R[f]=s[i+_.num_used+f-d];else{var E=d-_.num_used;for(f=0;f<E;++f)R[f]=R[f+_.num_used];for(h=0;f<d;++f,++h)R[f]=s[i+h]}return u}function L(t,e,r,a,n,s){var i=t.internal_flags;if(i.resample_ratio<.9999||i.resample_ratio>1.0001)for(var o=0;o<i.channels_out;o++){var _=new k;s.n_out=O(t,e[o],i.mf_size,t.framesize,r[o],a,n,_,o),s.n_in=_.num_used}else{s.n_out=Math.min(t.framesize,n),s.n_in=s.n_out;for(var l=0;l<s.n_out;++l)e[0][i.mf_size+l]=r[0][a+l],2==i.channels_out&&(e[1][i.mf_size+l]=r[1][a+l])}}var N=this;j.V9=410,j.V8=420,j.V7=430,j.V6=440,j.V5=450,j.V4=460,j.V3=470,j.V2=480,j.V1=490,j.V0=500,j.R3MIX=1e3,j.STANDARD=1001,j.EXTREME=1002,j.INSANE=1003,j.STANDARD_FAST=1004,j.EXTREME_FAST=1005,j.MEDIUM=1006,j.MEDIUM_FAST=1007;j.LAME_MAXMP3BUFFER=147456;var V,D,Y,C,F,U,z,G,K,Z=new q;this.enc=new H,this.setModules=function(t,e,r,a,n,s,i,o,_){V=t,D=e,Y=r,C=a,F=n,U=s,z=i,G=o,K=_,this.enc.setModules(D,Z,C,U)};var Q=4294479419;this.lame_init=function(){var t=new w;return 0!=n(t)?null:(t.lame_allocated_gfp=1,t)},this.nearestBitrateFullIndex=function(t){var e=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],r=0,a=0,n=0,s=0;s=e[16],n=16,a=e[16],r=16;for(var i=0;i<16;i++)if(Math.max(t,e[i+1])!=t){s=e[i+1],n=i+1,a=e[i],r=i;break}return s-t>t-a?r:n},this.lame_init_params=function(r){var a=r.internal_flags;if(a.Class_ID=0,null==a.ATH&&(a.ATH=new M),null==a.PSY&&(a.PSY=new t),null==a.rgdata&&(a.rgdata=new B),a.channels_in=r.num_channels,1==a.channels_in&&(r.mode=c.MONO),a.channels_out=r.mode==c.MONO?1:2,a.mode_ext=H.MPG_MD_MS_LR,r.mode==c.MONO&&(r.force_ms=!1),r.VBR==u.vbr_off&&128!=r.VBR_mean_bitrate_kbps&&0==r.brate&&(r.brate=r.VBR_mean_bitrate_kbps),r.VBR==u.vbr_off||r.VBR==u.vbr_mtrh||r.VBR==u.vbr_mt||(r.free_format=!1),r.VBR==u.vbr_off&&0==r.brate&&d.EQ(r.compression_ratio,0)&&(r.compression_ratio=11.025),r.VBR==u.vbr_off&&r.compression_ratio>0&&(0==r.out_samplerate&&(r.out_samplerate=map2MP3Frequency(int(.97*r.in_samplerate))),r.brate=0|16*r.out_samplerate*a.channels_out/(1e3*r.compression_ratio),a.samplerate_index=l(r.out_samplerate,r),r.free_format||(r.brate=h(r.brate,r.version,r.out_samplerate))),0!=r.out_samplerate&&(r.out_samplerate<16e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,64)):r.out_samplerate<32e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,160)):(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,32),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,320))),0==r.lowpassfreq){var n=16e3;switch(r.VBR){case u.vbr_off:var s=new e;m(s,r.brate),n=s.lowerlimit;break;case u.vbr_abr:var s=new e;m(s,r.VBR_mean_bitrate_kbps),n=s.lowerlimit;break;case u.vbr_rh:var o=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var _=o[r.VBR_q],R=o[r.VBR_q+1],A=r.VBR_q_frac;n=linear_int(_,R,A)}else n=19500;break;default:var o=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var _=o[r.VBR_q],R=o[r.VBR_q+1],A=r.VBR_q_frac;n=linear_int(_,R,A)}else n=19500}r.mode!=c.MONO||r.VBR!=u.vbr_off&&r.VBR!=u.vbr_abr||(n*=1.5),r.lowpassfreq=0|n}if(0==r.out_samplerate&&(2*r.lowpassfreq>r.in_samplerate&&(r.lowpassfreq=r.in_samplerate/2),r.out_samplerate=i(0|r.lowpassfreq,r.in_samplerate)),r.lowpassfreq=Math.min(20500,r.lowpassfreq),r.lowpassfreq=Math.min(r.out_samplerate/2,r.lowpassfreq),r.VBR==u.vbr_off&&(r.compression_ratio=16*r.out_samplerate*a.channels_out/(1e3*r.brate)),r.VBR==u.vbr_abr&&(r.compression_ratio=16*r.out_samplerate*a.channels_out/(1e3*r.VBR_mean_bitrate_kbps)),r.bWriteVbrTag||(r.findReplayGain=!1,r.decode_on_the_fly=!1,a.findPeakSample=!1),a.findReplayGain=r.findReplayGain,a.decode_on_the_fly=r.decode_on_the_fly,a.decode_on_the_fly&&(a.findPeakSample=!0),a.findReplayGain&&V.InitGainAnalysis(a.rgdata,r.out_samplerate)==b.INIT_GAIN_ANALYSIS_ERROR)return r.internal_flags=null,-6;switch(a.decode_on_the_fly&&!r.decode_only&&(null!=a.hip&&K.hip_decode_exit(a.hip),a.hip=K.hip_decode_init()),a.mode_gr=r.out_samplerate<=24e3?1:2,r.framesize=576*a.mode_gr,r.encoder_delay=H.ENCDELAY,a.resample_ratio=r.in_samplerate/r.out_samplerate,r.VBR){case u.vbr_mt:case u.vbr_rh:case u.vbr_mtrh:var y=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];r.compression_ratio=y[r.VBR_q];break;case u.vbr_abr:r.compression_ratio=16*r.out_samplerate*a.channels_out/(1e3*r.VBR_mean_bitrate_kbps);break;default:r.compression_ratio=16*r.out_samplerate*a.channels_out/(1e3*r.brate)}if(r.mode==c.NOT_SET&&(r.mode=c.JOINT_STEREO),r.highpassfreq>0?(a.highpass1=2*r.highpassfreq,r.highpasswidth>=0?a.highpass2=2*(r.highpassfreq+r.highpasswidth):a.highpass2=2*r.highpassfreq,a.highpass1/=r.out_samplerate,a.highpass2/=r.out_samplerate):(a.highpass1=0,a.highpass2=0),r.lowpassfreq>0?(a.lowpass2=2*r.lowpassfreq,r.lowpasswidth>=0?(a.lowpass1=2*(r.lowpassfreq-r.lowpasswidth),a.lowpass1<0&&(a.lowpass1=0)):a.lowpass1=2*r.lowpassfreq,a.lowpass1/=r.out_samplerate,a.lowpass2/=r.out_samplerate):(a.lowpass1=0,a.lowpass2=0),v(r),a.samplerate_index=l(r.out_samplerate,r),a.samplerate_index<0)return r.internal_flags=null,-1;if(r.VBR==u.vbr_off){if(r.free_format)a.bitrate_index=0;else if(r.brate=h(r.brate,r.version,r.out_samplerate),a.bitrate_index=p(r.brate,r.version,r.out_samplerate),a.bitrate_index<=0)return r.internal_flags=null,-1}else a.bitrate_index=1;r.analysis&&(r.bWriteVbrTag=!1),null!=a.pinfo&&(r.bWriteVbrTag=!1),D.init_bit_stream_w(a);for(var w=a.samplerate_index+3*r.version+6*(r.out_samplerate<16e3?1:0),T=0;T<H.SBMAX_l+1;T++)a.scalefac_band.l[T]=C.sfBandIndex[w].l[T];for(var T=0;T<H.PSFB21+1;T++){var x=(a.scalefac_band.l[22]-a.scalefac_band.l[21])/H.PSFB21,k=a.scalefac_band.l[21]+T*x;a.scalefac_band.psfb21[T]=k}a.scalefac_band.psfb21[H.PSFB21]=576;for(var T=0;T<H.SBMAX_s+1;T++)a.scalefac_band.s[T]=C.sfBandIndex[w].s[T];for(var T=0;T<H.PSFB12+1;T++){var x=(a.scalefac_band.s[13]-a.scalefac_band.s[12])/H.PSFB12,k=a.scalefac_band.s[12]+T*x;a.scalefac_band.psfb12[T]=k}a.scalefac_band.psfb12[H.PSFB12]=192,1==r.version?a.sideinfo_len=1==a.channels_out?21:36:a.sideinfo_len=1==a.channels_out?13:21,r.error_protection&&(a.sideinfo_len+=2),S(r),a.Class_ID=Q;var P;for(P=0;P<19;P++)a.nsPsy.pefirbuf[P]=700*a.mode_gr*a.channels_out;switch(r.ATHtype==-1&&(r.ATHtype=4),r.VBR){case u.vbr_mt:r.VBR=u.vbr_mtrh;case u.vbr_mtrh:null==r.useTemporal&&(r.useTemporal=!1),Y.apply_preset(r,500-10*r.VBR_q,0),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),r.quality<5&&(r.quality=0),r.quality>5&&(r.quality=5),a.PSY.mask_adjust=r.maskingadjust,a.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?a.sfb21_extra=!1:a.sfb21_extra=r.out_samplerate>44e3,a.iteration_loop=new VBRNewIterationLoop(F);break;case u.vbr_rh:Y.apply_preset(r,500-10*r.VBR_q,0),a.PSY.mask_adjust=r.maskingadjust,a.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?a.sfb21_extra=!1:a.sfb21_extra=r.out_samplerate>44e3,r.quality>6&&(r.quality=6),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),a.iteration_loop=new VBROldIterationLoop(F);break;default:var I;a.sfb21_extra=!1,r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),I=r.VBR,I==u.vbr_off&&(r.VBR_mean_bitrate_kbps=r.brate),Y.apply_preset(r,r.VBR_mean_bitrate_kbps,0),r.VBR=I,a.PSY.mask_adjust=r.maskingadjust,a.PSY.mask_adjust_short=r.maskingadjust_short,I==u.vbr_off?a.iteration_loop=new E(F):a.iteration_loop=new ABRIterationLoop(F)}if(r.VBR!=u.vbr_off){if(a.VBR_min_bitrate=1,a.VBR_max_bitrate=14,r.out_samplerate<16e3&&(a.VBR_max_bitrate=8),0!=r.VBR_min_bitrate_kbps&&(r.VBR_min_bitrate_kbps=h(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),a.VBR_min_bitrate=p(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),a.VBR_min_bitrate<0))return-1;if(0!=r.VBR_max_bitrate_kbps&&(r.VBR_max_bitrate_kbps=h(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),a.VBR_max_bitrate=p(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),a.VBR_max_bitrate<0))return-1;r.VBR_min_bitrate_kbps=et.bitrate_table[r.version][a.VBR_min_bitrate],r.VBR_max_bitrate_kbps=et.bitrate_table[r.version][a.VBR_max_bitrate],r.VBR_mean_bitrate_kbps=Math.min(et.bitrate_table[r.version][a.VBR_max_bitrate],r.VBR_mean_bitrate_kbps),r.VBR_mean_bitrate_kbps=Math.max(et.bitrate_table[r.version][a.VBR_min_bitrate],r.VBR_mean_bitrate_kbps)}return r.tune&&(a.PSY.mask_adjust+=r.tune_value_a,a.PSY.mask_adjust_short+=r.tune_value_a),g(r),r.athaa_type<0?a.ATH.useAdjust=3:a.ATH.useAdjust=r.athaa_type,a.ATH.aaSensitivityP=Math.pow(10,r.athaa_sensitivity/-10),null==r.short_blocks&&(r.short_blocks=f.short_block_allowed),r.short_blocks!=f.short_block_allowed||r.mode!=c.JOINT_STEREO&&r.mode!=c.STEREO||(r.short_blocks=f.short_block_coupled),r.quant_comp<0&&(r.quant_comp=1),r.quant_comp_short<0&&(r.quant_comp_short=0),r.msfix<0&&(r.msfix=0),r.exp_nspsytune=1|r.exp_nspsytune,r.internal_flags.nsPsy.attackthre<0&&(r.internal_flags.nsPsy.attackthre=q.NSATTACKTHRE),r.internal_flags.nsPsy.attackthre_s<0&&(r.internal_flags.nsPsy.attackthre_s=q.NSATTACKTHRE_S),r.scale<0&&(r.scale=1),r.ATHtype<0&&(r.ATHtype=4),r.ATHcurve<0&&(r.ATHcurve=4),r.athaa_loudapprox<0&&(r.athaa_loudapprox=2),r.interChRatio<0&&(r.interChRatio=0),null==r.useTemporal&&(r.useTemporal=!0),a.slot_lag=a.frac_SpF=0,r.VBR==u.vbr_off&&(a.slot_lag=a.frac_SpF=72e3*(r.version+1)*r.brate%r.out_samplerate|0),C.iteration_init(r),Z.psymodel_init(r),0},this.lame_encode_flush=function(t,e,r,a){var n,s,i,o,l=t.internal_flags,f=_([2,1152]),u=0,c=l.mf_samples_to_encode-H.POSTDELAY,h=A(t);if(l.mf_samples_to_encode<1)return 0;for(n=0,t.in_samplerate!=t.out_samplerate&&(c+=16*t.out_samplerate/t.in_samplerate),i=t.framesize-c%t.framesize,i<576&&(i+=t.framesize),t.encoder_padding=i,o=(c+i)/t.framesize;o>0&&u>=0;){var p=h-l.mf_size,b=t.frameNum;p*=t.in_samplerate,p/=t.out_samplerate,p>1152&&(p=1152),p<1&&(p=1),s=a-n,0==a&&(s=0),u=this.lame_encode_buffer(t,f[0],f[1],p,e,r,s),r+=u,n+=u,o-=b!=t.frameNum?1:0}if(l.mf_samples_to_encode=0,u<0)return u;if(s=a-n,0==a&&(s=0),D.flush_bitstream(t),(u=D.copy_buffer(l,e,r,s,1))<0)return u;if(r+=u,n+=u,s=a-n,0==a&&(s=0),t.write_id3tag_automatic){if(G.id3tag_write_v1(t),(u=D.copy_buffer(l,e,r,s,0))<0)return u;n+=u}return n},this.lame_encode_buffer=function(t,e,r,a,n,s,i){var o=t.internal_flags,_=[null,null];if(o.Class_ID!=Q)return-3;if(0==a)return 0;R(o,a),_[0]=o.in_buffer_0,_[1]=o.in_buffer_1;for(var l=0;l<a;l++)_[0][l]=e[l],o.channels_in>1&&(_[1][l]=r[l]);return y(t,_[0],_[1],a,n,s,i)}}function F(){var t,e;this.setModules=function(r,a){t=r,e=a}}function U(){var t,e,r;this.setModules=function(a,n,s){t=a,e=n,r=s}}function z(){}function G(){var t,e;this.setModules=function(r,a){t=r,e=a}}function K(e,r,a){3!=arguments.length&&(e=1,r=44100,a=128);var n=new j,s=new F,i=new b,o=new d,_=new p,l=new x,f=new I,u=new g,S=new h,R=new G,A=new m,y=new v,w=new U,M=new z;n.setModules(i,o,_,l,f,u,S,R,M),o.setModules(i,M,S,u),R.setModules(o,S),_.setModules(n),f.setModules(o,A,l,y),l.setModules(y,A,n.enc.psy),A.setModules(o),y.setModules(l),u.setModules(n,o,S),s.setModules(w,M),w.setModules(S,R,_);var B=n.lame_init();B.num_channels=e,B.in_samplerate=r,B.brate=a,B.mode=c.STEREO,B.quality=3,B.bWriteVbrTag=!1,B.disable_reservoir=!0,B.write_id3tag_automatic=!1;var E=(n.lame_init_params(B),1152),T=0|1.25*E+7200,k=t(T);this.encodeBuffer=function(r,a){1==e&&(a=r),r.length>E&&(E=r.length,T=0|1.25*E+7200,k=t(T)),k=t(T);var s=n.lame_encode_buffer(B,r,a,r.length,k,0,T);return k.subarray(0,s)},this.flush=function(){var t=n.lame_encode_flush(B,k,0,T);return k.subarray(0,t)}}function Z(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Q(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}var W={};W.fill=function(t,e,r,a){if(2==arguments.length)for(var n=0;n<t.length;n++)t[n]=arguments[1];else for(var n=e;n<r;n++)t[n]=a};var J={};J.arraycopy=function(t,e,r,a,n){for(var s=e+n;e<s;)r[a++]=t[e++]};var $={};$.SQRT2=1.4142135623730951,$.FAST_LOG10=function(t){return(0,s.default)(t)},$.FAST_LOG10_X=function(t,e){return(0,s.default)(t)*e},f.short_block_allowed=new f(0),f.short_block_coupled=new f(1),f.short_block_dispensed=new f(2),f.short_block_forced=new f(3);var tt={};tt.MAX_VALUE=3.4028235e38,u.vbr_off=new u(0),u.vbr_mt=new u(1),u.vbr_rh=new u(2),u.vbr_abr=new u(3),u.vbr_mtrh=new u(4),u.vbr_default=u.vbr_mtrh;c.STEREO=new c(0),c.JOINT_STEREO=new c(1),c.DUAL_CHANNEL=new c(2),c.MONO=new c(3),c.NOT_SET=new c(4),b.STEPS_per_dB=100,b.MAX_dB=120,b.GAIN_NOT_ENOUGH_SAMPLES=-24601,b.GAIN_ANALYSIS_ERROR=0,b.GAIN_ANALYSIS_OK=1,b.INIT_GAIN_ANALYSIS_ERROR=0,b.INIT_GAIN_ANALYSIS_OK=1,b.YULE_ORDER=10,b.MAX_ORDER=b.YULE_ORDER,b.MAX_SAMP_FREQ=48e3,b.RMS_WINDOW_TIME_NUMERATOR=1,b.RMS_WINDOW_TIME_DENOMINATOR=20,b.MAX_SAMPLES_PER_WINDOW=b.MAX_SAMP_FREQ*b.RMS_WINDOW_TIME_NUMERATOR/b.RMS_WINDOW_TIME_DENOMINATOR+1,d.EQ=function(t,e){return Math.abs(t)>Math.abs(e)?Math.abs(t-e)<=1e-6*Math.abs(t):Math.abs(t-e)<=1e-6*Math.abs(e)},d.NEQ=function(t,e){return!d.EQ(t,e)},g.NUMTOCENTRIES=100,g.MAXFRAMESIZE=2880;var et={};et.t1HB=[1,1,1,0],et.t2HB=[1,2,1,3,1,1,3,2,0],et.t3HB=[3,2,1,1,1,1,3,2,0],et.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],et.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],et.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],et.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],et.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],et.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],et.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],et.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],et.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],et.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],et.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],et.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],et.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],et.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],et.t1l=[1,4,3,5],et.t2l=[1,4,7,4,5,7,6,7,8],et.t3l=[2,3,7,4,4,7,6,7,8],et.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],et.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],et.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],et.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],et.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],et.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],et.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],et.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],et.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],et.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],et.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],et.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],et.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],et.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],et.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],
et.ht=[new S(0,0,null,null),new S(2,0,et.t1HB,et.t1l),new S(3,0,et.t2HB,et.t2l),new S(3,0,et.t3HB,et.t3l),new S(0,0,null,null),new S(4,0,et.t5HB,et.t5l),new S(4,0,et.t6HB,et.t6l),new S(6,0,et.t7HB,et.t7l),new S(6,0,et.t8HB,et.t8l),new S(6,0,et.t9HB,et.t9l),new S(8,0,et.t10HB,et.t10l),new S(8,0,et.t11HB,et.t11l),new S(8,0,et.t12HB,et.t12l),new S(16,0,et.t13HB,et.t13l),new S(0,0,null,et.t16_5l),new S(16,0,et.t15HB,et.t15l),new S(1,1,et.t16HB,et.t16l),new S(2,3,et.t16HB,et.t16l),new S(3,7,et.t16HB,et.t16l),new S(4,15,et.t16HB,et.t16l),new S(6,63,et.t16HB,et.t16l),new S(8,255,et.t16HB,et.t16l),new S(10,1023,et.t16HB,et.t16l),new S(13,8191,et.t16HB,et.t16l),new S(4,15,et.t24HB,et.t24l),new S(5,31,et.t24HB,et.t24l),new S(6,63,et.t24HB,et.t24l),new S(7,127,et.t24HB,et.t24l),new S(8,255,et.t24HB,et.t24l),new S(9,511,et.t24HB,et.t24l),new S(11,2047,et.t24HB,et.t24l),new S(13,8191,et.t24HB,et.t24l),new S(0,0,et.t32HB,et.t32l),new S(0,0,et.t33HB,et.t33l)],et.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],et.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],et.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],et.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],et.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],et.scfsi_band=[0,6,11,16,21],x.Q_MAX=257,x.Q_MAX2=116,x.LARGE_BITS=1e5,x.IXMAX_VAL=8206;var rt={};rt.SFBMAX=3*H.SBMAX_s,H.ENCDELAY=576,H.POSTDELAY=1152,H.MDCTDELAY=48,H.FFTOFFSET=224+H.MDCTDELAY,H.DECDELAY=528,H.SBLIMIT=32,H.CBANDS=64,H.SBPSY_l=21,H.SBPSY_s=12,H.SBMAX_l=22,H.SBMAX_s=13,H.PSFB21=6,H.PSFB12=6,H.BLKSIZE=1024,H.HBLKSIZE=H.BLKSIZE/2+1,H.BLKSIZE_s=256,H.HBLKSIZE_s=H.BLKSIZE_s/2+1,H.NORM_TYPE=0,H.START_TYPE=1,H.SHORT_TYPE=2,H.STOP_TYPE=3,H.MPG_MD_LR_LR=0,H.MPG_MD_LR_I=1,H.MPG_MD_MS_LR=2,H.MPG_MD_MS_I=3,H.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3.898045e-17,.0467745*5,.50455,.756825,.187098*5],X.MFSIZE=3456+H.ENCDELAY-H.MDCTDELAY,X.MAX_HEADER_BUF=256,X.MAX_BITS_PER_CHANNEL=4095,X.MAX_BITS_PER_GRANULE=7680,X.BPC=320,Z.RIFF=Q("RIFF"),Z.WAVE=Q("WAVE"),Z.fmt_=Q("fmt "),Z.data=Q("data"),Z.readHeader=function(t){var e=new Z,r=t.getUint32(0,!1);if(Z.RIFF==r){t.getUint32(4,!0);if(Z.WAVE==t.getUint32(8,!1)&&Z.fmt_==t.getUint32(12,!1)){var a=t.getUint32(16,!0),n=20;switch(a){case 16:case 18:e.channels=t.getUint16(n+2,!0),e.sampleRate=t.getUint32(n+4,!0);break;default:throw"extended fmt chunk not implemented"}n+=a;for(var s=Z.data,i=0;s!=r&&(r=t.getUint32(n,!1),i=t.getUint32(n+4,!0),s!=r);)n+=i+8;return e.dataLen=i,e.dataOffset=n+8,e}}},rt.SFBMAX=3*H.SBMAX_s,this.Mp3Encoder=K,this.WavHeader=Z}Object.defineProperty(e,"__esModule",{value:!0});var n=r(31),s=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=a}).call(e,r(37).Buffer)},function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(30),s=a(n),i=r(32),o=a(i),_=r(34),l=a(_),f=r(35),u=a(f),c=r(28),h=a(c),p={sampleRate:44100,channels:1,bitRate:96},b=function(){function t(e){(0,l.default)(this,t),this.config=(0,o.default)({},p,e),this.defaults=p,this.lib=new h.default,this.mp3Encoder=new this.lib.Mp3Encoder(this.config.channels,this.config.sampleRate,this.config.bitRate),this.recBuffer=[],this.recBufferMP3=[],this.recLength=0}return(0,u.default)(t,[{key:"record",value:function(t){this.recBuffer.push(t),this.recLength+=t.length;var e=this.encode(t);e.length>0&&this.recBufferMP3.push(e)}},{key:"encode",value:function(t){return this.mp3Encoder.encodeBuffer(this.float32ToInt(t))}},{key:"flush",value:function(){return this.mp3Encoder.flush()}},{key:"finish",value:function(){return this.flush()}},{key:"clear",value:function(){this.recBuffer=[],this.recBufferMP3=[],this.recLength=0}},{key:"getBuffer",value:function(t){t.postMessage([this.mergeBuffers()])}},{key:"mergeBuffers",value:function(){var t=new Float32Array(this.recLength),e=0,r=!0,a=!1,n=void 0;try{for(var i,o=(0,s.default)(this.recBuffer);!(r=(i=o.next()).done);r=!0){var _=i.value;t.set(_,e),e+=_.length}}catch(t){a=!0,n=t}finally{try{!r&&o.return&&o.return()}finally{if(a)throw n}}return t}},{key:"exportMP3",value:function(t){t.postMessage(new Blob(this.recBufferMP3,{type:"audio/mp3"}))}},{key:"float32ToInt",value:function(t){for(var e=t.length,r=0,a=new Int16Array(e);r<e;)a[r]=function(t){var e=t<0?32768*t:32767*t;return Math.max(-32768,Math.min(32768,e))}(t[r++]);return a}}]),t}();e.default=b},function(t,e,r){t.exports={default:r(39),__esModule:!0}},function(t,e,r){t.exports={default:r(40),__esModule:!0}},function(t,e,r){t.exports={default:r(41),__esModule:!0}},function(t,e,r){t.exports={default:r(42),__esModule:!0}},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,r){"use strict";e.__esModule=!0;var a=r(33),n=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,n.default)(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}()},function(t,e){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function a(t){return 3*t.length/4-r(t)}function n(t){var e,a,n,s,i,o,_=t.length;i=r(t),o=new f(3*_/4-i),n=i>0?_-4:_;var u=0;for(e=0,a=0;e<n;e+=4,a+=3)s=l[t.charCodeAt(e)]<<18|l[t.charCodeAt(e+1)]<<12|l[t.charCodeAt(e+2)]<<6|l[t.charCodeAt(e+3)],o[u++]=s>>16&255,o[u++]=s>>8&255,o[u++]=255&s;return 2===i?(s=l[t.charCodeAt(e)]<<2|l[t.charCodeAt(e+1)]>>4,o[u++]=255&s):1===i&&(s=l[t.charCodeAt(e)]<<10|l[t.charCodeAt(e+1)]<<4|l[t.charCodeAt(e+2)]>>2,o[u++]=s>>8&255,o[u++]=255&s),o}function s(t){return _[t>>18&63]+_[t>>12&63]+_[t>>6&63]+_[63&t]}function i(t,e,r){for(var a,n=[],i=e;i<r;i+=3)a=(t[i]<<16)+(t[i+1]<<8)+t[i+2],n.push(s(a));return n.join("")}function o(t){for(var e,r=t.length,a=r%3,n="",s=[],o=0,l=r-a;o<l;o+=16383)s.push(i(t,o,o+16383>l?l:o+16383));return 1===a?(e=t[r-1],n+=_[e>>2],n+=_[e<<4&63],n+="=="):2===a&&(e=(t[r-2]<<8)+t[r-1],n+=_[e>>10],n+=_[e>>4&63],n+=_[e<<2&63],n+="="),s.push(n),s.join("")}e.byteLength=a,e.toByteArray=n,e.fromByteArray=o;for(var _=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,h=u.length;c<h;++c)_[c]=u[c],l[u.charCodeAt(c)]=c;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e,r){(function(t){"use strict";function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function n(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=s.prototype):(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,r){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return i(this,t,e,r)}function i(t,e,r,a){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?c(t,e,r,a):"string"==typeof e?f(t,e,r):h(t,e)}function o(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function _(t,e,r,a){return o(e),e<=0?n(t,e):void 0!==r?"string"==typeof a?n(t,e).fill(r,a):n(t,e).fill(r):n(t,e)}function l(t,e){if(o(e),t=n(t,e<0?0:0|p(e)),!s.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!s.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var a=0|m(e,r);t=n(t,a);var i=t.write(e,r);return i!==a&&(t=t.slice(0,i)),t}function u(t,e){var r=e.length<0?0:0|p(e.length);t=n(t,r);for(var a=0;a<r;a+=1)t[a]=255&e[a];return t}function c(t,e,r,a){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(a||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===a?new Uint8Array(e):void 0===a?new Uint8Array(e,r):new Uint8Array(e,r,a),s.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=s.prototype):t=u(t,e),t}function h(t,e){if(s.isBuffer(e)){var r=0|p(e.length);return t=n(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Z(e.length)?n(t,0):u(t,e);if("Buffer"===e.type&&J(e.data))return u(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function b(t){return+t!=t&&(t=0),s.alloc(+t)}function m(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var a=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(a)return F(t).length;e=(""+e).toLowerCase(),a=!0}}function v(t,e,r){var a=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,r);case"utf8":case"utf-8":return T(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return P(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function d(t,e,r){var a=t[e];t[e]=t[r],t[r]=a}function g(t,e,r,a,n){if(0===t.length)return-1;if("string"==typeof r?(a=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=s.from(e,a)),s.isBuffer(e))return 0===e.length?-1:S(t,e,r,a,n);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):S(t,[e],r,a,n);throw new TypeError("val must be string, number or Buffer")}function S(t,e,r,a,n){function s(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}var i=1,o=t.length,_=e.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(t.length<2||e.length<2)return-1;i=2,o/=2,_/=2,r/=2}var l;if(n){var f=-1;for(l=r;l<o;l++)if(s(t,l)===s(e,f===-1?0:l-f)){if(f===-1&&(f=l),l-f+1===_)return f*i}else f!==-1&&(l-=l-f),f=-1}else for(r+_>o&&(r=o-_),l=r;l>=0;l--){for(var u=!0,c=0;c<_;c++)if(s(t,l+c)!==s(e,c)){u=!1;break}if(u)return l}return-1}function R(t,e,r,a){r=Number(r)||0;var n=t.length-r;a?(a=Number(a))>n&&(a=n):a=n;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");a>s/2&&(a=s/2);for(var i=0;i<a;++i){var o=parseInt(e.substr(2*i,2),16);if(isNaN(o))return i;t[r+i]=o}return i}function A(t,e,r,a){return K(F(e,t.length-r),t,r,a)}function y(t,e,r,a){return K(U(e),t,r,a)}function w(t,e,r,a){return y(t,e,r,a)}function M(t,e,r,a){return K(G(e),t,r,a)}function B(t,e,r,a){return K(z(e,t.length-r),t,r,a)}function E(t,e,r){return 0===e&&r===t.length?Q.fromByteArray(t):Q.fromByteArray(t.slice(e,r))}function T(t,e,r){r=Math.min(t.length,r);for(var a=[],n=e;n<r;){var s=t[n],i=null,o=s>239?4:s>223?3:s>191?2:1;if(n+o<=r){var _,l,f,u;switch(o){case 1:s<128&&(i=s);break;case 2:_=t[n+1],128==(192&_)&&(u=(31&s)<<6|63&_)>127&&(i=u);break;case 3:_=t[n+1],l=t[n+2],128==(192&_)&&128==(192&l)&&(u=(15&s)<<12|(63&_)<<6|63&l)>2047&&(u<55296||u>57343)&&(i=u);break;case 4:_=t[n+1],l=t[n+2],f=t[n+3],128==(192&_)&&128==(192&l)&&128==(192&f)&&(u=(15&s)<<18|(63&_)<<12|(63&l)<<6|63&f)>65535&&u<1114112&&(i=u)}}null===i?(i=65533,o=1):i>65535&&(i-=65536,a.push(i>>>10&1023|55296),i=56320|1023&i),a.push(i),n+=o}return x(a)}function x(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var r="",a=0;a<e;)r+=String.fromCharCode.apply(String,t.slice(a,a+=$));return r}function k(t,e,r){var a="";r=Math.min(t.length,r);for(var n=e;n<r;++n)a+=String.fromCharCode(127&t[n]);return a}function P(t,e,r){var a="";r=Math.min(t.length,r);for(var n=e;n<r;++n)a+=String.fromCharCode(t[n]);return a}function I(t,e,r){var a=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>a)&&(r=a);for(var n="",s=e;s<r;++s)n+=j(t[s]);return n}function O(t,e,r){for(var a=t.slice(e,r),n="",s=0;s<a.length;s+=2)n+=String.fromCharCode(a[s]+256*a[s+1]);return n}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function H(t,e,r,a,n,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<i)throw new RangeError('"value" argument is out of bounds');if(r+a>t.length)throw new RangeError("Index out of range")}function N(t,e,r,a){e<0&&(e=65535+e+1);for(var n=0,s=Math.min(t.length-r,2);n<s;++n)t[r+n]=(e&255<<8*(a?n:1-n))>>>8*(a?n:1-n)}function V(t,e,r,a){e<0&&(e=4294967295+e+1);for(var n=0,s=Math.min(t.length-r,4);n<s;++n)t[r+n]=e>>>8*(a?n:3-n)&255}function D(t,e,r,a,n,s){if(r+a>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Y(t,e,r,a,n){return n||D(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(t,e,r,a,23,4),r+4}function X(t,e,r,a,n){return n||D(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(t,e,r,a,52,8),r+8}function C(t){if(t=q(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){e=e||1/0;for(var r,a=t.length,n=null,s=[],i=0;i<a;++i){if((r=t.charCodeAt(i))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(i+1===a){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function U(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function z(t,e){for(var r,a,n,s=[],i=0;i<t.length&&!((e-=2)<0);++i)r=t.charCodeAt(i),a=r>>8,n=r%256,s.push(n),s.push(a);return s}function G(t){return Q.toByteArray(C(t))}function K(t,e,r,a){for(var n=0;n<a&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function Z(t){return t!==t}var Q=r(36),W=r(73),J=r(38);e.Buffer=s,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,r){return i(null,t,e,r)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,r){return _(null,t,e,r)},s.allocUnsafe=function(t){return l(null,t)},s.allocUnsafeSlow=function(t){return l(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,a=e.length,n=0,i=Math.min(r,a);n<i;++n)if(t[n]!==e[n]){r=t[n],a=e[n];break}return r<a?-1:a<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!J(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var a=s.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var i=t[r];if(!s.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(a,n),n+=i.length}return a},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):v.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,r,a,n){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===a&&(a=0),void 0===n&&(n=this.length),e<0||r>t.length||a<0||n>this.length)throw new RangeError("out of range index");if(a>=n&&e>=r)return 0;if(a>=n)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,a>>>=0,n>>>=0,this===t)return 0;for(var i=n-a,o=r-e,_=Math.min(i,o),l=this.slice(a,n),f=t.slice(e,r),u=0;u<_;++u)if(l[u]!==f[u]){i=l[u],o=f[u];break}return i<o?-1:o<i?1:0},s.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},s.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},s.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},s.prototype.write=function(t,e,r,a){if(void 0===e)a="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)a=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===a&&(a="utf8")):(a=r,r=void 0)}var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var s=!1;;)switch(a){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return A(this,t,e,r);case"ascii":return y(this,t,e,r);case"latin1":case"binary":return w(this,t,e,r);case"base64":return M(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),s=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;s.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var a;if(s.TYPED_ARRAY_SUPPORT)a=this.subarray(t,e),a.__proto__=s.prototype;else{var n=e-t;a=new s(n,void 0);for(var i=0;i<n;++i)a[i]=this[i+t]}return a},s.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var a=this[t],n=1,s=0;++s<e&&(n*=256);)a+=this[t+s]*n;return a},s.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var a=this[t+--e],n=1;e>0&&(n*=256);)a+=this[t+--e]*n;return a},s.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var a=this[t],n=1,s=0;++s<e&&(n*=256);)a+=this[t+s]*n;return n*=128,a>=n&&(a-=Math.pow(2,8*e)),a},s.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var a=e,n=1,s=this[t+--a];a>0&&(n*=256);)s+=this[t+--a]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*e)),s},s.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),W.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),W.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),W.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),W.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,r,a){if(t=+t,e|=0,r|=0,!a){H(this,t,e,r,Math.pow(2,8*r)-1,0)}var n=1,s=0;for(this[e]=255&t;++s<r&&(n*=256);)this[e+s]=t/n&255;return e+r},s.prototype.writeUIntBE=function(t,e,r,a){if(t=+t,e|=0,r|=0,!a){H(this,t,e,r,Math.pow(2,8*r)-1,0)}var n=r-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+r},s.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||H(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||H(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||H(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||H(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):V(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||H(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,r,a){if(t=+t,e|=0,!a){var n=Math.pow(2,8*r-1);H(this,t,e,r,n-1,-n)}var s=0,i=1,o=0;for(this[e]=255&t;++s<r&&(i*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/i>>0)-o&255;return e+r},s.prototype.writeIntBE=function(t,e,r,a){if(t=+t,e|=0,!a){var n=Math.pow(2,8*r-1);H(this,t,e,r,n-1,-n)}var s=r-1,i=1,o=0;for(this[e+s]=255&t;--s>=0&&(i*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/i>>0)-o&255;return e+r},s.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||H(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||H(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||H(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||H(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):V(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||H(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,r){return Y(this,t,e,!0,r)},s.prototype.writeFloatBE=function(t,e,r){return Y(this,t,e,!1,r)},s.prototype.writeDoubleLE=function(t,e,r){return X(this,t,e,!0,r)},s.prototype.writeDoubleBE=function(t,e,r){return X(this,t,e,!1,r)},s.prototype.copy=function(t,e,r,a){if(r||(r=0),a||0===a||(a=this.length),e>=t.length&&(e=t.length),e||(e=0),a>0&&a<r&&(a=r),a===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-e<a-r&&(a=t.length-e+r);var n,i=a-r;if(this===t&&r<e&&e<a)for(n=i-1;n>=0;--n)t[n+e]=this[n+r];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(n=0;n<i;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},s.prototype.fill=function(t,e,r,a){if("string"==typeof t){if("string"==typeof e?(a=e,e=0,r=this.length):"string"==typeof r&&(a=r,r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var i;if("number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=s.isBuffer(t)?t:F(new s(t,a).toString()),_=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%_]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,function(){return this}())},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){r(72),r(71),t.exports=r(66)},function(t,e,r){r(68),t.exports=r(1).Math.log10},function(t,e,r){r(69),t.exports=r(1).Object.assign},function(t,e,r){r(70);var a=r(1).Object;t.exports=function(t,e,r){return a.defineProperty(t,e,r)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,r){var a=r(16),n=r(63),s=r(62);t.exports=function(t){return function(e,r,i){var o,_=a(e),l=n(_.length),f=s(i,l);if(t&&r!=r){for(;l>f;)if((o=_[f++])!=o)return!0}else for(;l>f;f++)if((t||f in _)&&_[f]===r)return t||f||0;return!t&&-1}}},function(t,e,r){var a=r(17),n=r(3)("toStringTag"),s="Arguments"==a(function(){return arguments}()),i=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,r,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=i(e=Object(t),n))?r:s?a(e):"Object"==(o=a(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,r){var a=r(43);t.exports=function(t,e,r){if(a(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,a){return t.call(e,r,a)};case 3:return function(r,a,n){return t.call(e,r,a,n)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){t.exports=r(2).document&&document.documentElement},function(t,e,r){t.exports=!r(4)&&!r(12)(function(){return 7!=Object.defineProperty(r(18)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){"use strict";var a=r(54),n=r(23),s=r(24),i={};r(5)(i,r(3)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=a(i,{next:n(1,r)}),s(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=!0},function(t,e,r){"use strict";var a=r(22),n=r(56),s=r(59),i=r(26),o=r(20),_=Object.assign;t.exports=!_||r(12)(function(){var t={},e={},r=Symbol(),a="abcdefghijklmnopqrst";return t[r]=7,a.split("").forEach(function(t){e[t]=t}),7!=_({},t)[r]||Object.keys(_({},e)).join("")!=a})?function(t,e){for(var r=i(t),_=arguments.length,l=1,f=n.f,u=s.f;_>l;)for(var c,h=o(arguments[l++]),p=f?a(h).concat(f(h)):a(h),b=p.length,m=0;b>m;)u.call(h,c=p[m++])&&(r[c]=h[c]);return r}:_},function(t,e,r){var a=r(6),n=r(55),s=r(19),i=r(14)("IE_PROTO"),o=function(){},_=function(){var t,e=r(18)("iframe"),a=s.length;for(e.style.display="none",r(48).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script>"),t.close(),_=t.F;a--;)delete _.prototype[s[a]];return _()};t.exports=Object.create||function(t,e){var r;return null!==t?(o.prototype=a(t),r=new o,o.prototype=null,r[i]=t):r=_(),void 0===e?r:n(r,e)}},function(t,e,r){var a=r(10),n=r(6),s=r(22);t.exports=r(4)?Object.defineProperties:function(t,e){n(t);for(var r,i=s(e),o=i.length,_=0;o>_;)a.f(t,r=i[_++],e[r]);return t}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var a=r(8),n=r(26),s=r(14)("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),a(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},function(t,e,r){var a=r(8),n=r(16),s=r(45)(!1),i=r(14)("IE_PROTO");t.exports=function(t,e){var r,o=n(t),_=0,l=[];for(r in o)r!=i&&a(o,r)&&l.push(r);for(;e.length>_;)a(o,r=e[_++])&&(~s(l,r)||l.push(r));return l}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){t.exports=r(5)},function(t,e,r){var a=r(15),n=r(11)
;t.exports=function(t){return function(e,r){var s,i,o=String(n(e)),_=a(r),l=o.length;return _<0||_>=l?t?"":void 0:(s=o.charCodeAt(_),s<55296||s>56319||_+1===l||(i=o.charCodeAt(_+1))<56320||i>57343?t?o.charAt(_):s:t?o.slice(_,_+2):i-56320+(s-55296<<10)+65536)}}},function(t,e,r){var a=r(15),n=Math.max,s=Math.min;t.exports=function(t,e){return t=a(t),t<0?n(t+e,0):s(t,e)}},function(t,e,r){var a=r(15),n=Math.min;t.exports=function(t){return t>0?n(a(t),9007199254740991):0}},function(t,e,r){var a=r(13);t.exports=function(t,e){if(!a(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!a(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!a(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!a(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var a=r(46),n=r(3)("iterator"),s=r(9);t.exports=r(1).getIteratorMethod=function(t){if(void 0!=t)return t[n]||t["@@iterator"]||s[a(t)]}},function(t,e,r){var a=r(6),n=r(65);t.exports=r(1).getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return a(e.call(t))}},function(t,e,r){"use strict";var a=r(44),n=r(51),s=r(9),i=r(16);t.exports=r(21)(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,n(1)):"keys"==e?n(0,r):"values"==e?n(0,t[r]):n(0,[r,t[r]])},"values"),s.Arguments=s.Array,a("keys"),a("values"),a("entries")},function(t,e,r){var a=r(7);a(a.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,r){var a=r(7);a(a.S+a.F,"Object",{assign:r(53)})},function(t,e,r){var a=r(7);a(a.S+a.F*!r(4),"Object",{defineProperty:r(10).f})},function(t,e,r){"use strict";var a=r(61)(!0);r(21)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=a(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){r(67);for(var a=r(2),n=r(5),s=r(9),i=r(3)("toStringTag"),o=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],_=0;_<5;_++){var l=o[_],f=a[l],u=f&&f.prototype;u&&!u[i]&&n(u,i,l),s[l]=s.Array}},function(t,e){e.read=function(t,e,r,a,n){var s,i,o=8*n-a-1,_=(1<<o)-1,l=_>>1,f=-7,u=r?n-1:0,c=r?-1:1,h=t[e+u];for(u+=c,s=h&(1<<-f)-1,h>>=-f,f+=o;f>0;s=256*s+t[e+u],u+=c,f-=8);for(i=s&(1<<-f)-1,s>>=-f,f+=a;f>0;i=256*i+t[e+u],u+=c,f-=8);if(0===s)s=1-l;else{if(s===_)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,a),s-=l}return(h?-1:1)*i*Math.pow(2,s-a)},e.write=function(t,e,r,a,n,s){var i,o,_,l=8*s-n-1,f=(1<<l)-1,u=f>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=a?0:s-1,p=a?1:-1,b=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,i=f):(i=Math.floor(Math.log(e)/Math.LN2),e*(_=Math.pow(2,-i))<1&&(i--,_*=2),e+=i+u>=1?c/_:c*Math.pow(2,1-u),e*_>=2&&(i++,_/=2),i+u>=f?(o=0,i=f):i+u>=1?(o=(e*_-1)*Math.pow(2,n),i+=u):(o=e*Math.pow(2,u-1)*Math.pow(2,n),i=0));n>=8;t[r+h]=255&o,h+=p,o/=256,n-=8);for(i=i<<n|o,l+=n;l>0;t[r+h]=255&i,h+=p,i/=256,l-=8);t[r+h-p]|=128*b}}]);
