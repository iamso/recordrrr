export default function lamejs(){function _(Ve){return new Int8Array(Ve)}function g(Ve){return new Int16Array(Ve)}function S(Ve){return new Int32Array(Ve)}function B(Ve){return new Float32Array(Ve)}function R(Ve){return new Float64Array(Ve)}function T(Ve){if(1==Ve.length)return B(Ve[0]);var Ie=Ve[0];Ve=Ve.slice(1);for(var Le=[],je=0;je<Ie;je++)Le.push(T(Ve));return Le}function E(Ve){if(1==Ve.length)return S(Ve[0]);var Ie=Ve[0];Ve=Ve.slice(1);for(var Le=[],je=0;je<Ie;je++)Le.push(E(Ve));return Le}function M(Ve){if(1==Ve.length)return g(Ve[0]);var Ie=Ve[0];Ve=Ve.slice(1);for(var Le=[],je=0;je<Ie;je++)Le.push(M(Ve));return Le}function P(Ve){if(1==Ve.length)return Array(Ve[0]);var Ie=Ve[0];Ve=Ve.slice(1);for(var Le=[],je=0;je<Ie;je++)Le.push(P(Ve));return Le}function H(Ve){this.ordinal=Ve}function V(Ve){this.ordinal=Ve}function I(Ve){this.ordinal=function(){return Ve}}function L(){var Ie=3,Le=98,je=4;this.getLameVersion=function(){return Ie+"."+Le+"."+je},this.getLameShortVersion=function(){return Ie+"."+Le+"."+je},this.getLameVeryShortVersion=function(){return"LAME"+Ie+"."+Le+"r"},this.getPsyVersion=function(){return 0+"."+93},this.getLameUrl=function(){return"http://www.mp3dev.org/"},this.getLameOsBitness=function(){return"32bits"}}function N(){function Ve(Ye,Ce,Fe,ze,Ge,Ze,Ke,Qe,We,Ue,Je,$e,es,ss,as){this.vbr_q=Ye,this.quant_comp=Ce,this.quant_comp_s=Fe,this.expY=ze,this.st_lrm=Ge,this.st_s=Ze,this.masking_adj=Ke,this.masking_adj_short=Qe,this.ath_lower=We,this.ath_curve=Ue,this.ath_sensitivity=Je,this.interch=$e,this.safejoint=es,this.sfb21mod=ss,this.msfix=as}function Ie(Ye,Ce,Fe,ze,Ge,Ze,Ke,Qe,We,Ue,Je,$e,es,ss){this.quant_comp=Ce,this.quant_comp_s=Fe,this.safejoint=ze,this.nsmsfix=Ge,this.st_lrm=Ze,this.st_s=Ke,this.nsbass=Qe,this.scale=We,this.masking_adj=Ue,this.ath_lower=Je,this.ath_curve=$e,this.interch=es,this.sfscale=ss}function Le(Ye,Ce,Fe){var ze=Ye.VBR==V.vbr_rh?qe:Xe,Ge=Ye.VBR_q_frac,Ze=ze[Ce],Ke=ze[Ce+1],Qe=Ze;Ze.st_lrm+=Ge*(Ke.st_lrm-Ze.st_lrm),Ze.st_s+=Ge*(Ke.st_s-Ze.st_s),Ze.masking_adj+=Ge*(Ke.masking_adj-Ze.masking_adj),Ze.masking_adj_short+=Ge*(Ke.masking_adj_short-Ze.masking_adj_short),Ze.ath_lower+=Ge*(Ke.ath_lower-Ze.ath_lower),Ze.ath_curve+=Ge*(Ke.ath_curve-Ze.ath_curve),Ze.ath_sensitivity+=Ge*(Ke.ath_sensitivity-Ze.ath_sensitivity),Ze.interch+=Ge*(Ke.interch-Ze.interch),Ze.msfix+=Ge*(Ke.msfix-Ze.msfix),Ne(Ye,Qe.vbr_q),0==Fe?!(0<Math.abs(Ye.quant_comp- -1))&&(Ye.quant_comp=Qe.quant_comp):Ye.quant_comp=Qe.quant_comp,0==Fe?!(0<Math.abs(Ye.quant_comp_short- -1))&&(Ye.quant_comp_short=Qe.quant_comp_s):Ye.quant_comp_short=Qe.quant_comp_s,0!=Qe.expY&&(Ye.experimentalY=0!=Qe.expY),0==Fe?!(0<Math.abs(Ye.internal_flags.nsPsy.attackthre- -1))&&(Ye.internal_flags.nsPsy.attackthre=Qe.st_lrm):Ye.internal_flags.nsPsy.attackthre=Qe.st_lrm,0==Fe?!(0<Math.abs(Ye.internal_flags.nsPsy.attackthre_s- -1))&&(Ye.internal_flags.nsPsy.attackthre_s=Qe.st_s):Ye.internal_flags.nsPsy.attackthre_s=Qe.st_s,0==Fe?!(0<Math.abs(Ye.maskingadjust-0))&&(Ye.maskingadjust=Qe.masking_adj):Ye.maskingadjust=Qe.masking_adj,0==Fe?!(0<Math.abs(Ye.maskingadjust_short-0))&&(Ye.maskingadjust_short=Qe.masking_adj_short):Ye.maskingadjust_short=Qe.masking_adj_short,0==Fe?!(0<Math.abs(10*-Ye.ATHlower-0))&&(Ye.ATHlower=-Qe.ath_lower/10):Ye.ATHlower=-Qe.ath_lower/10,0==Fe?!(0<Math.abs(Ye.ATHcurve- -1))&&(Ye.ATHcurve=Qe.ath_curve):Ye.ATHcurve=Qe.ath_curve,0==Fe?!(0<Math.abs(Ye.athaa_sensitivity- -1))&&(Ye.athaa_sensitivity=Qe.ath_sensitivity):Ye.athaa_sensitivity=Qe.ath_sensitivity,0<Qe.interch&&(0==Fe?!(0<Math.abs(Ye.interChRatio- -1))&&(Ye.interChRatio=Qe.interch):Ye.interChRatio=Qe.interch),0<Qe.safejoint&&(Ye.exp_nspsytune|=Qe.safejoint),0<Qe.sfb21mod&&(Ye.exp_nspsytune|=Qe.sfb21mod<<20),0==Fe?!(0<Math.abs(Ye.msfix- -1))&&(Ye.msfix=Qe.msfix):Ye.msfix=Qe.msfix,0==Fe&&(Ye.VBR_q=Ce,Ye.VBR_q_frac=Ge)}function je(Ye,Ce,Fe){var Ge=Oe.nearestBitrateFullIndex(Ce);if(Ye.VBR=V.vbr_abr,Ye.VBR_mean_bitrate_kbps=Ce,Ye.VBR_mean_bitrate_kbps=Math.min(Ye.VBR_mean_bitrate_kbps,320),Ye.VBR_mean_bitrate_kbps=Math.max(Ye.VBR_mean_bitrate_kbps,8),Ye.brate=Ye.VBR_mean_bitrate_kbps,320<Ye.VBR_mean_bitrate_kbps&&(Ye.disable_reservoir=!0),0<De[Ge].safejoint&&(Ye.exp_nspsytune|=2),0<De[Ge].sfscale&&(Ye.internal_flags.noise_shaping=2),0<Math.abs(De[Ge].nsbass)){var Ze=int(4*De[Ge].nsbass);0>Ze&&(Ze+=64),Ye.exp_nspsytune|=Ze<<2}return 0==Fe?!(0<Math.abs(Ye.quant_comp- -1))&&(Ye.quant_comp=De[Ge].quant_comp):Ye.quant_comp=De[Ge].quant_comp,0==Fe?!(0<Math.abs(Ye.quant_comp_short- -1))&&(Ye.quant_comp_short=De[Ge].quant_comp_s):Ye.quant_comp_short=De[Ge].quant_comp_s,0==Fe?!(0<Math.abs(Ye.msfix- -1))&&(Ye.msfix=De[Ge].nsmsfix):Ye.msfix=De[Ge].nsmsfix,0==Fe?!(0<Math.abs(Ye.internal_flags.nsPsy.attackthre- -1))&&(Ye.internal_flags.nsPsy.attackthre=De[Ge].st_lrm):Ye.internal_flags.nsPsy.attackthre=De[Ge].st_lrm,0==Fe?!(0<Math.abs(Ye.internal_flags.nsPsy.attackthre_s- -1))&&(Ye.internal_flags.nsPsy.attackthre_s=De[Ge].st_s):Ye.internal_flags.nsPsy.attackthre_s=De[Ge].st_s,0==Fe?!(0<Math.abs(Ye.scale- -1))&&(Ye.scale=De[Ge].scale):Ye.scale=De[Ge].scale,0==Fe?!(0<Math.abs(Ye.maskingadjust-0))&&(Ye.maskingadjust=De[Ge].masking_adj):Ye.maskingadjust=De[Ge].masking_adj,0<De[Ge].masking_adj?0==Fe?!(0<Math.abs(Ye.maskingadjust_short-0))&&(Ye.maskingadjust_short=.9*De[Ge].masking_adj):Ye.maskingadjust_short=.9*De[Ge].masking_adj:0==Fe?!(0<Math.abs(Ye.maskingadjust_short-0))&&(Ye.maskingadjust_short=1.1*De[Ge].masking_adj):Ye.maskingadjust_short=1.1*De[Ge].masking_adj,0==Fe?!(0<Math.abs(10*-Ye.ATHlower-0))&&(Ye.ATHlower=-De[Ge].ath_lower/10):Ye.ATHlower=-De[Ge].ath_lower/10,0==Fe?!(0<Math.abs(Ye.ATHcurve- -1))&&(Ye.ATHcurve=De[Ge].ath_curve):Ye.ATHcurve=De[Ge].ath_curve,0==Fe?!(0<Math.abs(Ye.interChRatio- -1))&&(Ye.interChRatio=De[Ge].interch):Ye.interChRatio=De[Ge].interch,Ce}function Ne(Ye,Ce){var Fe=0;return 0>Ce&&(Fe=-1,Ce=0),9<Ce&&(Fe=-1,Ce=9),Ye.VBR_q=Ce,Ye.VBR_q_frac=0,Fe}var Oe;this.setModules=function(Ye){Oe=Ye};var qe=[new Ve(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,0.97),new Ve(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new Ve(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new Ve(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new Ve(4,9,9,1,6,135,-0.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new Ve(5,9,9,1,6.4,140,0.5,0.4,-7.5,4,-12,2e-4,0,0,1.95),new Ve(6,9,9,1,6.6,145,0.67,0.65,-14.7,6.5,-19,4e-4,0,0,2.3),new Ve(7,9,9,1,6.6,145,0.8,0.75,-19.7,8,-22,6e-4,0,0,2.7),new Ve(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new Ve(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new Ve(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],Xe=[new Ve(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,0.97),new Ve(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new Ve(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new Ve(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new Ve(4,9,9,1,4.2,25,-2.2,0.1,0,3.5,-8,0,2,0,1.79),new Ve(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new Ve(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new Ve(7,9,9,1,4.2,25,0.5,2,-14.5,8,-22,6e-4,0,0,2),new Ve(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new Ve(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new Ve(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)],De=[new Ie(8,9,9,0,0,6.6,145,0,0.95,0,-30,11,0.0012,1),new Ie(16,9,9,0,0,6.6,145,0,0.95,0,-25,11,1e-3,1),new Ie(24,9,9,0,0,6.6,145,0,0.95,0,-20,11,1e-3,1),new Ie(32,9,9,0,0,6.6,145,0,0.95,0,-15,11,1e-3,1),new Ie(40,9,9,0,0,6.6,145,0,0.95,0,-10,11,9e-4,1),new Ie(48,9,9,0,0,6.6,145,0,0.95,0,-10,11,9e-4,1),new Ie(56,9,9,0,0,6.6,145,0,0.95,0,-6,11,8e-4,1),new Ie(64,9,9,0,0,6.6,145,0,0.95,0,-2,11,8e-4,1),new Ie(80,9,9,0,0,6.6,145,0,0.95,0,0,8,7e-4,1),new Ie(96,9,9,0,2.5,6.6,145,0,0.95,0,1,5.5,6e-4,1),new Ie(112,9,9,0,2.25,6.6,145,0,0.95,0,2,4.5,5e-4,1),new Ie(128,9,9,0,1.95,6.4,140,0,0.95,0,3,4,2e-4,1),new Ie(160,9,9,1,1.79,6,135,0,0.95,-2,5,3.5,0,1),new Ie(192,9,9,1,1.49,5.6,125,0,0.97,-4,7,3,0,0),new Ie(224,9,9,1,1.25,5.2,125,0,0.98,-6,9,2,0,0),new Ie(256,9,9,1,0.97,5.2,125,0,1,-8,10,1,0,0),new Ie(320,9,9,1,0.9,5.2,125,0,1,-10,12,0,0,0)];this.apply_preset=function(Ye,Ce,Fe){switch(Ce){case he.R3MIX:{Ce=he.V3,Ye.VBR=V.vbr_mtrh;break}case he.MEDIUM:{Ce=he.V4,Ye.VBR=V.vbr_rh;break}case he.MEDIUM_FAST:{Ce=he.V4,Ye.VBR=V.vbr_mtrh;break}case he.STANDARD:{Ce=he.V2,Ye.VBR=V.vbr_rh;break}case he.STANDARD_FAST:{Ce=he.V2,Ye.VBR=V.vbr_mtrh;break}case he.EXTREME:{Ce=he.V0,Ye.VBR=V.vbr_rh;break}case he.EXTREME_FAST:{Ce=he.V0,Ye.VBR=V.vbr_mtrh;break}case he.INSANE:return Ce=320,Ye.preset=Ce,je(Ye,Ce,Fe),Ye.VBR=V.vbr_off,Ce;}switch(Ye.preset=Ce,Ce){case he.V9:return Le(Ye,9,Fe),Ce;case he.V8:return Le(Ye,8,Fe),Ce;case he.V7:return Le(Ye,7,Fe),Ce;case he.V6:return Le(Ye,6,Fe),Ce;case he.V5:return Le(Ye,5,Fe),Ce;case he.V4:return Le(Ye,4,Fe),Ce;case he.V3:return Le(Ye,3,Fe),Ce;case he.V2:return Le(Ye,2,Fe),Ce;case he.V1:return Le(Ye,1,Fe),Ce;case he.V0:return Le(Ye,0,Fe),Ce;default:}return 8<=Ce&&320>=Ce?je(Ye,Ce,Fe):(Ye.preset=0,Ce)}}function O(){function Ve(Ze,Ke,Qe,We,Ue,Je){for(;0!=Ue--;)Qe[We]=1e-10+Ze[Ke+0]*Je[0]-Qe[We-1]*Je[1]+Ze[Ke-1]*Je[2]-Qe[We-2]*Je[3]+Ze[Ke-2]*Je[4]-Qe[We-3]*Je[5]+Ze[Ke-3]*Je[6]-Qe[We-4]*Je[7]+Ze[Ke-4]*Je[8]-Qe[We-5]*Je[9]+Ze[Ke-5]*Je[10]-Qe[We-6]*Je[11]+Ze[Ke-6]*Je[12]-Qe[We-7]*Je[13]+Ze[Ke-7]*Je[14]-Qe[We-8]*Je[15]+Ze[Ke-8]*Je[16]-Qe[We-9]*Je[17]+Ze[Ke-9]*Je[18]-Qe[We-10]*Je[19]+Ze[Ke-10]*Je[20],++We,++Ke}function Ie(Ze,Ke,Qe,We,Ue,Je){for(;0!=Ue--;)Qe[We]=Ze[Ke+0]*Je[0]-Qe[We-1]*Je[1]+Ze[Ke-1]*Je[2]-Qe[We-2]*Je[3]+Ze[Ke-2]*Je[4],++We,++Ke}function Le(Ze,Ke){for(var Qe=0;Qe<MAX_ORDER;Qe++)Ze.linprebuf[Qe]=Ze.lstepbuf[Qe]=Ze.loutbuf[Qe]=Ze.rinprebuf[Qe]=Ze.rstepbuf[Qe]=Ze.routbuf[Qe]=0;switch(0|Ke){case 48000:Ze.reqindex=0;break;case 44100:Ze.reqindex=1;break;case 32000:Ze.reqindex=2;break;case 24000:Ze.reqindex=3;break;case 22050:Ze.reqindex=4;break;case 16000:Ze.reqindex=5;break;case 12000:Ze.reqindex=6;break;case 11025:Ze.reqindex=7;break;case 8e3:Ze.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR;}return Ze.sampleWindow=0|(Ke*Ye+Ce-1)/Ce,Ze.lsum=0,Ze.rsum=0,Ze.totsamp=0,xe.ill(Ze.A,0),INIT_GAIN_ANALYSIS_OK}function je(Ze){return Ze*Ze}function Ne(Ze,Ke){var Qe,We=0;for(Qe=0;Qe<Ke;Qe++)We+=Ze[Qe];if(0==We)return GAIN_NOT_ENOUGH_SAMPLES;var Ue=0|Math.ceil(We*(1-0.95));for(Qe=Ke;0<Qe--&&!(0>=(Ue-=Ze[Qe])););return 64.82-Qe/O.STEPS_per_dB}var qe=O.YULE_ORDER,De=O.MAX_SAMP_FREQ,Ye=O.RMS_WINDOW_TIME_NUMERATOR,Ce=O.RMS_WINDOW_TIME_DENOMINATOR,Fe=O.MAX_SAMPLES_PER_WINDOW,ze=[[0.038575994352,-3.84664617118067,-0.02160367184185,7.81501653005538,-0.00123395316851,-11.34170355132042,-0.00009291677959,13.05504219327545,-0.01655260341619,-12.28759895145294,0.02161526843274,9.4829380631979,-0.02074045215285,-5.87257861775999,0.00594298065125,2.75465861874613,0.00306428023191,-0.86984376593551,0.00012025322027,0.13919314567432,0.00288463683916],[0.0541865640643,-3.47845948550071,-0.02911007808948,6.36317777566148,-0.00848709379851,-8.54751527471874,-0.00851165645469,9.4769360780128,-0.00834990904936,-8.81498681370155,0.02245293253339,6.85401540936998,-0.02596338512915,-4.39470996079559,0.01624864962975,2.19611684890774,-0.00240879051584,-0.75104302451432,0.00674613682247,0.13149317958808,-0.00187763777362],[0.15457299681924,-2.37898834973084,-0.09331049056315,2.84868151156327,-0.06247880153653,-2.64577170229825,0.02163541888798,2.23697657451713,-0.05588393329856,-1.67148153367602,0.04781476674921,1.00595954808547,0.00222312597743,-0.45953458054983,0.03174092540049,0.16378164858596,-0.01390589421898,-0.05032077717131,0.00651420667831,0.0234789740702,-0.00881362733839],[0.30296907319327,-1.61273165137247,-0.22613988682123,1.0797749225997,-0.08587323730772,-0.2565625775407,0.03282930172664,-0.1627671912044,-0.00915702933434,-0.22638893773906,-0.02364141202522,0.39120800788284,-0.00584456039913,-0.22138138954925,0.06276101321749,0.04500235387352,-0.00000828086748,0.02005851806501,0.00205861885564,0.00302439095741,-0.02950134983287],[0.33642304856132,-1.49858979367799,-0.2557224142557,0.87350271418188,-0.11828570177555,0.12205022308084,0.11921148675203,-0.80774944671438,-0.07834489609479,0.47854794562326,-0.0046997791438,-0.12453458140019,-0.0058950022444,-0.04067510197014,0.05724228140351,0.08333755284107,0.00832043980773,-0.04237348025746,-0.0163538138454,0.02977207319925,-0.0176017656815],[0.4491525660845,-0.62820619233671,-0.14351757464547,0.29661783706366,-0.22784394429749,-0.372563729424,-0.01419140100551,0.00213767857124,0.04078262797139,-0.42029820170918,-0.12398163381748,0.22199650564824,0.04097565135648,0.00613424350682,0.10478503600251,0.06747620744683,-0.01863887810927,0.05784820375801,-0.03193428438915,0.03222754072173,0.00541907748707],[0.56619470757641,-1.04800335126349,-0.75464456939302,0.29156311971249,0.1624213774223,-0.26806001042947,0.16744243493672,0.00819999645858,-0.18901604199609,0.45054734505008,0.3093178284183,-0.33032403314006,-0.27562961986224,0.0673936833311,0.00647310677246,-0.04784254229033,0.08647503780351,0.01639907836189,-0.0378898455484,0.01807364323573,-0.00588215443421],[0.58100494960553,-0.51035327095184,-0.53174909058578,-0.31863563325245,-0.14289799034253,-0.20256413484477,0.17520704835522,0.1472815413433,0.02377945217615,0.38952639978999,0.15558449135573,-0.23313271880868,-0.25344790059353,-0.05246019024463,0.01628462406333,-0.02505961724053,0.06920467763959,0.02442357316099,-0.03721611395801,0.01818801111503,-0.00749618797172],[0.53648789255105,-0.2504987195602,-0.42163034350696,-0.43193942311114,-0.00275953611929,-0.03424681017675,0.04267842219415,-0.04678328784242,-0.10214864179676,0.26408300200955,0.14590772289388,0.15113130533216,-0.02459864859345,-0.17556493366449,-0.11202315195388,-0.18823009262115,-0.04060034127,0.05477720428674,0.0478866554818,0.0470440968812,-0.02217936801134]],Ge=[[0.98621192462708,-1.97223372919527,-1.97242384925416,0.97261396931306,0.98621192462708],[0.98500175787242,-1.96977855582618,-1.97000351574484,0.9702284756635,0.98500175787242],[0.97938932735214,-1.95835380975398,-1.95877865470428,0.95920349965459,0.97938932735214],[0.97531843204928,-1.95002759149878,-1.95063686409857,0.95124613669835,0.97531843204928],[0.97316523498161,-1.94561023566527,-1.94633046996323,0.94705070426118,0.97316523498161],[0.96454515552826,-1.92783286977036,-1.92909031105652,0.93034775234268,0.96454515552826],[0.96009142950541,-1.91858953033784,-1.92018285901082,0.92177618768381,0.96009142950541],[0.95856916599601,-1.9154210807478,-1.91713833199203,0.91885558323625,0.95856916599601],[0.94597685600279,-1.88903307939452,-1.89195371200558,0.89487434461664,0.94597685600279]];this.InitGainAnalysis=function(Ze,Ke){return Le(Ze,Ke)==INIT_GAIN_ANALYSIS_OK?(Ze.linpre=MAX_ORDER,Ze.rinpre=MAX_ORDER,Ze.lstep=MAX_ORDER,Ze.rstep=MAX_ORDER,Ze.lout=MAX_ORDER,Ze.rout=MAX_ORDER,xe.fill(Ze.B,0),INIT_GAIN_ANALYSIS_OK):INIT_GAIN_ANALYSIS_ERROR},this.AnalyzeSamples=function(Ze,Ke,Qe,We,Ue,Je,$e){var es,ss,as,_s,ts,ns,is;if(0==Je)return GAIN_ANALYSIS_OK;switch(is=0,ts=Je,$e){case 1:We=Ke,Ue=Qe;break;case 2:break;default:return GAIN_ANALYSIS_ERROR;}for(Je<MAX_ORDER?(ye.arraycopy(Ke,Qe,Ze.linprebuf,MAX_ORDER,Je),ye.arraycopy(We,Ue,Ze.rinprebuf,MAX_ORDER,Je)):(ye.arraycopy(Ke,Qe,Ze.linprebuf,MAX_ORDER,MAX_ORDER),ye.arraycopy(We,Ue,Ze.rinprebuf,MAX_ORDER,MAX_ORDER));0<ts;){ns=ts>Ze.sampleWindow-Ze.totsamp?Ze.sampleWindow-Ze.totsamp:ts,is<MAX_ORDER?(es=Ze.linpre+is,ss=Ze.linprebuf,as=Ze.rinpre+is,_s=Ze.rinprebuf,ns>MAX_ORDER-is&&(ns=MAX_ORDER-is)):(es=Qe+is,ss=Ke,as=Ue+is,_s=We),Ve(ss,es,Ze.lstepbuf,Ze.lstep+Ze.totsamp,ns,ze[Ze.reqindex]),Ve(_s,as,Ze.rstepbuf,Ze.rstep+Ze.totsamp,ns,ze[Ze.reqindex]),Ie(Ze.lstepbuf,Ze.lstep+Ze.totsamp,Ze.loutbuf,Ze.lout+Ze.totsamp,ns,Ge[Ze.reqindex]),Ie(Ze.rstepbuf,Ze.rstep+Ze.totsamp,Ze.routbuf,Ze.rout+Ze.totsamp,ns,Ge[Ze.reqindex]),es=Ze.lout+Ze.totsamp,ss=Ze.loutbuf,as=Ze.rout+Ze.totsamp,_s=Ze.routbuf;for(var ls=ns%8;0!=ls--;)Ze.lsum+=je(ss[es++]),Ze.rsum+=je(_s[as++]);for(ls=ns/8;0!=ls--;)Ze.lsum+=je(ss[es+0])+je(ss[es+1])+je(ss[es+2])+je(ss[es+3])+je(ss[es+4])+je(ss[es+5])+je(ss[es+6])+je(ss[es+7]),es+=8,Ze.rsum+=je(_s[as+0])+je(_s[as+1])+je(_s[as+2])+je(_s[as+3])+je(_s[as+4])+je(_s[as+5])+je(_s[as+6])+je(_s[as+7]),as+=8;if(ts-=ns,is+=ns,Ze.totsamp+=ns,Ze.totsamp==Ze.sampleWindow){var rs=10*O.STEPS_per_dB*Math.log10(0.5*((Ze.lsum+Ze.rsum)/Ze.totsamp)+1e-37),os=0>=rs?0:0|rs;os>=Ze.A.length&&(os=Ze.A.length-1),Ze.A[os]++,Ze.lsum=Ze.rsum=0,ye.arraycopy(Ze.loutbuf,Ze.totsamp,Ze.loutbuf,0,MAX_ORDER),ye.arraycopy(Ze.routbuf,Ze.totsamp,Ze.routbuf,0,MAX_ORDER),ye.arraycopy(Ze.lstepbuf,Ze.totsamp,Ze.lstepbuf,0,MAX_ORDER),ye.arraycopy(Ze.rstepbuf,Ze.totsamp,Ze.rstepbuf,0,MAX_ORDER),Ze.totsamp=0}if(Ze.totsamp>Ze.sampleWindow)return GAIN_ANALYSIS_ERROR}return Je<MAX_ORDER?(ye.arraycopy(Ze.linprebuf,Je,Ze.linprebuf,0,MAX_ORDER-Je),ye.arraycopy(Ze.rinprebuf,Je,Ze.rinprebuf,0,MAX_ORDER-Je),ye.arraycopy(Ke,Qe,Ze.linprebuf,MAX_ORDER-Je,Je),ye.arraycopy(We,Ue,Ze.rinprebuf,MAX_ORDER-Je,Je)):(ye.arraycopy(Ke,Qe+Je-MAX_ORDER,Ze.linprebuf,0,MAX_ORDER),ye.arraycopy(We,Ue+Je-MAX_ORDER,Ze.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(Ze){for(var Ke=Ne(Ze.A,Ze.A.length),Qe=0;Qe<Ze.A.length;Qe++)Ze.B[Qe]+=Ze.A[Qe],Ze.A[Qe]=0;for(var Qe=0;Qe<MAX_ORDER;Qe++)Ze.linprebuf[Qe]=Ze.lstepbuf[Qe]=Ze.loutbuf[Qe]=Ze.rinprebuf[Qe]=Ze.rstepbuf[Qe]=Ze.routbuf[Qe]=0;return Ze.totsamp=0,Ze.lsum=Ze.rsum=0,Ke}}function X(){var Ve;this.setModules=function(Ie){Ve=Ie},this.ResvFrameBegin=function(Ie,Le){var je=Ie.internal_flags,Oe=je.l3_side,qe=Ve.getframebits(Ie),Ne;Le.bits=(qe-8*je.sideinfo_len)/je.mode_gr;var Xe=2048*je.mode_gr-8;320<Ie.brate?Ne=8*int(1e3*Ie.brate/(Ie.out_samplerate/1152)/8+.5):(Ne=11520,Ie.strict_ISO&&(Ne=8*int(3.2e5/(Ie.out_samplerate/1152)/8+.5))),je.ResvMax=Ne-qe,je.ResvMax>Xe&&(je.ResvMax=Xe),(0>je.ResvMax||Ie.disable_reservoir)&&(je.ResvMax=0);var De=Le.bits*je.mode_gr+Math.min(je.ResvSize,je.ResvMax);return De>Ne&&(De=Ne),Oe.resvDrain_pre=0,null!=je.pinfo&&(je.pinfo.mean_bits=Le.bits/2,je.pinfo.resvsize=je.ResvSize),De},this.ResvMaxBits=function(Ie,Le,je,Ne){var Oe=Ie.internal_flags,Xe=Oe.ResvSize,De=Oe.ResvMax,qe;0!=Ne&&(Xe+=Le),0!=(1&Oe.substep_shaping)&&(De*=0.9),je.bits=Le,10*Xe>9*De?(qe=Xe-9*De/10,je.bits+=qe,Oe.substep_shaping|=128):(qe=0,Oe.substep_shaping&=127,!Ie.disable_reservoir&&0==(1&Oe.substep_shaping)&&(je.bits-=.1*Le));var Ye=Xe<6*Oe.ResvMax/10?Xe:6*Oe.ResvMax/10;return Ye-=qe,0>Ye&&(Ye=0),Ye},this.ResvAdjust=function(Ie,Le){Ie.ResvSize-=Le.part2_3_length+Le.part2_length},this.ResvFrameEnd=function(Ie,Le){var je,Ne=Ie.l3_side;Ie.ResvSize+=Le*Ie.mode_gr;var Oe=0;Ne.resvDrain_post=0,Ne.resvDrain_pre=0,0!=(je=Ie.ResvSize%8)&&(Oe+=je),je=Ie.ResvSize-Oe-Ie.ResvMax,0<je&&(Oe+=je);{var qe=Math.min(8*Ne.main_data_begin,Oe)/8;Ne.resvDrain_pre+=8*qe,Oe-=8*qe,Ie.ResvSize-=8*qe,Ne.main_data_begin-=qe}Ne.resvDrain_post+=Oe,Ie.ResvSize-=Oe}}function D(){function Ve(ns){this.bits=0|ns}function Ie(ns,is,ls,rs,os,ps){var ms=(1-0.4054)/is;for(ns>>=1;0!=ns--;)os[ps++]=ms>ls[rs++]?0:1,os[ps++]=ms>ls[rs++]?0:1}function Le(ns,is,ls,rs,os,ps){ns>>=1;var ms=ns%2;for(ns>>=1;0!=ns--;){var hs,ds,us,gs,Ss,Bs,Rs,As;hs=ls[rs++]*is,ds=ls[rs++]*is,Ss=0|hs,us=ls[rs++]*is,Bs=0|ds,gs=ls[rs++]*is,Rs=0|us,hs+=Ze.adj43[Ss],As=0|gs,ds+=Ze.adj43[Bs],os[ps++]=0|hs,us+=Ze.adj43[Rs],os[ps++]=0|ds,gs+=Ze.adj43[As],os[ps++]=0|us,os[ps++]=0|gs}if(0!=ms){var hs,ds,Ss,Bs;hs=ls[rs++]*is,ds=ls[rs++]*is,Ss=0|hs,Bs=0|ds,hs+=Ze.adj43[Ss],ds+=Ze.adj43[Bs],os[ps++]=0|hs,os[ps++]=0|ds}}function je(ns,is,ls,rs,os){var ps,ms,hs=0,ds,us=0,gs=0,Ss=0,Bs=is,Rs=0,As=Bs,ks=0,Ts=ns,xs=0;for(ds=null!=os&&rs.global_gain==os.global_gain,ms=rs.block_type==ne.SHORT_TYPE?38:21,ps=0;ps<=ms;ps++){var ys=-1;if((ds||rs.block_type==ne.NORM_TYPE)&&(ys=rs.global_gain-(rs.scalefac[ps]+(0==rs.preflag?0:Ze.pretab[ps])<<rs.scalefac_scale+1)-8*rs.subblock_gain[rs.window[ps]]),ds&&os.step[ps]==ys)0!=us&&(Le(us,ls,Ts,xs,As,ks),us=0),0!=gs&&(Ie(gs,ls,Ts,xs,As,ks),gs=0);else{var Es=rs.width[ps];if(hs+rs.width[ps]>rs.max_nonzero_coeff){var vs;vs=rs.max_nonzero_coeff-hs+1,xe.fill(is,rs.max_nonzero_coeff,576,0),Es=vs,0>Es&&(Es=0),ps=ms+1}if(0==us&&0==gs&&(As=Bs,ks=Rs,Ts=ns,xs=Ss),null!=os&&0<os.sfb_count1&&ps>=os.sfb_count1&&0<os.step[ps]&&ys>=os.step[ps]?(0!=us&&(Le(us,ls,Ts,xs,As,ks),us=0,As=Bs,ks=Rs,Ts=ns,xs=Ss),gs+=Es):(0!=gs&&(Ie(gs,ls,Ts,xs,As,ks),gs=0,As=Bs,ks=Rs,Ts=ns,xs=Ss),us+=Es),0>=Es){0!=gs&&(Ie(gs,ls,Ts,xs,As,ks),gs=0),0!=us&&(Le(us,ls,Ts,xs,As,ks),us=0);break}}ps<=ms&&(Rs+=rs.width[ps],Ss+=rs.width[ps],hs+=rs.width[ps])}0!=us&&(Le(us,ls,Ts,xs,As,ks),us=0),0!=gs&&(Ie(gs,ls,Ts,xs,As,ks),gs=0)}function Ne(ns,is,ls){var rs=0,os=0;do{var ps=ns[is++],ms=ns[is++];rs<ps&&(rs=ps),os<ms&&(os=ms)}while(is<ls);return rs<os&&(rs=os),rs}function Oe(ns,is,ls,rs,os,ps){var ms=65536*we.ht[rs].xlen+we.ht[os].xlen,hs=0,ds;do{var us=ns[is++],gs=ns[is++];0!=us&&(14<us&&(us=15,hs+=ms),us*=16),0!=gs&&(14<gs&&(gs=15,hs+=ms),us+=gs),hs+=we.largetbl[us]}while(is<ls);return ds=65535&hs,hs>>=16,hs>ds&&(hs=ds,rs=os),ps.bits+=hs,rs}function qe(ns,is,ls,rs){var os=0,ps=we.ht[1].hlen;do{var ms=2*ns[is+0]+ns[is+1];is+=2,os+=ps[ms]}while(is<ls);return rs.bits+=os,1}function Xe(ns,is,ls,rs,os){var ps=0,hs=we.ht[rs].xlen,ms,ds;ds=2==rs?we.table23:we.table56;do{var us=ns[is+0]*hs+ns[is+1];is+=2,ps+=ds[us]}while(is<ls);return ms=65535&ps,ps>>=16,ps>ms&&(ps=ms,rs++),os.bits+=ps,rs}function De(ns,is,ls,rs,os){var ps=0,ms=0,hs=0,ds=we.ht[rs].xlen,us=we.ht[rs].hlen,gs=we.ht[rs+1].hlen,Ss=we.ht[rs+2].hlen;do{var Bs=ns[is+0]*ds+ns[is+1];is+=2,ps+=us[Bs],ms+=gs[Bs],hs+=Ss[Bs]}while(is<ls);var Rs=rs;return ps>ms&&(ps=ms,Rs++),ps>hs&&(ps=hs,Rs=rs+2),os.bits+=ps,Rs}function Ye(ns,is,ls,rs){var os=Ne(ns,is,ls);switch(os){case 0:return os;case 1:return qe(ns,is,ls,rs);case 2:case 3:return Xe(ns,is,ls,Qe[os-1],rs);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return De(ns,is,ls,Qe[os-1],rs);default:if(os>$.IXMAX_VAL)return rs.bits=$.LARGE_BITS,-1;os-=15;var ps;for(ps=24;32>ps&&!(we.ht[ps].linmax>=os);ps++);var ms;for(ms=ps-8;24>ms&&!(we.ht[ms].linmax>=os);ms++);return Oe(ns,is,ls,ms,ps,rs);}}function Ce(ns,is,ls,rs,os,ps,ms){for(var hs=is.big_values,ds=0;ds<=22;ds++)rs[ds]=$.LARGE_BITS;for(var ds=0,us;16>ds&&(us=ns.scalefac_band.l[ds+1],!(us>=hs));ds++){var gs=0,Ss=new Ve(gs),Bs=Ye(ls,0,us,Ss);gs=Ss.bits;for(var Rs=0,As,ks;8>Rs&&(As=ns.scalefac_band.l[ds+Rs+2],!(As>=hs));Rs++){ks=gs,Ss=new Ve(ks);var Ts=Ye(ls,us,As,Ss);ks=Ss.bits,rs[ds+Rs]>ks&&(rs[ds+Rs]=ks,os[ds+Rs]=ds,ps[ds+Rs]=Bs,ms[ds+Rs]=Ts)}}}function Fe(ns,is,ls,rs,os,ps,ms,hs){for(var ds=is.big_values,us=2,gs,Ss;us<ne.SBMAX_l+1&&(gs=ns.scalefac_band.l[us],!(gs>=ds))&&(Ss=os[us-2]+is.count1bits,!(ls.part2_3_length<=Ss));us++){var Bs=new Ve(Ss),Rs=Ye(rs,gs,ds,Bs);Ss=Bs.bits,ls.part2_3_length<=Ss||(ls.assign(is),ls.part2_3_length=Ss,ls.region0_count=ps[us-2],ls.region1_count=us-2-ps[us-2],ls.table_select[0]=ms[us-2],ls.table_select[1]=hs[us-2],ls.table_select[2]=Rs)}}function ze(ns,is){for(var rs=is.tt[1][ns],os=is.tt[0][ns],ps=0,ls;ps<we.scfsi_band.length-1;ps++){for(ls=we.scfsi_band[ps];ls<we.scfsi_band[ps+1]&&!(os.scalefac[ls]!=rs.scalefac[ls]&&0<=rs.scalefac[ls]);ls++);if(ls==we.scfsi_band[ps+1]){for(ls=we.scfsi_band[ps];ls<we.scfsi_band[ps+1];ls++)rs.scalefac[ls]=-1;is.scfsi[ns][ps]=1}}var ms=0,hs=0;for(ls=0;11>ls;ls++)-1!=rs.scalefac[ls]&&(hs++,ms<rs.scalefac[ls]&&(ms=rs.scalefac[ls]));for(var ds=0,us=0;ls<ne.SBPSY_l;ls++)-1!=rs.scalefac[ls]&&(us++,ds<rs.scalefac[ls]&&(ds=rs.scalefac[ls]));for(var ps=0;16>ps;ps++)if(ms<We[ps]&&ds<Ue[ps]){var gs=Je[ps]*hs+$e[ps]*us;rs.part2_length>gs&&(rs.part2_length=gs,rs.scalefac_compress=ps)}}var Ze=null;this.qupvt=null,this.setModules=function(ns){this.qupvt=ns,Ze=ns};var Ke=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]],Qe=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];this.noquant_count_bits=function(ns,is,ls){var rs=is.l3_enc,os=Math.min(576,is.max_nonzero_coeff+2>>1<<1);for(null!=ls&&(ls.sfb_count1=0);1<os&&0==(rs[os-1]|rs[os-2]);os-=2);is.count1=os;for(var ps=0,ms=0;3<os;os-=4){var hs;if(1<(2147483647&(rs[os-1]|rs[os-2]|rs[os-3]|rs[os-4])))break;hs=2*(2*(2*rs[os-4]+rs[os-3])+rs[os-2])+rs[os-1],ps+=we.t32l[hs],ms+=we.t33l[hs]}var ds=ps;if(is.count1table_select=0,ps>ms&&(ds=ms,is.count1table_select=1),is.count1bits=ds,is.big_values=os,0==os)return ds;if(is.block_type==ne.SHORT_TYPE)ps=3*ns.scalefac_band.s[3],ps>is.big_values&&(ps=is.big_values),ms=is.big_values;else if(is.block_type!=ne.NORM_TYPE)is.region0_count=7,is.region1_count=ne.SBMAX_l-1-7-1,ps=ns.scalefac_band.l[8],ms=os,ps>ms&&(ps=ms);else if(ps=is.region0_count=ns.bv_scf[os-2],ms=is.region1_count=ns.bv_scf[os-1],ms=ns.scalefac_band.l[ps+ms+2],ps=ns.scalefac_band.l[ps+1],ms<os){var us=new Ve(ds);is.table_select[2]=Ye(rs,ms,os,us),ds=us.bits}if(ps=Math.min(ps,os),ms=Math.min(ms,os),0<ps){var us=new Ve(ds);is.table_select[0]=Ye(rs,0,ps,us),ds=us.bits}if(ps<ms){var us=new Ve(ds);is.table_select[1]=Ye(rs,ps,ms,us),ds=us.bits}if(2==ns.use_best_huffman&&(is.part2_3_length=ds,best_huffman_divide(ns,is),ds=is.part2_3_length),null!=ls&&is.block_type==ne.NORM_TYPE){for(var gs=0;ns.scalefac_band.l[gs]<is.big_values;)gs++;ls.sfb_count1=gs}return ds},this.count_bits=function(ns,is,ls,rs){var os=ls.l3_enc,ps=$.IXMAX_VAL/Ze.IPOW20(ls.global_gain);if(ls.xrpow_max>ps)return $.LARGE_BITS;if(je(is,os,Ze.IPOW20(ls.global_gain),ls,rs),0!=(2&ns.substep_shaping))for(var ms=0,hs=ls.global_gain+ls.scalefac_scale,ds=0.634521682242439/Ze.IPOW20(hs),us=0,gs;us<ls.sfbmax;us++)if(gs=ls.width[us],0==ns.pseudohalf[us])ms+=gs;else{var Ss;for(Ss=ms,ms+=gs;Ss<ms;++Ss)os[Ss]=is[Ss]>=ds?os[Ss]:0}return this.noquant_count_bits(ns,ls,rs)},this.best_huffman_divide=function(ns,is){var ls=new se,rs=is.l3_enc,os=S(23),ps=S(23),ms=S(23),hs=S(23);if(is.block_type!=ne.SHORT_TYPE||1!=ns.mode_gr){ls.assign(is),is.block_type==ne.NORM_TYPE&&(Ce(ns,is,rs,os,ps,ms,hs),Fe(ns,ls,is,rs,os,ps,ms,hs));var ds=ls.big_values;if(!(0==ds||1<(rs[ds-2]|rs[ds-1]))&&(ds=is.count1+2,!(576<ds))){ls.assign(is),ls.count1=ds;for(var us=0,gs=0,Ss;ds>ls.big_values;ds-=4)Ss=2*(2*(2*rs[ds-4]+rs[ds-3])+rs[ds-2])+rs[ds-1],us+=we.t32l[Ss],gs+=we.t33l[Ss];if(ls.big_values=ds,ls.count1table_select=0,us>gs&&(us=gs,ls.count1table_select=1),ls.count1bits=us,ls.block_type==ne.NORM_TYPE)Fe(ns,ls,is,rs,os,ps,ms,hs);else{if(ls.part2_3_length=us,us=ns.scalefac_band.l[8],us>ds&&(us=ds),0<us){var Bs=new Ve(ls.part2_3_length);ls.table_select[0]=Ye(rs,0,us,Bs),ls.part2_3_length=Bs.bits}if(ds>us){var Bs=new Ve(ls.part2_3_length);ls.table_select[1]=Ye(rs,us,ds,Bs),ls.part2_3_length=Bs.bits}is.part2_3_length>ls.part2_3_length&&is.assign(ls)}}}};var We=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],Ue=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],Je=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],$e=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];D.slen1_tab=Je,D.slen2_tab=$e,this.best_scalefac_store=function(ns,is,ls,rs){var os=rs.tt[is][ls],ps,ms,hs,ds,us=0;for(hs=0,ps=0;ps<os.sfbmax;ps++){var gs=os.width[ps];for(hs+=gs,ds=-gs;0>ds&&!(0!=os.l3_enc[ds+hs]);ds++);0==ds&&(os.scalefac[ps]=us=-2)}if(0==os.scalefac_scale&&0==os.preflag){var Ss=0;for(ps=0;ps<os.sfbmax;ps++)0<os.scalefac[ps]&&(Ss|=os.scalefac[ps]);if(0==(1&Ss)&&0!=Ss){for(ps=0;ps<os.sfbmax;ps++)0<os.scalefac[ps]&&(os.scalefac[ps]>>=1);os.scalefac_scale=us=1}}if(0==os.preflag&&os.block_type!=ne.SHORT_TYPE&&2==ns.mode_gr){for(ps=11;ps<ne.SBPSY_l&&!(os.scalefac[ps]<Ze.pretab[ps]&&-2!=os.scalefac[ps]);ps++);if(ps==ne.SBPSY_l){for(ps=11;ps<ne.SBPSY_l;ps++)0<os.scalefac[ps]&&(os.scalefac[ps]-=Ze.pretab[ps]);os.preflag=us=1}}for(ms=0;4>ms;ms++)rs.scfsi[ls][ms]=0;for(2==ns.mode_gr&&1==is&&rs.tt[0][ls].block_type!=ne.SHORT_TYPE&&rs.tt[1][ls].block_type!=ne.SHORT_TYPE&&(ze(ls,rs),us=0),ps=0;ps<os.sfbmax;ps++)-2==os.scalefac[ps]&&(os.scalefac[ps]=0);0!=us&&(2==ns.mode_gr?this.scale_bitcount(os):this.scale_bitcount_lsf(ns,os))};var es=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],ss=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],as=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(ns){var rs=0,os=0,is,ls,ps,ms=ns.scalefac;if(ns.block_type==ne.SHORT_TYPE)ps=es,0!=ns.mixed_block_flag&&(ps=ss);else if(ps=as,0==ns.preflag){for(ls=11;ls<ne.SBPSY_l&&!(ms[ls]<Ze.pretab[ls]);ls++);if(ls==ne.SBPSY_l)for(ns.preflag=1,ls=11;ls<ne.SBPSY_l;ls++)ms[ls]-=Ze.pretab[ls]}for(ls=0;ls<ns.sfbdivide;ls++)rs<ms[ls]&&(rs=ms[ls]);for(;ls<ns.sfbmax;ls++)os<ms[ls]&&(os=ms[ls]);for(ns.part2_length=$.LARGE_BITS,is=0;16>is;is++)rs<We[is]&&os<Ue[is]&&ns.part2_length>ps[is]&&(ns.part2_length=ps[is],ns.scalefac_compress=is);return ns.part2_length==$.LARGE_BITS};var _s=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(ns,is){var ls,rs,os,ps,ms,hs,ds,us,gs=S(4),Ss=is.scalefac;for(ls=0==is.preflag?0:2,ds=0;4>ds;ds++)gs[ds]=0;if(is.block_type==ne.SHORT_TYPE){rs=1;var Bs=Ze.nr_of_sfb_block[ls][rs];for(us=0,os=0;4>os;os++)for(ps=Bs[os]/3,ds=0;ds<ps;ds++,us++)for(ms=0;3>ms;ms++)Ss[3*us+ms]>gs[os]&&(gs[os]=Ss[3*us+ms])}else{rs=0;var Bs=Ze.nr_of_sfb_block[ls][rs];for(us=0,os=0;4>os;os++)for(ps=Bs[os],ds=0;ds<ps;ds++,us++)Ss[us]>gs[os]&&(gs[os]=Ss[us])}for(hs=!1,os=0;4>os;os++)gs[os]>_s[ls][os]&&(hs=!0);if(!hs){var Rs,As,ks,Ts;for(is.sfb_partition_table=Ze.nr_of_sfb_block[ls][rs],os=0;4>os;os++)is.slen[os]=ts[gs[os]];switch(Rs=is.slen[0],As=is.slen[1],ks=is.slen[2],Ts=is.slen[3],ls){case 0:is.scalefac_compress=(5*Rs+As<<4)+(ks<<2)+Ts;break;case 1:is.scalefac_compress=400+(5*Rs+As<<2)+ks;break;case 2:is.scalefac_compress=500+3*Rs+As;break;default:ye.err.printf("intensity stereo not implemented yet\n");}}if(!hs)for(is.part2_length=0,os=0;4>os;os++)is.part2_length+=is.slen[os]*is.sfb_partition_table[os];return hs};var ts=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(ns){for(var is=2;576>=is;is+=2){for(var ls=0,rs;ns.scalefac_band.l[++ls]<is;);for(rs=Ke[ls][0];ns.scalefac_band.l[rs+1]>is;)rs--;for(0>rs&&(rs=Ke[ls][0]),ns.bv_scf[is-2]=rs,rs=Ke[ls][1];ns.scalefac_band.l[rs+ns.bv_scf[is-2]+2]>is;)rs--;0>rs&&(rs=Ke[ls][1]),ns.bv_scf[is-1]=rs}}}function Y(){function Ve(ts){ye.arraycopy(ts.header[ts.w_ptr].buf,0,es,as,ts.sideinfo_len),as+=ts.sideinfo_len,ss+=8*ts.sideinfo_len,ts.w_ptr=ts.w_ptr+1&ce.MAX_HEADER_BUF-1}function Ie(ts,ns,is){for(;0<is;){var ls;0==_s&&(_s=8,as++,ts.header[ts.w_ptr].write_timing==ss&&Ve(ts),es[as]=0),ls=Math.min(is,_s),is-=ls,_s-=ls,es[as]|=ns>>is<<_s,ss+=ls}}function Le(ts,ns,is){for(;0<is;){var ls;0==_s&&(_s=8,as++,es[as]=0),ls=Math.min(is,_s),is-=ls,_s-=ls,es[as]|=ns>>is<<_s,ss+=ls}}function je(ts,ns){var is=ts.internal_flags,ls;if(8<=ns&&(Ie(is,76,8),ns-=8),8<=ns&&(Ie(is,65,8),ns-=8),8<=ns&&(Ie(is,77,8),ns-=8),8<=ns&&(Ie(is,69,8),ns-=8),32<=ns){var rs=Je.getLameShortVersion();if(32<=ns)for(ls=0;ls<rs.length&&8<=ns;++ls)ns-=8,Ie(is,rs.charAt(ls),8)}for(;1<=ns;ns-=1)Ie(is,is.ancillary_flag,1),is.ancillary_flag^=ts.disable_reservoir?0:1}function Ne(ts,ns,is){for(var ls=ts.header[ts.h_ptr].ptr,rs;0<is;)rs=Math.min(is,8-(7&ls)),is-=rs,ts.header[ts.h_ptr].buf[ls>>3]|=ns>>is<<8-(7&ls)-rs,ls+=rs;ts.header[ts.h_ptr].ptr=ls}function Oe(ts,ns){ts<<=8;for(var is=0;8>is;is++)ts<<=1,ns<<=1,0!=(65536&(ns^ts))&&(ns^=32773);return ns}function qe(ts,ns){var is=ts.internal_flags,ls,rs,os;if(ls=is.l3_side,is.header[is.h_ptr].ptr=0,xe.fill(is.header[is.h_ptr].buf,0,is.sideinfo_len,0),16000>ts.out_samplerate?Ne(is,4094,12):Ne(is,4095,12),Ne(is,ts.version,1),Ne(is,1,2),Ne(is,ts.error_protection?0:1,1),Ne(is,is.bitrate_index,4),Ne(is,is.samplerate_index,2),Ne(is,is.padding,1),Ne(is,ts.extension,1),Ne(is,ts.mode.ordinal(),2),Ne(is,is.mode_ext,2),Ne(is,ts.copyright,1),Ne(is,ts.original,1),Ne(is,ts.emphasis,2),ts.error_protection&&Ne(is,0,16),1==ts.version){for(Ne(is,ls.main_data_begin,9),2==is.channels_out?Ne(is,ls.private_bits,3):Ne(is,ls.private_bits,5),os=0;os<is.channels_out;os++){var ps;for(ps=0;4>ps;ps++)Ne(is,ls.scfsi[os][ps],1)}for(rs=0;2>rs;rs++)for(os=0;os<is.channels_out;os++){var ms=ls.tt[rs][os];Ne(is,ms.part2_3_length+ms.part2_length,12),Ne(is,ms.big_values/2,9),Ne(is,ms.global_gain,8),Ne(is,ms.scalefac_compress,4),ms.block_type==ne.NORM_TYPE?(Ne(is,0,1),14==ms.table_select[0]&&(ms.table_select[0]=16),Ne(is,ms.table_select[0],5),14==ms.table_select[1]&&(ms.table_select[1]=16),Ne(is,ms.table_select[1],5),14==ms.table_select[2]&&(ms.table_select[2]=16),Ne(is,ms.table_select[2],5),Ne(is,ms.region0_count,4),Ne(is,ms.region1_count,3)):(Ne(is,1,1),Ne(is,ms.block_type,2),Ne(is,ms.mixed_block_flag,1),14==ms.table_select[0]&&(ms.table_select[0]=16),Ne(is,ms.table_select[0],5),14==ms.table_select[1]&&(ms.table_select[1]=16),Ne(is,ms.table_select[1],5),Ne(is,ms.subblock_gain[0],3),Ne(is,ms.subblock_gain[1],3),Ne(is,ms.subblock_gain[2],3)),Ne(is,ms.preflag,1),Ne(is,ms.scalefac_scale,1),Ne(is,ms.count1table_select,1)}}else for(Ne(is,ls.main_data_begin,8),Ne(is,ls.private_bits,is.channels_out),rs=0,os=0;os<is.channels_out;os++){var ms=ls.tt[rs][os];Ne(is,ms.part2_3_length+ms.part2_length,12),Ne(is,ms.big_values/2,9),Ne(is,ms.global_gain,8),Ne(is,ms.scalefac_compress,9),ms.block_type==ne.NORM_TYPE?(Ne(is,0,1),14==ms.table_select[0]&&(ms.table_select[0]=16),Ne(is,ms.table_select[0],5),14==ms.table_select[1]&&(ms.table_select[1]=16),Ne(is,ms.table_select[1],5),14==ms.table_select[2]&&(ms.table_select[2]=16),Ne(is,ms.table_select[2],5),Ne(is,ms.region0_count,4),Ne(is,ms.region1_count,3)):(Ne(is,1,1),Ne(is,ms.block_type,2),Ne(is,ms.mixed_block_flag,1),14==ms.table_select[0]&&(ms.table_select[0]=16),Ne(is,ms.table_select[0],5),14==ms.table_select[1]&&(ms.table_select[1]=16),Ne(is,ms.table_select[1],5),Ne(is,ms.subblock_gain[0],3),Ne(is,ms.subblock_gain[1],3),Ne(is,ms.subblock_gain[2],3)),Ne(is,ms.scalefac_scale,1),Ne(is,ms.count1table_select,1)}ts.error_protection&&CRC_writeheader(is,is.header[is.h_ptr].buf);{var hs=is.h_ptr;is.h_ptr=hs+1&ce.MAX_HEADER_BUF-1,is.header[is.h_ptr].write_timing=is.header[hs].write_timing+ns,is.h_ptr==is.w_ptr&&ye.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}}function Xe(ts,ns){var is=we.ht[ns.count1table_select+32],ls,rs=0,os=ns.big_values,ps=ns.big_values;for(ls=(ns.count1-ns.big_values)/4;0<ls;--ls){var ms=0,hs=0,ds;ds=ns.l3_enc[os+0],0!=ds&&(hs+=8,0>ns.xr[ps+0]&&ms++),ds=ns.l3_enc[os+1],0!=ds&&(hs+=4,ms*=2,0>ns.xr[ps+1]&&ms++),ds=ns.l3_enc[os+2],0!=ds&&(hs+=2,ms*=2,0>ns.xr[ps+2]&&ms++),ds=ns.l3_enc[os+3],0!=ds&&(hs++,ms*=2,0>ns.xr[ps+3]&&ms++),os+=4,ps+=4,Ie(ts,ms+is.table[hs],is.hlen[hs]),rs+=is.hlen[hs]}return rs}function De(ts,ns,is,ls,rs){var os=we.ht[ns],ps=0;if(0==ns)return ps;for(var ms=is;ms<ls;ms+=2){var hs=0,ds=0,us=os.xlen,gs=os.xlen,Ss=0,Bs=rs.l3_enc[ms],Rs=rs.l3_enc[ms+1];if(0!=Bs&&(0>rs.xr[ms]&&Ss++,hs--),15<ns){if(14<Bs){var As=Bs-15;Ss|=As<<1,ds=us,Bs=15}if(14<Rs){var ks=Rs-15;Ss<<=us,Ss|=ks,ds+=us,Rs=15}gs=16}0!=Rs&&(Ss<<=1,0>rs.xr[ms+1]&&Ss++,hs--),Bs=Bs*gs+Rs,ds-=hs,hs+=os.hlen[Bs],Ie(ts,os.table[Bs],hs),Ie(ts,Ss,ds),ps+=hs+ds}return ps}function Ye(ts,ns){var is=3*ts.scalefac_band.s[3];is>ns.big_values&&(is=ns.big_values);var ls=De(ts,ns.table_select[0],0,is,ns);return ls+=De(ts,ns.table_select[1],is,ns.big_values,ns),ls}function Ce(ts,ns){var is,ls,rs,os;is=ns.big_values;var ps=ns.region0_count+1;return rs=ts.scalefac_band.l[ps],ps+=ns.region1_count+1,os=ts.scalefac_band.l[ps],rs>is&&(rs=is),os>is&&(os=is),ls=De(ts,ns.table_select[0],0,rs,ns),ls+=De(ts,ns.table_select[1],rs,os,ns),ls+=De(ts,ns.table_select[2],os,is,ns),ls}function Fe(ts){var os=0,ns,is,ls,rs,ps=ts.internal_flags,ms=ps.l3_side;if(1==ts.version)for(ns=0;2>ns;ns++)for(is=0;is<ps.channels_out;is++){var hs=ms.tt[ns][is],ds=D.slen1_tab[hs.scalefac_compress],us=D.slen2_tab[hs.scalefac_compress];for(rs=0,ls=0;ls<hs.sfbdivide;ls++)-1!=hs.scalefac[ls]&&(Ie(ps,hs.scalefac[ls],ds),rs+=ds);for(;ls<hs.sfbmax;ls++)-1!=hs.scalefac[ls]&&(Ie(ps,hs.scalefac[ls],us),rs+=us);rs+=hs.block_type==ne.SHORT_TYPE?Ye(ps,hs):Ce(ps,hs),rs+=Xe(ps,hs),os+=rs}else for(ns=0,is=0;is<ps.channels_out;is++){var hs=ms.tt[ns][is],Bs=0,gs,Ss;if(rs=0,ls=0,Ss=0,hs.block_type==ne.SHORT_TYPE){for(;4>Ss;Ss++){var Rs=hs.sfb_partition_table[Ss]/3,As=hs.slen[Ss];for(gs=0;gs<Rs;gs++,ls++)Ie(ps,Math.max(hs.scalefac[3*ls+0],0),As),Ie(ps,Math.max(hs.scalefac[3*ls+1],0),As),Ie(ps,Math.max(hs.scalefac[3*ls+2],0),As),Bs+=3*As}rs+=Ye(ps,hs)}else{for(;4>Ss;Ss++){var Rs=hs.sfb_partition_table[Ss],As=hs.slen[Ss];for(gs=0;gs<Rs;gs++,ls++)Ie(ps,Math.max(hs.scalefac[ls],0),As),Bs+=As}rs+=Ce(ps,hs)}rs+=Xe(ps,hs),os+=Bs+rs}return os}function ze(){this.total=0}function Ge(ts,ns){var is=ts.internal_flags,ls,rs,os,ps,ms;return ms=is.w_ptr,ps=is.h_ptr-1,-1==ps&&(ps=ce.MAX_HEADER_BUF-1),ls=is.header[ps].write_timing-ss,ns.total=ls,0<=ls&&(rs=1+ps-ms,ps<ms&&(rs=1+ps-ms+ce.MAX_HEADER_BUF),ls-=8*rs*is.sideinfo_len),os=Ze.getframebits(ts),ls+=os,ns.total+=os,0==ns.total%8?ns.total/=8:ns.total=1+ns.total/8,ns.total+=as+1,0>ls&&ye.err.println("strange error flushing buffer ... \n"),ls}var Ze=this,We=null,Ue=null,Je=null,$e=null;this.setModules=function(ts,ns,is,ls){We=ts,Ue=ns,Je=is,$e=ls};var es=null,ss=0,as=0,_s=0;this.getframebits=function(ts){var ns=ts.internal_flags,is;is=0==ns.bitrate_index?ts.brate:we.bitrate_table[ts.version][ns.bitrate_index];var ls=0|72000*(ts.version+1)*is/ts.out_samplerate+ns.padding;return 8*ls},this.CRC_writeheader=function(ts,ns){var is=65535;is=Oe(255&ns[2],is),is=Oe(255&ns[3],is);for(var ls=6;ls<ts.sideinfo_len;ls++)is=Oe(255&ns[ls],is);ns[4]=byte(is>>8),ns[5]=byte(255&is)},this.flush_bitstream=function(ts){var ns=ts.internal_flags,rs=ns.h_ptr-1,is,ls;if(-1==rs&&(rs=ce.MAX_HEADER_BUF-1),is=ns.l3_side,!(0>(ls=Ge(ts,new ze)))){if(je(ts,ls),ns.ResvSize=0,is.main_data_begin=0,ns.findReplayGain){var os=We.GetTitleGain(ns.rgdata);ns.RadioGain=0|Math.floor(10*os+0.5)}ns.findPeakSample&&(ns.noclipGainChange=0|Math.ceil(10*(20*Math.log10(ns.PeakSample/32767))),ns.noclipScale=0<ns.noclipGainChange?EQ(ts.scale,1)||EQ(ts.scale,0)?Math.floor(100*(32767/ns.PeakSample))/100:-1:-1)}},this.add_dummy_byte=function(ts,ns,is){for(var ls=ts.internal_flags,rs;0<is--;)for(Le(ls,ns,8),rs=0;rs<ce.MAX_HEADER_BUF;++rs)ls.header[rs].write_timing+=8},this.format_bitstream=function(ts){var ns=ts.internal_flags,is;is=ns.l3_side;var ls=this.getframebits(ts);je(ts,is.resvDrain_pre),qe(ts,ls);var rs=8*ns.sideinfo_len;if(rs+=Fe(ts),je(ts,is.resvDrain_post),rs+=is.resvDrain_post,is.main_data_begin+=(ls-rs)/8,Ge(ts,new ze)!=ns.ResvSize&&ye.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*is.main_data_begin!=ns.ResvSize&&(ye.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*is.main_data_begin,ns.ResvSize,is.resvDrain_post,is.resvDrain_pre,8*ns.sideinfo_len,rs-is.resvDrain_post-8*ns.sideinfo_len,rs,rs%8,ls),ye.err.println("This is a fatal error.  It has several possible causes:"),ye.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),ye.err.println(" 9%%  Your system is overclocked"),ye.err.println(" 1%%  bug in LAME encoding library"),ns.ResvSize=8*is.main_data_begin),1e9<ss){var os;for(os=0;os<ce.MAX_HEADER_BUF;++os)ns.header[os].write_timing-=ss;ss=0}return 0},this.copy_buffer=function(ts,ns,is,ls,rs){var os=as+1;if(0>=os)return 0;if(0!=ls&&os>ls)return-1;if(ye.arraycopy(es,0,ns,is,os),as=-1,_s=0,0!=rs){var ps=S(1);if(ps[0]=ts.nMusicCRC,$e.updateMusicCRC(ps,ns,is,os),ts.nMusicCRC=ps[0],0<os&&(ts.VBR_seek_table.nBytesWritten+=os),ts.decode_on_the_fly)for(var ms=T([2,1152]),hs=os,ds=-1,us;0!=ds;)if(ds=Ue.hip_decode1_unclipped(ts.hip,ns,is,hs,ms[0],ms[1]),hs=0,-1==ds&&(ds=0),0<ds){if(ts.findPeakSample){for(us=0;us<ds;us++)ms[0][us]>ts.PeakSample?ts.PeakSample=ms[0][us]:-ms[0][us]>ts.PeakSample&&(ts.PeakSample=-ms[0][us]);if(1<ts.channels_out)for(us=0;us<ds;us++)ms[1][us]>ts.PeakSample?ts.PeakSample=ms[1][us]:-ms[1][us]>ts.PeakSample&&(ts.PeakSample=-ms[1][us])}if(ts.findReplayGain&&We.AnalyzeSamples(ts.rgdata,ms[0],0,ms[1],0,ds,ts.channels_out)==O.GAIN_ANALYSIS_ERROR)return-6}}return os},this.init_bit_stream_w=function(ts){es=_(he.LAME_MAXMP3BUFFER),ts.h_ptr=ts.w_ptr=0,ts.header[ts.h_ptr].write_timing=0,as=-1,_s=0,ss=0}}function C(){function Ve(rs,os){if((rs.nVbrNumFrames++,rs.sum+=os,rs.seen++,!(rs.seen<rs.want))&&(rs.pos<rs.size&&(rs.bag[rs.pos]=rs.sum,rs.pos++,rs.seen=0),rs.pos==rs.size)){for(var ps=1;ps<rs.size;ps+=2)rs.bag[ps/2]=rs.bag[ps];rs.want*=2,rs.pos/=2}}function Ie(rs,os){if(!(0>=rs.pos))for(var ps=1;ps<Ue;++ps){var ms=ps/Ue,us=0|Math.floor(ms*rs.pos),hs,ds;us>rs.pos-1&&(us=rs.pos-1),hs=rs.bag[us],ds=rs.sum;var gs=0|256*hs/ds;255<gs&&(gs=255),os[ps]=255&gs}}function Le(rs,os){var ps=255&rs[os+0];return ps<<=8,ps|=255&rs[os+1],ps<<=8,ps|=255&rs[os+2],ps<<=8,ps|=255&rs[os+3],ps}function je(rs,os,ps){rs[os+0]=255&(255&ps>>24),rs[os+1]=255&(255&ps>>16),rs[os+2]=255&(255&ps>>8),rs[os+3]=255&(255&ps)}function Ne(rs,os,ps){rs[os+0]=255&(255&ps>>8),rs[os+1]=255&(255&ps)}function Oe(rs,os){return new String(rs,os,ns.length(),ts).equals(ns)||new String(rs,os,is.length(),ts).equals(is)}function qe(rs,os,ps){return 255&(rs<<os|ps&~(-1<<os))}function Xe(rs,os){var ps=rs.internal_flags;os[0]=qe(os[0],8,255),os[1]=qe(os[1],3,7),os[1]=qe(os[1],1,16000>rs.out_samplerate?0:1),os[1]=qe(os[1],1,rs.version),os[1]=qe(os[1],2,1),os[1]=qe(os[1],1,rs.error_protection?0:1),os[2]=qe(os[2],4,ps.bitrate_index),os[2]=qe(os[2],2,ps.samplerate_index),os[2]=qe(os[2],1,0),os[2]=qe(os[2],1,rs.extension),os[3]=qe(os[3],2,rs.mode.ordinal()),os[3]=qe(os[3],2,ps.mode_ext),os[3]=qe(os[3],1,rs.copyright),os[3]=qe(os[3],1,rs.original),os[3]=qe(os[3],2,rs.emphasis),os[0]=255;var ms=255&(241&os[1]),hs;hs=1==rs.version?ss:16000>rs.out_samplerate?_s:as,rs.VBR==V.vbr_off&&(hs=rs.brate);var ds;ds=rs.free_format?0:255&16*Fe.BitrateIndex(hs,rs.version,rs.out_samplerate),1==rs.version?(os[1]=255&(10|ms),ms=255&(13&os[2]),os[2]=255&(ds|ms)):(os[1]=255&(2|ms),ms=255&(13&os[2]),os[2]=255&(ds|ms))}function De(rs,os){var ps=os^rs;return os=os>>8^ls[255&ps],os}function Ye(rs,os,ps,ms,hs){var ds=rs.internal_flags,us=0,gs=rs.encoder_delay,Ss=rs.encoder_padding,Bs=100-10*rs.VBR_q-rs.quality,Rs=Ge.getLameVeryShortVersion(),xs=[1,5,3,2,4,0,3],ys=0|(255<rs.lowpassfreq/100+.5?255:rs.lowpassfreq/100+.5),Es=0,vs=0,Ps=rs.internal_flags.noise_shaping,ws=0,Hs=0,Vs=0,Is=0,Ls=0,js=0!=(1&rs.exp_nspsytune),Ns=0!=(2&rs.exp_nspsytune),Os=!1,qs=!1,Xs=rs.internal_flags.nogap_total,Ds=rs.internal_flags.nogap_current,Ys=rs.ATHtype,Cs=0,As,Ts,Fs;switch(rs.VBR){case vbr_abr:Fs=rs.VBR_mean_bitrate_kbps;break;case vbr_off:Fs=rs.brate;break;default:Fs=rs.VBR_min_bitrate_kbps;}switch(As=rs.VBR.ordinal()<xs.length?xs[rs.VBR.ordinal()]:0,Ts=16*0+As,ds.findReplayGain&&(510<ds.RadioGain&&(ds.RadioGain=510),-510>ds.RadioGain&&(ds.RadioGain=-510),vs=8192,vs|=3072,0<=ds.RadioGain?vs|=ds.RadioGain:(vs|=512,vs|=-ds.RadioGain)),ds.findPeakSample&&(Es=Math.abs(0|ds.PeakSample/32767*Math.pow(2,23)+.5)),-1!=Xs&&(0<Ds&&(qs=!0),Ds<Xs-1&&(Os=!0)),Cs=Ys+((js?1:0)<<4)+((Ns?1:0)<<5)+((Os?1:0)<<6)+((qs?1:0)<<7),0>Bs&&(Bs=0),rs.mode){case MONO:ws=0;break;case STEREO:ws=1;break;case DUAL_CHANNEL:ws=2;break;case JOINT_STEREO:ws=rs.force_ms?4:3;break;case NOT_SET:default:ws=7;}Vs=32000>=rs.in_samplerate?0:48000==rs.in_samplerate?2:48000<rs.in_samplerate?3:1,(rs.short_blocks==H.short_block_forced||rs.short_blocks==H.short_block_dispensed||-1==rs.lowpassfreq&&-1==rs.highpassfreq||rs.scale_left<rs.scale_right||rs.scale_left>rs.scale_right||rs.disable_reservoir&&320>rs.brate||rs.noATH||rs.ATHonly||0==Ys||32000>=rs.in_samplerate)&&(Hs=1),Is=Ps+(ws<<2)+(Hs<<5)+(Vs<<6),Ls=ds.nMusicCRC,je(ps,ms+us,Bs),us+=4;for(var zs=0;9>zs;zs++)ps[ms+us+zs]=255&Rs.charAt(zs);us+=9,ps[ms+us]=255&Ts,us++,ps[ms+us]=255&ys,us++,je(ps,ms+us,Es),us+=4,Ne(ps,ms+us,vs),us+=2,Ne(ps,ms+us,0),us+=2,ps[ms+us]=255&Cs,us++,ps[ms+us]=255<=Fs?255:255&Fs,us++,ps[ms+us]=255&gs>>4,ps[ms+us+1]=255&(gs<<4)+(Ss>>8),ps[ms+us+2]=255&Ss,us+=3,ps[ms+us]=255&Is,us++,ps[ms+us++]=0,Ne(ps,ms+us,rs.preset),us+=2,je(ps,ms+us,os),us+=4,Ne(ps,ms+us,Ls),us+=2;for(var Gs=0;Gs<us;Gs++)hs=De(ps[ms+Gs],hs);return Ne(ps,ms+us,hs),us+=2,us}function Ce(rs){rs.seek(0);var os=_(10);rs.readFully(os);var ps;return ps=new String(os,"ISO-8859-1").startsWith("ID3")?0:((127&os[6])<<21|(127&os[7])<<14|(127&os[8])<<7|127&os[9])+os.length,ps}var Fe,ze,Ge;this.setModules=function(rs,os,ps){Fe=rs,ze=os,Ge=ps};var Ze=1,Ke=2,Qe=4,We=8,Ue=C.NUMTOCENTRIES,Je=C.MAXFRAMESIZE,ss=128,as=64,_s=32,ts=null,ns="Xing",is="Info",ls=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8000,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16000,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32000,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.addVbrFrame=function(rs){var os=rs.internal_flags,ps=we.bitrate_table[rs.version][os.bitrate_index];Ve(os.VBR_seek_table,ps)},this.getVbrTag=function(rs){var os=new VBRTagData,ps=0;os.flags=0;var ms=1&rs[ps+1]>>3,hs=3&rs[ps+2]>>2,ds=3&rs[ps+3]>>6,us=15&rs[ps+2]>>4;if(us=we.bitrate_table[ms][us],os.samprate=14==rs[ps+1]>>4?we.samplerate_table[2][hs]:we.samplerate_table[ms][hs],ps+=0==ms?3==ds?13:21:3==ds?21:36,!Oe(rs,ps))return null;ps+=4,os.hId=ms;var gs=os.flags=Le(rs,ps);if(ps+=4,0!=(gs&Ze)&&(os.frames=Le(rs,ps),ps+=4),0!=(gs&Ke)&&(os.bytes=Le(rs,ps),ps+=4),0!=(gs&Qe)){if(null!=os.toc)for(var Ss=0;Ss<Ue;Ss++)os.toc[Ss]=rs[ps+Ss];ps+=Ue}os.vbrScale=-1,0!=(gs&We)&&(os.vbrScale=Le(rs,ps),ps+=4),os.headersize=72000*(ms+1)*us/os.samprate,ps+=21;var Bs=rs[ps+0]<<4;Bs+=rs[ps+1]>>4;var Rs=(15&rs[ps+1])<<8;return Rs+=255&rs[ps+2],(0>Bs||3e3<Bs)&&(Bs=-1),(0>Rs||3e3<Rs)&&(Rs=-1),os.encDelay=Bs,os.encPadding=Rs,os},this.InitVbrTag=function(rs){var os=rs.internal_flags,ps;ps=1==rs.version?ss:16000>rs.out_samplerate?_s:as,rs.VBR==V.vbr_off&&(ps=rs.brate);var ms=72000*(rs.version+1)*ps/rs.out_samplerate,hs=os.sideinfo_len+(Ue+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+4+2+2);if(os.VBR_seek_table.TotalFrameSize=ms,ms<hs||ms>Je)return void(rs.bWriteVbrTag=!1);os.VBR_seek_table.nVbrNumFrames=0,os.VBR_seek_table.nBytesWritten=0,os.VBR_seek_table.sum=0,os.VBR_seek_table.seen=0,os.VBR_seek_table.want=1,os.VBR_seek_table.pos=0,null==os.VBR_seek_table.bag&&(os.VBR_seek_table.bag=new int[400],os.VBR_seek_table.size=400);var ds=_(Je);Xe(rs,ds);for(var us=os.VBR_seek_table.TotalFrameSize,gs=0;gs<us;++gs)ze.add_dummy_byte(rs,255&ds[gs],1)},this.updateMusicCRC=function(rs,os,ps,ms){for(var hs=0;hs<ms;++hs)rs[0]=De(os[ps+hs],rs[0])},this.getLameTagFrame=function(rs,os){var ps=rs.internal_flags;if(!rs.bWriteVbrTag)return 0;if(ps.Class_ID!=he.LAME_ID)return 0;if(0>=ps.VBR_seek_table.pos)return 0;if(os.length<ps.VBR_seek_table.TotalFrameSize)return ps.VBR_seek_table.TotalFrameSize;xe.fill(os,0,ps.VBR_seek_table.TotalFrameSize,0),Xe(rs,os);var ms=_(Ue);if(rs.free_format)for(var hs=1;hs<Ue;++hs)ms[hs]=255&255*hs/100;else Ie(ps.VBR_seek_table,ms);var ds=ps.sideinfo_len;rs.error_protection&&(ds-=2),rs.VBR==V.vbr_off?(os[ds++]=255&is.charAt(0),os[ds++]=255&is.charAt(1),os[ds++]=255&is.charAt(2),os[ds++]=255&is.charAt(3)):(os[ds++]=255&ns.charAt(0),os[ds++]=255&ns.charAt(1),os[ds++]=255&ns.charAt(2),os[ds++]=255&ns.charAt(3)),je(os,ds,Ze+Ke+Qe+We),ds+=4,je(os,ds,ps.VBR_seek_table.nVbrNumFrames),ds+=4;var us=ps.VBR_seek_table.nBytesWritten+ps.VBR_seek_table.TotalFrameSize;je(os,ds,0|us),ds+=4,ye.arraycopy(ms,0,os,ds,ms.length),ds+=ms.length,rs.error_protection&&ze.CRC_writeheader(ps,os);for(var gs=0,hs=0;hs<ds;hs++)gs=De(os[hs],gs);return ds+=Ye(rs,us,os,ds,gs),ps.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(rs,os){var ps=rs.internal_flags;if(0>=ps.VBR_seek_table.pos)return-1;if(os.seek(os.length()),0==os.length())return-1;var ms=Ce(os);os.seek(ms);var hs=_(Je),ds=getLameTagFrame(rs,hs);return ds>hs.length?-1:1>ds?0:(os.write(hs,0,ds),0)}}function F(Ve,Ie,Le,je){this.xlen=Ve,this.linmax=Ie,this.table=Le,this.hlen=je}function z(Ve){this.bits=Ve}function G(){var Ve,Ie;this.setModules=function(Le,je){Ve=Le,Ie=je}}function Z(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function K(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=I.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function Q(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=B(ne.SBMAX_l),this.s=B(ne.SBMAX_s),this.psfb21=B(ne.PSFB21),this.psfb12=B(ne.PSFB12),this.cb_l=B(ne.CBANDS),this.cb_s=B(ne.CBANDS),this.eql_w=B(ne.BLKSIZE/2)}function W(){this.linprebuf=B(2*O.MAX_ORDER),this.linpre=0,this.lstepbuf=B(O.MAX_SAMPLES_PER_WINDOW+O.MAX_ORDER),this.lstep=0,this.loutbuf=B(O.MAX_SAMPLES_PER_WINDOW+O.MAX_ORDER),this.lout=0,this.rinprebuf=B(2*O.MAX_ORDER),this.rinpre=0,this.rstepbuf=B(O.MAX_SAMPLES_PER_WINDOW+O.MAX_ORDER),this.rstep=0,this.routbuf=B(O.MAX_SAMPLES_PER_WINDOW+O.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=S(0|O.STEPS_per_dB*O.MAX_dB),this.B=S(0|O.STEPS_per_dB*O.MAX_dB)}function U(Ve){this.quantize=Ve,this.iteration_loop=function(Le,je,Ne,Oe){var qe=Le.internal_flags,Xe=B(He.SFBMAX),De=B(576),Ye=S(2),Ce=0,Fe,ze=qe.l3_side,Ge=new z(Ce);this.quantize.rv.ResvFrameBegin(Le,Ge),Ce=Ge.bits;for(var Ze=0;Ze<qe.mode_gr;Ze++){Fe=this.quantize.qupvt.on_pe(Le,je,Ye,Ce,Ze,Ze),qe.mode_ext==ne.MPG_MD_MS_LR&&(this.quantize.ms_convert(qe.l3_side,Ze),this.quantize.qupvt.reduce_side(Ye,Ne[Ze],Ce,Fe));for(var Ke=0;Ke<qe.channels_out;Ke++){var Qe,We,Ue=ze.tt[Ze][Ke];Ue.block_type==ne.SHORT_TYPE?(Qe=0,We=qe.PSY.mask_adjust_short-Qe):(Qe=0,We=qe.PSY.mask_adjust-Qe),qe.masking_lower=Math.pow(10,0.1*We),this.quantize.init_outer_loop(qe,Ue),this.quantize.init_xrpow(qe,Ue,De)&&(this.quantize.qupvt.calc_xmin(Le,Oe[Ze][Ke],Ue,Xe),this.quantize.outer_loop(Le,Ue,Xe,De,Ke,Ye[Ke])),this.quantize.iteration_finish_one(qe,Ze,Ke)}}this.quantize.rv.ResvFrameEnd(qe,Ce)}}function J(){this.l=S(1+ne.SBMAX_l),this.s=S(1+ne.SBMAX_s),this.psfb21=S(1+ne.PSFB21),this.psfb12=S(1+ne.PSFB12);var Ne=this.l,Oe=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],ye.arraycopy(this.arrL,0,Ne,0,Math.min(this.arrL.length,this.l.length)),ye.arraycopy(this.arrS,0,Oe,0,Math.min(this.arrS.length,this.s.length)),ye.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),ye.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function $(){function Ve($e){return Qe[$e+$.Q_MAX2]}function Ie($e,es){var ss=Xe.ATHformula(es,$e);return ss-=100,ss=Math.pow(10,ss/10+$e.ATHlower),ss}function Le($e){for(var es=$e.internal_flags.ATH.l,ss=$e.internal_flags.ATH.psfb21,as=$e.internal_flags.ATH.s,_s=$e.internal_flags.ATH.psfb12,ts=$e.internal_flags,ns=$e.out_samplerate,is=0;is<ne.SBMAX_l;is++){var ls=ts.scalefac_band.l[is],rs=ts.scalefac_band.l[is+1];es[is]=ve.MAX_VALUE;for(var os=ls;os<rs;os++){var ps=os*ns/1152,ms=Ie($e,ps);es[is]=Math.min(es[is],ms)}}for(var is=0;is<ne.PSFB21;is++){var ls=ts.scalefac_band.psfb21[is],rs=ts.scalefac_band.psfb21[is+1];ss[is]=ve.MAX_VALUE;for(var os=ls;os<rs;os++){var ps=os*ns/1152,ms=Ie($e,ps);ss[is]=Math.min(ss[is],ms)}}for(var is=0;is<ne.SBMAX_s;is++){var ls=ts.scalefac_band.s[is],rs=ts.scalefac_band.s[is+1];as[is]=ve.MAX_VALUE;for(var os=ls;os<rs;os++){var ps=os*ns/384,ms=Ie($e,ps);as[is]=Math.min(as[is],ms)}as[is]*=ts.scalefac_band.s[is+1]-ts.scalefac_band.s[is]}for(var is=0;is<ne.PSFB12;is++){var ls=ts.scalefac_band.psfb12[is],rs=ts.scalefac_band.psfb12[is+1];_s[is]=ve.MAX_VALUE;for(var os=ls;os<rs;os++){var ps=os*ns/384,ms=Ie($e,ps);_s[is]=Math.min(_s[is],ms)}_s[is]*=ts.scalefac_band.s[13]-ts.scalefac_band.s[12]}if($e.noATH){for(var is=0;is<ne.SBMAX_l;is++)es[is]=1e-20;for(var is=0;is<ne.PSFB21;is++)ss[is]=1e-20;for(var is=0;is<ne.SBMAX_s;is++)as[is]=1e-20;for(var is=0;is<ne.PSFB12;is++)_s[is]=1e-20}ts.ATH.floor=10*Math.log10(Ie($e,-1))}function je($e){this.s=$e}var Oe=null,qe=null,Xe=null;this.setModules=function($e,es,ss){Oe=$e,qe=es,Xe=ss},this.IPOW20=function($e){return We[$e]};var De=2.220446049250313e-16,Ye=$.IXMAX_VAL,Ce=Ye+2,Fe=$.Q_MAX,ze=$.Q_MAX2,Ge=$.LARGE_BITS;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var Ke=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=Ke,this.sfBandIndex=[new J([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var Qe=B(Fe+ze+1),We=B(Fe),Ue=B(Ce),Je=B(Ce);this.adj43=Je,this.iteration_init=function($e){var es=$e.internal_flags,ss=es.l3_side,as;if(0==es.iteration_init_init){for(es.iteration_init_init=1,ss.main_data_begin=0,Le($e),Ue[0]=0,as=1;as<Ce;as++)Ue[as]=Math.pow(as,4/3);for(as=0;as<Ce-1;as++)Je[as]=as+1-Math.pow(0.5*(Ue[as]+Ue[as+1]),0.75);for(Je[as]=0.5,as=0;as<Fe;as++)We[as]=Math.pow(2,-0.1875*(as-210));for(as=0;as<=Fe+ze;as++)Qe[as]=Math.pow(2,0.25*(as-210-ze));Oe.huffman_init(es);{var _s,ts,ns,is;for(as=63&$e.exp_nspsytune>>2,32<=as&&(as-=64),_s=Math.pow(10,as/4/10),as=63&$e.exp_nspsytune>>8,32<=as&&(as-=64),ts=Math.pow(10,as/4/10),as=63&$e.exp_nspsytune>>14,32<=as&&(as-=64),ns=Math.pow(10,as/4/10),as=63&$e.exp_nspsytune>>20,32<=as&&(as-=64),is=ns*Math.pow(10,as/4/10),as=0;as<ne.SBMAX_l;as++){var ls;ls=6>=as?_s:13>=as?ts:20>=as?ns:is,es.nsPsy.longfact[as]=ls}for(as=0;as<ne.SBMAX_s;as++){var ls;ls=5>=as?_s:10>=as?ts:11>=as?ns:is,es.nsPsy.shortfact[as]=ls}}}},this.on_pe=function($e,es,ss,as,_s,ts){var ns=$e.internal_flags,is=0,ls,rs=S(2),os,ps=new z(is),ms=qe.ResvMaxBits($e,as,ps,ts);is=ps.bits;var hs=is+ms;for(hs>ce.MAX_BITS_PER_GRANULE&&(hs=ce.MAX_BITS_PER_GRANULE),ls=0,os=0;os<ns.channels_out;++os)ss[os]=Math.min(ce.MAX_BITS_PER_CHANNEL,is/ns.channels_out),rs[os]=0|ss[os]*es[_s][os]/700-ss[os],rs[os]>3*as/4&&(rs[os]=3*as/4),0>rs[os]&&(rs[os]=0),rs[os]+ss[os]>ce.MAX_BITS_PER_CHANNEL&&(rs[os]=Math.max(0,ce.MAX_BITS_PER_CHANNEL-ss[os])),ls+=rs[os];if(ls>ms)for(os=0;os<ns.channels_out;++os)rs[os]=ms*rs[os]/ls;for(os=0;os<ns.channels_out;++os)ss[os]+=rs[os],ms-=rs[os];for(ls=0,os=0;os<ns.channels_out;++os)ls+=ss[os];if(ls>ce.MAX_BITS_PER_GRANULE){var ds=0;for(os=0;os<ns.channels_out;++os)ss[os]*=ce.MAX_BITS_PER_GRANULE,ss[os]/=ls,ds+=ss[os]}return hs},this.reduce_side=function($e,es,ss,as){var _s=.33*(.5-es)/.5;0>_s&&(_s=0),.5<_s&&(_s=.5);var ts=0|.5*_s*($e[0]+$e[1]);ts>ce.MAX_BITS_PER_CHANNEL-$e[0]&&(ts=ce.MAX_BITS_PER_CHANNEL-$e[0]),0>ts&&(ts=0),125<=$e[1]&&(125<$e[1]-ts?($e[0]<ss&&($e[0]+=ts),$e[1]-=ts):($e[0]+=$e[1]-125,$e[1]=125)),ts=$e[0]+$e[1],ts>as&&($e[0]=as*$e[0]/ts,$e[1]=as*$e[1]/ts)},this.athAdjust=function($e,es,ss){var as=90.30873362,ts=Ee.FAST_LOG10_X(es,10),ns=$e*$e,is=0;return ts-=ss,1e-20<ns&&(is=1+Ee.FAST_LOG10_X(ns,10/as)),0>is&&(is=0),ts*=is,ts+=ss+as-94.82444863,Math.pow(10,0.1*ts)},this.calc_xmin=function($e,es,ss,as){var _s=0,ts=$e.internal_flags,ns,is=0,ls=0,rs=ts.ATH,os=ss.xr,ps=$e.VBR==V.vbr_mtrh?1:0,ms=ts.masking_lower;for(($e.VBR==V.vbr_mtrh||$e.VBR==V.vbr_mt)&&(ms=1),ns=0;ns<ss.psy_lmax;ns++){var hs,ds,us,gs,Ss,Bs;ds=$e.VBR==V.vbr_rh||$e.VBR==V.vbr_mtrh?athAdjust(rs.adjust,rs.l[ns],rs.floor):rs.adjust*rs.l[ns],Ss=ss.width[ns],us=ds/Ss,gs=De,Bs=Ss>>1,hs=0;do{var Rs,As;Rs=os[is]*os[is],hs+=Rs,gs+=Rs<us?Rs:us,is++,As=os[is]*os[is],hs+=As,gs+=As<us?As:us,is++}while(0<--Bs);if(hs>ds&&ls++,ns==ne.SBPSY_l){var ks=ds*ts.nsPsy.longfact[ns];gs<ks&&(gs=ks)}if(0!=ps&&(ds=gs),!$e.ATHonly){var Ts=es.en.l[ns];if(0<Ts){var ks;ks=hs*es.thm.l[ns]*ms/Ts,0!=ps&&(ks*=ts.nsPsy.longfact[ns]),ds<ks&&(ds=ks)}}as[_s++]=0==ps?ds*ts.nsPsy.longfact[ns]:ds}var xs=575;if(ss.block_type!=ne.SHORT_TYPE)for(var ys=576;0!=ys--&&Y.EQ(os[ys],0);)xs=ys;ss.max_nonzero_coeff=xs;for(var Es=ss.sfb_smin;ns<ss.psymax;Es++,ns+=3){var Ss,vs,Ms;for(Ms=$e.VBR==V.vbr_rh||$e.VBR==V.vbr_mtrh?athAdjust(rs.adjust,rs.s[Es],rs.floor):rs.adjust*rs.s[Es],Ss=ss.width[ns],vs=0;3>vs;vs++){var hs=0,Bs=Ss>>1,ds,us,gs;us=Ms/Ss,gs=De;do{var Rs,As;Rs=os[is]*os[is],hs+=Rs,gs+=Rs<us?Rs:us,is++,As=os[is]*os[is],hs+=As,gs+=As<us?As:us,is++}while(0<--Bs);if(hs>Ms&&ls++,Es==ne.SBPSY_s){var ks=Ms*ts.nsPsy.shortfact[Es];gs<ks&&(gs=ks)}if(ds=0==ps?Ms:gs,!$e.ATHonly&&!$e.ATHshort){var Ts=es.en.s[Es][vs];if(0<Ts){var ks;ks=hs*es.thm.s[Es][vs]*ms/Ts,0!=ps&&(ks*=ts.nsPsy.shortfact[Es]),ds<ks&&(ds=ks)}}as[_s++]=0==ps?ds*ts.nsPsy.shortfact[Es]:ds}$e.useTemporal&&(as[_s-3]>as[_s-3+1]&&(as[_s-3+1]+=(as[_s-3]-as[_s-3+1])*ts.decay),as[_s-3+1]>as[_s-3+2]&&(as[_s-3+2]+=(as[_s-3+1]-as[_s-3+2])*ts.decay))}return ls},this.calc_noise_core=function($e,es,ss,as){var _s=0,ts=es.s,ns=$e.l3_enc;if(ts>$e.count1)for(;0!=ss--;){var is;is=$e.xr[ts],ts++,_s+=is*is,is=$e.xr[ts],ts++,_s+=is*is}else if(ts>$e.big_values){var ls=B(2);for(ls[0]=0,ls[1]=as;0!=ss--;){var is;is=Math.abs($e.xr[ts])-ls[ns[ts]],ts++,_s+=is*is,is=Math.abs($e.xr[ts])-ls[ns[ts]],ts++,_s+=is*is}}else for(;0!=ss--;){var is;is=Math.abs($e.xr[ts])-Ue[ns[ts]]*as,ts++,_s+=is*is,is=Math.abs($e.xr[ts])-Ue[ns[ts]]*as,ts++,_s+=is*is}return es.s=ts,_s},this.calc_noise=function($e,es,ss,as,_s){var ts=0,ns=0,rs=0,os=0,ps=0,ms=-20,hs=0,ds=$e.scalefac,us=0,is,ls;for(as.over_SSD=0,is=0;is<$e.psymax;is++){var gs=$e.global_gain-(ds[us++]+(0==$e.preflag?0:Ke[is])<<$e.scalefac_scale+1)-8*$e.subblock_gain[$e.window[is]],Ss=0;if(null!=_s&&_s.step[is]==gs)Ss=_s.noise[is],hs+=$e.width[is],ss[ts++]=Ss/es[ns++],Ss=_s.noise_log[is];else{var Bs=Ve(gs);if(ls=$e.width[is]>>1,hs+$e.width[is]>$e.max_nonzero_coeff){var Rs;Rs=$e.max_nonzero_coeff-hs+1,ls=0<Rs?Rs>>1:0}var As=new je(hs);Ss=this.calc_noise_core($e,As,ls,Bs),hs=As.s,null!=_s&&(_s.step[is]=gs,_s.noise[is]=Ss),Ss=ss[ts++]=Ss/es[ns++],Ss=Ee.FAST_LOG10(Math.max(Ss,1e-20)),null!=_s&&(_s.noise_log[is]=Ss)}if(null!=_s&&(_s.global_gain=$e.global_gain),ps+=Ss,0<Ss){var ks;ks=Math.max(0|10*Ss+.5,1),as.over_SSD+=ks*ks,rs++,os+=Ss}ms=Math.max(ms,Ss)}return as.over_count=rs,as.tot_noise=ps,as.over_noise=os,as.max_noise=ms,rs},this.set_pinfo=function($e,es,ss,as,_s){var ts=$e.internal_flags,ns,is,ls,rs,os,ps=0==es.scalefac_scale?.5:1,ms=es.scalefac,hs=B(He.SFBMAX),ds=B(He.SFBMAX),us=new Z;calc_xmin($e,ss,es,hs),calc_noise(es,hs,ds,us,null);var gs=0;for(is=es.sfb_lmax,es.block_type!=ne.SHORT_TYPE&&0==es.mixed_block_flag&&(is=22),ns=0;ns<is;ns++){var Ss=ts.scalefac_band.l[ns],Bs=ts.scalefac_band.l[ns+1],Rs=Bs-Ss;for(rs=0;gs<Bs;gs++)rs+=es.xr[gs]*es.xr[gs];rs/=Rs,os=1e15,ts.pinfo.en[as][_s][ns]=os*rs,ts.pinfo.xfsf[as][_s][ns]=os*hs[ns]*ds[ns]/Rs,0<ss.en.l[ns]&&!$e.ATHonly?rs/=ss.en.l[ns]:rs=0,ts.pinfo.thr[as][_s][ns]=os*Math.max(rs*ss.thm.l[ns],ts.ATH.l[ns]),ts.pinfo.LAMEsfb[as][_s][ns]=0,0!=es.preflag&&11<=ns&&(ts.pinfo.LAMEsfb[as][_s][ns]=-ps*Ke[ns]),ns<ne.SBPSY_l&&(ts.pinfo.LAMEsfb[as][_s][ns]-=ps*ms[ns])}if(es.block_type==ne.SHORT_TYPE)for(is=ns,ns=es.sfb_smin;ns<ne.SBMAX_s;ns++)for(var Ss=ts.scalefac_band.s[ns],Bs=ts.scalefac_band.s[ns+1],Rs=Bs-Ss,As=0;3>As;As++){for(rs=0,ls=Ss;ls<Bs;ls++)rs+=es.xr[gs]*es.xr[gs],gs++;rs=Math.max(rs/Rs,1e-20),os=1e15,ts.pinfo.en_s[as][_s][3*ns+As]=os*rs,ts.pinfo.xfsf_s[as][_s][3*ns+As]=os*hs[is]*ds[is]/Rs,0<ss.en.s[ns][As]?rs/=ss.en.s[ns][As]:rs=0,($e.ATHonly||$e.ATHshort)&&(rs=0),ts.pinfo.thr_s[as][_s][3*ns+As]=os*Math.max(rs*ss.thm.s[ns][As],ts.ATH.s[ns]),ts.pinfo.LAMEsfb_s[as][_s][3*ns+As]=-2*es.subblock_gain[As],ns<ne.SBPSY_s&&(ts.pinfo.LAMEsfb_s[as][_s][3*ns+As]-=ps*ms[is]),is++}ts.pinfo.LAMEqss[as][_s]=es.global_gain,ts.pinfo.LAMEmainbits[as][_s]=es.part2_3_length+es.part2_length,ts.pinfo.LAMEsfbits[as][_s]=es.part2_length,ts.pinfo.over[as][_s]=us.over_count,ts.pinfo.max_noise[as][_s]=10*us.max_noise,ts.pinfo.over_noise[as][_s]=10*us.over_noise,ts.pinfo.tot_noise[as][_s]=10*us.tot_noise,ts.pinfo.over_SSD[as][_s]=us.over_SSD}}function ee(){this.global_gain=0,this.sfb_count1=0,this.step=S(39),this.noise=B(39),this.noise_log=B(39)}function se(){function Ve(je){return new Int32Array(je)}function Ie(je){return new Float32Array(je)}this.xr=B(576),this.l3_enc=S(576),this.scalefac=S(He.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=S(3),this.subblock_gain=S(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=S(He.SFBMAX),this.window=S(He.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=S(4),this.max_nonzero_coeff=0;var Le=this;this.assign=function(je){Le.xr=Ie(je.xr),Le.l3_enc=Ve(je.l3_enc),Le.scalefac=Ve(je.scalefac),Le.xrpow_max=je.xrpow_max,Le.part2_3_length=je.part2_3_length,Le.big_values=je.big_values,Le.count1=je.count1,Le.global_gain=je.global_gain,Le.scalefac_compress=je.scalefac_compress,Le.block_type=je.block_type,Le.mixed_block_flag=je.mixed_block_flag,Le.table_select=Ve(je.table_select),Le.subblock_gain=Ve(je.subblock_gain),Le.region0_count=je.region0_count,Le.region1_count=je.region1_count,Le.preflag=je.preflag,Le.scalefac_scale=je.scalefac_scale,Le.count1table_select=je.count1table_select,Le.part2_length=je.part2_length,Le.sfb_lmax=je.sfb_lmax,Le.sfb_smin=je.sfb_smin,Le.psy_lmax=je.psy_lmax,Le.sfbmax=je.sfbmax,Le.psymax=je.psymax,Le.sfbdivide=je.sfbdivide,Le.width=Ve(je.width),Le.window=Ve(je.window),Le.count1bits=je.count1bits,Le.sfb_partition_table=je.sfb_partition_table.slice(0),Le.slen=Ve(je.slen),Le.max_nonzero_coeff=je.max_nonzero_coeff}}function ae(){function Ve(We,Ue,Je,$e){$e=0;for(var es=0,ss;es<=Je;++es)ss=Math.abs(We.xr[es]),$e+=ss,Ue[es]=Math.sqrt(ss*Math.sqrt(ss)),Ue[es]>We.xrpow_max&&(We.xrpow_max=Ue[es]);return $e}function Ie(We,Ue){var Je=We.ATH,$e=Ue.xr;if(Ue.block_type!=ne.SHORT_TYPE)for(var es=!1,ss=ne.PSFB21-1;0<=ss&&!es;ss--){var as=We.scalefac_band.psfb21[ss],_s=We.scalefac_band.psfb21[ss+1],ts=Ze.athAdjust(Je.adjust,Je.psfb21[ss],Je.floor);1e-12<We.nsPsy.longfact[21]&&(ts*=We.nsPsy.longfact[21]);for(var ns=_s-1;ns>=as;ns--)if(Math.abs($e[ns])<ts)$e[ns]=0;else{es=!0;break}}else for(var is=0,es;3>is;is++){es=!1;for(var ss=ne.PSFB12-1;0<=ss&&!es;ss--){var as=3*We.scalefac_band.s[12]+(We.scalefac_band.s[13]-We.scalefac_band.s[12])*is+(We.scalefac_band.psfb12[ss]-We.scalefac_band.psfb12[0]),_s=as+(We.scalefac_band.psfb12[ss+1]-We.scalefac_band.psfb12[ss]),ls=Ze.athAdjust(Je.adjust,Je.psfb12[ss],Je.floor);1e-12<We.nsPsy.shortfact[12]&&(ls*=We.nsPsy.shortfact[12]);for(var ns=_s-1;ns>=as;ns--)if(Math.abs($e[ns])<ls)$e[ns]=0;else{es=!0;break}}}}function Le(We){this.ordinal=We}function je(We,Ue,Je,$e,es){var as=We.CurrentStep[$e],_s=!1,ts=We.OldValue[$e],ns=Le.BINSEARCH_NONE,ss;for(Ue.global_gain=ts,Je-=Ue.part2_length;;){var is;if(ss=Qe.count_bits(We,es,Ue,null),1==as||ss==Je)break;ss>Je?(ns==Le.BINSEARCH_DOWN&&(_s=!0),_s&&(as/=2),ns=Le.BINSEARCH_UP,is=as):(ns==Le.BINSEARCH_UP&&(_s=!0),_s&&(as/=2),ns=Le.BINSEARCH_DOWN,is=-as),Ue.global_gain+=is,0>Ue.global_gain&&(Ue.global_gain=0,_s=!0),255<Ue.global_gain&&(Ue.global_gain=255,_s=!0)}for(;ss>Je&&255>Ue.global_gain;)Ue.global_gain++,ss=Qe.count_bits(We,es,Ue,null);return We.CurrentStep[$e]=4<=ts-Ue.global_gain?4:2,We.OldValue[$e]=Ue.global_gain,Ue.part2_3_length=ss,ss}function Ne(We){for(var Ue=0;Ue<We.sfbmax;Ue++)if(0==We.scalefac[Ue]+We.subblock_gain[We.window[Ue]])return!1;return!0}function Oe(We){return Ee.FAST_LOG10(0.368+0.632*We*We*We)}function qe(We,Ue){for(var Je=1e-37,$e=0;$e<Ue.psymax;$e++)Je+=Oe(We[$e]);return Math.max(1e-20,Je)}function Xe(We,Ue,Je,$e,es){var ss;switch(We){default:case 9:{0<Ue.over_count?(ss=Je.over_SSD<=Ue.over_SSD,Je.over_SSD==Ue.over_SSD&&(ss=Je.bits<Ue.bits)):ss=0>Je.max_noise&&10*Je.max_noise+Je.bits<=10*Ue.max_noise+Ue.bits;break}case 0:ss=Je.over_count<Ue.over_count||Je.over_count==Ue.over_count&&Je.over_noise<Ue.over_noise||Je.over_count==Ue.over_count&&Y.EQ(Je.over_noise,Ue.over_noise)&&Je.tot_noise<Ue.tot_noise;break;case 8:Je.max_noise=qe(es,$e);case 1:ss=Je.max_noise<Ue.max_noise;break;case 2:ss=Je.tot_noise<Ue.tot_noise;break;case 3:ss=Je.tot_noise<Ue.tot_noise&&Je.max_noise<Ue.max_noise;break;case 4:ss=0>=Je.max_noise&&0.2<Ue.max_noise||0>=Je.max_noise&&0>Ue.max_noise&&Ue.max_noise>Je.max_noise-0.2&&Je.tot_noise<Ue.tot_noise||0>=Je.max_noise&&0<Ue.max_noise&&Ue.max_noise>Je.max_noise-0.2&&Je.tot_noise<Ue.tot_noise+Ue.over_noise||0<Je.max_noise&&-0.05<Ue.max_noise&&Ue.max_noise>Je.max_noise-0.1&&Je.tot_noise+Je.over_noise<Ue.tot_noise+Ue.over_noise||0<Je.max_noise&&-0.1<Ue.max_noise&&Ue.max_noise>Je.max_noise-0.15&&Je.tot_noise+Je.over_noise+Je.over_noise<Ue.tot_noise+Ue.over_noise+Ue.over_noise;break;case 5:ss=Je.over_noise<Ue.over_noise||Y.EQ(Je.over_noise,Ue.over_noise)&&Je.tot_noise<Ue.tot_noise;break;case 6:ss=Je.over_noise<Ue.over_noise||Y.EQ(Je.over_noise,Ue.over_noise)&&(Je.max_noise<Ue.max_noise||Y.EQ(Je.max_noise,Ue.max_noise)&&Je.tot_noise<=Ue.tot_noise);break;case 7:ss=Je.over_count<Ue.over_count||Je.over_noise<Ue.over_noise;}return 0==Ue.over_count&&(ss=ss&&Je.bits<Ue.bits),ss}function De(We,Ue,Je,$e,es){var ss=We.internal_flags,as;as=0==Ue.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var _s=0,ts=0;ts<Ue.sfbmax;ts++)_s<Je[ts]&&(_s=Je[ts]);var ns=ss.noise_shaping_amp;switch(3==ns&&(es?ns=2:ns=1),ns){case 2:break;case 1:1<_s?_s=Math.pow(_s,.5):_s*=.95;break;case 0:default:1<_s?_s=1:_s*=.95;}for(var is=0,ts=0;ts<Ue.sfbmax;ts++){var ls=Ue.width[ts],rs;if(is+=ls,!(Je[ts]<_s)){if(0!=(2&ss.substep_shaping)&&(ss.pseudohalf[ts]=0==ss.pseudohalf[ts]?1:0,0==ss.pseudohalf[ts]&&2==ss.noise_shaping_amp))return;for(Ue.scalefac[ts]++,rs=-ls;0>rs;rs++)$e[is+rs]*=as,$e[is+rs]>Ue.xrpow_max&&(Ue.xrpow_max=$e[is+rs]);if(2==ss.noise_shaping_amp)return}}}function Ye(We,Ue){for(var $e=0,es=0;es<We.sfbmax;es++){var ss=We.width[es],as=We.scalefac[es];if(0!=We.preflag&&(as+=Ze.pretab[es]),$e+=ss,0!=(1&as)){as++;for(var _s=-ss;0>_s;_s++)Ue[$e+_s]*=1.2968395546510096,Ue[$e+_s]>We.xrpow_max&&(We.xrpow_max=Ue[$e+_s])}We.scalefac[es]=as>>1}We.preflag=0,We.scalefac_scale=1}function Ce(We,Ue,Je){var $e,es=Ue.scalefac;for($e=0;$e<Ue.sfb_lmax;$e++)if(16<=es[$e])return!0;for(var ss=0;3>ss;ss++){var as=0,_s=0;for($e=Ue.sfb_lmax+ss;$e<Ue.sfbdivide;$e+=3)as<es[$e]&&(as=es[$e]);for(;$e<Ue.sfbmax;$e+=3)_s<es[$e]&&(_s=es[$e]);if(!(16>as&&8>_s)){if(7<=Ue.subblock_gain[ss])return!0;Ue.subblock_gain[ss]++;var ts=We.scalefac_band.l[Ue.sfb_lmax];for($e=Ue.sfb_lmax+ss;$e<Ue.sfbmax;$e+=3){var is=Ue.width[$e],ls=es[$e],ns;if(ls-=4>>Ue.scalefac_scale,0<=ls){es[$e]=ls,ts+=3*is;continue}es[$e]=0;{var rs=210+(ls<<Ue.scalefac_scale+1);ns=Ze.IPOW20(rs)}ts+=is*(ss+1);for(var os=-is;0>os;os++)Je[ts+os]*=ns,Je[ts+os]>Ue.xrpow_max&&(Ue.xrpow_max=Je[ts+os]);ts+=is*(3-ss-1)}{var ns=Ze.IPOW20(202);ts+=Ue.width[$e]*(ss+1);for(var os=-Ue.width[$e];0>os;os++)Je[ts+os]*=ns,Je[ts+os]>Ue.xrpow_max&&(Ue.xrpow_max=Je[ts+os])}}}return!1}function Fe(We,Ue,Je,$e,es){var ss=We.internal_flags;De(We,Ue,Je,$e,es);var as=Ne(Ue);return!as&&(!(as=2==ss.mode_gr?Qe.scale_bitcount(Ue):Qe.scale_bitcount_lsf(ss,Ue),!!as)||(1<ss.noise_shaping&&(xe.fill(ss.pseudohalf,0),0==Ue.scalefac_scale?(Ye(Ue,$e),as=!1):Ue.block_type==ne.SHORT_TYPE&&0<ss.subblock_gain&&(as=Ce(ss,Ue,$e)||Ne(Ue))),as||(2==ss.mode_gr?as=Qe.scale_bitcount(Ue):as=Qe.scale_bitcount_lsf(ss,Ue)),!as))}var ze;this.rv=null;var Ge;this.qupvt=null;var Ze,Ke=new G,Qe;this.setModules=function(We,Ue,Je,$e){ze=We,Ge=Ue,this.rv=Ue,Ze=Je,this.qupvt=Je,Qe=$e,Ke.setModules(Ze,Qe)},this.ms_convert=function(We,Ue){for(var Je=0;576>Je;++Je){var $e=We.tt[Ue][0].xr[Je],es=We.tt[Ue][1].xr[Je];We.tt[Ue][0].xr[Je]=($e+es)*(0.5*Ee.SQRT2),We.tt[Ue][1].xr[Je]=($e-es)*(0.5*Ee.SQRT2)}},this.init_xrpow=function(We,Ue,Je){var $e=0,es=0|Ue.max_nonzero_coeff;if(Ue.xrpow_max=0,xe.fill(Je,es,576,0),$e=Ve(Ue,Je,es,$e),1e-20<$e){var ss=0;0!=(2&We.substep_shaping)&&(ss=1);for(var as=0;as<Ue.psymax;as++)We.pseudohalf[as]=ss;return!0}return xe.fill(Ue.l3_enc,0,576,0),!1},this.init_outer_loop=function(We,Ue){Ue.part2_3_length=0,Ue.big_values=0,Ue.count1=0,Ue.global_gain=210,Ue.scalefac_compress=0,Ue.table_select[0]=0,Ue.table_select[1]=0,Ue.table_select[2]=0,Ue.subblock_gain[0]=0,Ue.subblock_gain[1]=0,Ue.subblock_gain[2]=0,Ue.subblock_gain[3]=0,Ue.region0_count=0,Ue.region1_count=0,Ue.preflag=0,Ue.scalefac_scale=0,Ue.count1table_select=0,Ue.part2_length=0,Ue.sfb_lmax=ne.SBPSY_l,Ue.sfb_smin=ne.SBPSY_s,Ue.psy_lmax=We.sfb21_extra?ne.SBMAX_l:ne.SBPSY_l,Ue.psymax=Ue.psy_lmax,Ue.sfbmax=Ue.sfb_lmax,Ue.sfbdivide=11;for(var Je=0;Je<ne.SBMAX_l;Je++)Ue.width[Je]=We.scalefac_band.l[Je+1]-We.scalefac_band.l[Je],Ue.window[Je]=3;if(Ue.block_type==ne.SHORT_TYPE){var $e=B(576);Ue.sfb_smin=0,Ue.sfb_lmax=0,0!=Ue.mixed_block_flag&&(Ue.sfb_smin=3,Ue.sfb_lmax=2*We.mode_gr+4),Ue.psymax=Ue.sfb_lmax+3*((We.sfb21_extra?ne.SBMAX_s:ne.SBPSY_s)-Ue.sfb_smin),Ue.sfbmax=Ue.sfb_lmax+3*(ne.SBPSY_s-Ue.sfb_smin),Ue.sfbdivide=Ue.sfbmax-18,Ue.psy_lmax=Ue.sfb_lmax;var es=We.scalefac_band.l[Ue.sfb_lmax];ye.arraycopy(Ue.xr,0,$e,0,576);for(var Je=Ue.sfb_smin;Je<ne.SBMAX_s;Je++)for(var ss=We.scalefac_band.s[Je],as=We.scalefac_band.s[Je+1],_s=0;3>_s;_s++)for(var ts=ss;ts<as;ts++)Ue.xr[es++]=$e[3*ts+_s];for(var ns=Ue.sfb_lmax,Je=Ue.sfb_smin;Je<ne.SBMAX_s;Je++)Ue.width[ns]=Ue.width[ns+1]=Ue.width[ns+2]=We.scalefac_band.s[Je+1]-We.scalefac_band.s[Je],Ue.window[ns]=0,Ue.window[ns+1]=1,Ue.window[ns+2]=2,ns+=3}Ue.count1bits=0,Ue.sfb_partition_table=Ze.nr_of_sfb_block[0][0],Ue.slen[0]=0,Ue.slen[1]=0,Ue.slen[2]=0,Ue.slen[3]=0,Ue.max_nonzero_coeff=575,xe.fill(Ue.scalefac,0),Ie(We,Ue)},Le.BINSEARCH_NONE=new Le(0),Le.BINSEARCH_UP=new Le(1),Le.BINSEARCH_DOWN=new Le(2),this.trancate_smallspectrums=function(We,Ue,Je,$e){var es=B(He.SFBMAX);if((0!=(4&We.substep_shaping)||Ue.block_type!=ne.SHORT_TYPE)&&0==(128&We.substep_shaping)){Ze.calc_noise(Ue,Je,es,new Z,null);for(var ss=0,as;576>ss;ss++)as=0,0!=Ue.l3_enc[ss]&&(as=Math.abs(Ue.xr[ss])),$e[ss]=as;var ss=0,_s=8;Ue.block_type==ne.SHORT_TYPE&&(_s=6);do{var rs=Ue.width[_s],ts,ns,is,ls;if(ss+=rs,1<=es[_s])continue;if(xe.sort($e,ss-rs,rs),Y.EQ($e[ss-1],0))continue;ts=(1-es[_s])*Je[_s],ns=0,ls=0;do{var os;for(is=1;ls+is<rs&&!Y.NEQ($e[ls+ss-rs],$e[ls+ss+is-rs]);is++);if(os=$e[ls+ss-rs]*$e[ls+ss-rs]*is,ts<os){0!=ls&&(ns=$e[ls+ss-rs-1]);break}ts-=os,ls+=is}while(ls<rs);if(Y.EQ(ns,0))continue;do Math.abs(Ue.xr[ss-rs])<=ns&&(Ue.l3_enc[ss-rs]=0);while(0<--rs)}while(++_s<Ue.psymax);Ue.part2_3_length=Qe.noquant_count_bits(We,Ue,null)}},this.outer_loop=function(We,Ue,Je,$e,es,ss){var as=We.internal_flags,_s=new se,ts=B(576),ns=B(He.SFBMAX),is=new Z,rs=new ee,os=9999999,ps=!1,ms=!1,hs=0,ls;if(je(as,Ue,ss,es,$e),0==as.noise_shaping)return 100;Ze.calc_noise(Ue,Je,ns,is,rs),is.bits=Ue.part2_3_length,_s.assign(Ue);var ds=0;for(ye.arraycopy($e,0,ts,0,576);!ps;){do{var us=new Z,Ss=255,gs;if(gs=0==(2&as.substep_shaping)?3:20,as.sfb21_extra){if(1<ns[_s.sfbmax])break;if(_s.block_type==ne.SHORT_TYPE&&(1<ns[_s.sfbmax+1]||1<ns[_s.sfbmax+2]))break}if(!Fe(We,_s,ns,$e,ms))break;0!=_s.scalefac_scale&&(Ss=254);var Bs=ss-_s.part2_length;if(0>=Bs)break;for(;(_s.part2_3_length=Qe.count_bits(as,$e,_s,rs))>Bs&&_s.global_gain<=Ss;)_s.global_gain++;if(_s.global_gain>Ss)break;if(0==is.over_count){for(;(_s.part2_3_length=Qe.count_bits(as,$e,_s,rs))>os&&_s.global_gain<=Ss;)_s.global_gain++;if(_s.global_gain>Ss)break}if(Ze.calc_noise(_s,Je,ns,us,rs),us.bits=_s.part2_3_length,ls=Ue.block_type==ne.SHORT_TYPE?We.quant_comp_short:We.quant_comp,ls=Xe(ls,is,us,_s,ns)?1:0,0!=ls)os=Ue.part2_3_length,is=us,Ue.assign(_s),ds=0,ye.arraycopy($e,0,ts,0,576);else if(0==as.full_outer_loop){if(++ds>gs&&0==is.over_count)break;if(3==as.noise_shaping_amp&&ms&&30<ds)break;if(3==as.noise_shaping_amp&&ms&&15<_s.global_gain-hs)break}}while(255>_s.global_gain+_s.scalefac_scale);3==as.noise_shaping_amp?ms?ps=!0:(_s.assign(Ue),ye.arraycopy(ts,0,$e,0,576),ds=0,hs=_s.global_gain,ms=!0):ps=!0}return We.VBR==V.vbr_rh||We.VBR==V.vbr_mtrh?ye.arraycopy(ts,0,$e,0,576):0!=(1&as.substep_shaping)&&trancate_smallspectrums(as,Ue,Je,$e),is.over_count},this.iteration_finish_one=function(We,Ue,Je){var $e=We.l3_side,es=$e.tt[Ue][Je];Qe.best_scalefac_store(We,Ue,Je,$e),1==We.use_best_huffman&&Qe.best_huffman_divide(We,es),Ge.ResvAdjust(We,es)},this.VBR_encode_granule=function(We,Ue,Je,$e,es,ss,as){var _s=We.internal_flags,ts=new se,ns=B(576),is=as,ls=as+1,rs=(as+ss)/2,os,ps,ms=0,hs=_s.sfb21_extra;xe.fill(ts.l3_enc,0);do _s.sfb21_extra=!(rs>is-42)&&hs,ps=outer_loop(We,Ue,Je,$e,es,rs),0>=ps?(ms=1,ls=Ue.part2_3_length,ts.assign(Ue),ye.arraycopy($e,0,ns,0,576),as=ls-32,os=as-ss,rs=(as+ss)/2):(ss=rs+32,os=as-ss,rs=(as+ss)/2,0!=ms&&(ms=2,Ue.assign(ts),ye.arraycopy(ns,0,$e,0,576)));while(12<os);_s.sfb21_extra=hs,2==ms&&ye.arraycopy(ts.l3_enc,0,Ue.l3_enc,0,576)},this.get_framebits=function(We,Ue){var Je=We.internal_flags;Je.bitrate_index=Je.VBR_min_bitrate;var $e=ze.getframebits(We);Je.bitrate_index=1,$e=ze.getframebits(We);for(var es=1;es<=Je.VBR_max_bitrate;es++){Je.bitrate_index=es;var ss=new z($e);Ue[es]=Ge.ResvFrameBegin(We,ss),$e=ss.bits}},this.VBR_old_prepare=function(We,Ue,Je,$e,es,ss,as,_s,ts){var ns=We.internal_flags,is,ls=0,rs=1,os=0;ns.bitrate_index=ns.VBR_max_bitrate;var ps=Ge.ResvFrameBegin(We,new z(0))/ns.mode_gr;get_framebits(We,ss);for(var ms=0,hs;ms<ns.mode_gr;ms++){hs=Ze.on_pe(We,Ue,_s[ms],ps,ms,0),ns.mode_ext==ne.MPG_MD_MS_LR&&(ms_convert(ns.l3_side,ms),Ze.reduce_side(_s[ms],Je[ms],ps,hs));for(var ds=0,us;ds<ns.channels_out;++ds)us=ns.l3_side.tt[ms][ds],us.block_type==ne.SHORT_TYPE?(ls=2.56/(1+Math.exp(3.5-Ue[ms][ds]/300))-0.14,is=ns.PSY.mask_adjust_short-ls):(ls=1.28/(1+Math.exp(3.5-Ue[ms][ds]/300))-0.05,is=ns.PSY.mask_adjust-ls),ns.masking_lower=Math.pow(10,0.1*is),init_outer_loop(ns,us),ts[ms][ds]=Ze.calc_xmin(We,$e[ms][ds],us,es[ms][ds]),0!=ts[ms][ds]&&(rs=0),as[ms][ds]=126,os+=_s[ms][ds]}for(var ms=0;ms<ns.mode_gr;ms++)for(var ds=0;ds<ns.channels_out;ds++)os>ss[ns.VBR_max_bitrate]&&(_s[ms][ds]*=ss[ns.VBR_max_bitrate],_s[ms][ds]/=os),as[ms][ds]>_s[ms][ds]&&(as[ms][ds]=_s[ms][ds]);return rs},this.bitpressure_strategy=function(We,Ue,Je,$e){for(var es=0;es<We.mode_gr;es++)for(var ss=0;ss<We.channels_out;ss++){for(var as=We.l3_side.tt[es][ss],_s=Ue[es][ss],ts=0,ns=0;ns<as.psy_lmax;ns++)_s[ts++]*=1+.029*ns*ns/ne.SBMAX_l/ne.SBMAX_l;if(as.block_type==ne.SHORT_TYPE)for(var ns=as.sfb_smin;ns<ne.SBMAX_s;ns++)_s[ts++]*=1+.029*ns*ns/ne.SBMAX_s/ne.SBMAX_s,_s[ts++]*=1+.029*ns*ns/ne.SBMAX_s/ne.SBMAX_s,_s[ts++]*=1+.029*ns*ns/ne.SBMAX_s/ne.SBMAX_s;$e[es][ss]=0|Math.max(Je[es][ss],0.9*$e[es][ss])}},this.VBR_new_prepare=function(We,Ue,Je,$e,es,ss){var as=We.internal_flags,_s=1,ts=0,ns=0,is;if(!We.free_format){as.bitrate_index=as.VBR_max_bitrate;var ls=new z(ts);Ge.ResvFrameBegin(We,ls),ts=ls.bits,get_framebits(We,es),is=es[as.VBR_max_bitrate]}else{as.bitrate_index=0;var ls=new z(ts);is=Ge.ResvFrameBegin(We,ls),ts=ls.bits,es[0]=is}for(var rs=0;rs<as.mode_gr;rs++){Ze.on_pe(We,Ue,ss[rs],ts,rs,0),as.mode_ext==ne.MPG_MD_MS_LR&&ms_convert(as.l3_side,rs);for(var os=0,ps;os<as.channels_out;++os)ps=as.l3_side.tt[rs][os],as.masking_lower=Math.pow(10,0.1*as.PSY.mask_adjust),init_outer_loop(as,ps),0!=Ze.calc_xmin(We,Je[rs][os],ps,$e[rs][os])&&(_s=0),ns+=ss[rs][os]}for(var rs=0;rs<as.mode_gr;rs++)for(var os=0;os<as.channels_out;os++)ns>is&&(ss[rs][os]*=is,ss[rs][os]/=ns);return _s},this.calc_target_bits=function(We,Ue,Je,$e,es,ss){var as=We.internal_flags,_s=as.l3_side,ts,ns,is,ls,rs=0;as.bitrate_index=as.VBR_max_bitrate;var os=new z(rs);for(ss[0]=Ge.ResvFrameBegin(We,os),rs=os.bits,as.bitrate_index=1,rs=ze.getframebits(We)-8*as.sideinfo_len,es[0]=rs/(as.mode_gr*as.channels_out),rs=1e3*(We.VBR_mean_bitrate_kbps*We.framesize),0!=(1&as.substep_shaping)&&(rs*=1.09),rs/=We.out_samplerate,rs-=8*as.sideinfo_len,rs/=as.mode_gr*as.channels_out,ts=.93+.07*(11-We.compression_ratio)/(11-5.5),0.9>ts&&(ts=0.9),1<ts&&(ts=1),ns=0;ns<as.mode_gr;ns++){var ps=0;for(is=0;is<as.channels_out;is++){if($e[ns][is]=int(ts*rs),700<Ue[ns][is]){var ms=int((Ue[ns][is]-700)/1.4),hs=_s.tt[ns][is];$e[ns][is]=int(ts*rs),hs.block_type==ne.SHORT_TYPE&&ms<rs/2&&(ms=rs/2),ms>3*rs/2?ms=3*rs/2:0>ms&&(ms=0),$e[ns][is]+=ms}$e[ns][is]>ce.MAX_BITS_PER_CHANNEL&&($e[ns][is]=ce.MAX_BITS_PER_CHANNEL),ps+=$e[ns][is]}if(ps>ce.MAX_BITS_PER_GRANULE)for(is=0;is<as.channels_out;++is)$e[ns][is]*=ce.MAX_BITS_PER_GRANULE,$e[ns][is]/=ps}if(as.mode_ext==ne.MPG_MD_MS_LR)for(ns=0;ns<as.mode_gr;ns++)Ze.reduce_side($e[ns],Je[ns],rs*as.channels_out,ce.MAX_BITS_PER_GRANULE);for(ls=0,ns=0;ns<as.mode_gr;ns++)for(is=0;is<as.channels_out;is++)$e[ns][is]>ce.MAX_BITS_PER_CHANNEL&&($e[ns][is]=ce.MAX_BITS_PER_CHANNEL),ls+=$e[ns][is];if(ls>ss[0])for(ns=0;ns<as.mode_gr;ns++)for(is=0;is<as.channels_out;is++)$e[ns][is]*=ss[0],$e[ns][is]/=ls}}function _e(){this.thm=new be,this.en=new be}function te(){function Ve(ze,Ge,Ze){for(var Ke=10,Qe=Ge+238-14-286,We=-15;0>We;We++){var Ue,Je,$e;Ue=je[Ke+-10],Je=ze[Qe+-224]*Ue,$e=ze[Ge+224]*Ue,Ue=je[Ke+-9],Je+=ze[Qe+-160]*Ue,$e+=ze[Ge+160]*Ue,Ue=je[Ke+-8],Je+=ze[Qe+-96]*Ue,$e+=ze[Ge+96]*Ue,Ue=je[Ke+-7],Je+=ze[Qe+-32]*Ue,$e+=ze[Ge+32]*Ue,Ue=je[Ke+-6],Je+=ze[Qe+32]*Ue,$e+=ze[Ge+-32]*Ue,Ue=je[Ke+-5],Je+=ze[Qe+96]*Ue,$e+=ze[Ge+-96]*Ue,Ue=je[Ke+-4],Je+=ze[Qe+160]*Ue,$e+=ze[Ge+-160]*Ue,Ue=je[Ke+-3],Je+=ze[Qe+224]*Ue,$e+=ze[Ge+-224]*Ue,Ue=je[Ke+-2],Je+=ze[Ge+-256]*Ue,$e-=ze[Qe+256]*Ue,Ue=je[Ke+-1],Je+=ze[Ge+-192]*Ue,$e-=ze[Qe+192]*Ue,Ue=je[Ke+0],Je+=ze[Ge+-128]*Ue,$e-=ze[Qe+128]*Ue,Ue=je[Ke+1],Je+=ze[Ge+-64]*Ue,$e-=ze[Qe+64]*Ue,Ue=je[Ke+2],Je+=ze[Ge+0]*Ue,$e-=ze[Qe+0]*Ue,Ue=je[Ke+3],Je+=ze[Ge+64]*Ue,$e-=ze[Qe+-64]*Ue,Ue=je[Ke+4],Je+=ze[Ge+128]*Ue,$e-=ze[Qe+-128]*Ue,Ue=je[Ke+5],Je+=ze[Ge+192]*Ue,$e-=ze[Qe+-192]*Ue,Je*=je[Ke+6],Ue=$e-Je,Ze[30+2*We]=$e+Je,Ze[31+2*We]=je[Ke+7]*Ue,Ke+=18,Ge--,Qe++}{var Je,$e,es,ss;$e=ze[Ge+-16]*je[Ke+-10],Je=ze[Ge+-32]*je[Ke+-2],$e+=(ze[Ge+-48]-ze[Ge+16])*je[Ke+-9],Je+=ze[Ge+-96]*je[Ke+-1],$e+=(ze[Ge+-80]+ze[Ge+48])*je[Ke+-8],Je+=ze[Ge+-160]*je[Ke+0],$e+=(ze[Ge+-112]-ze[Ge+80])*je[Ke+-7],Je+=ze[Ge+-224]*je[Ke+1],$e+=(ze[Ge+-144]+ze[Ge+112])*je[Ke+-6],Je-=ze[Ge+32]*je[Ke+2],$e+=(ze[Ge+-176]-ze[Ge+144])*je[Ke+-5],Je-=ze[Ge+96]*je[Ke+3],$e+=(ze[Ge+-208]+ze[Ge+176])*je[Ke+-4],Je-=ze[Ge+160]*je[Ke+4],$e+=(ze[Ge+-240]-ze[Ge+208])*je[Ke+-3],Je-=ze[Ge+224],es=Je-$e,ss=Je+$e,$e=Ze[14],Je=Ze[15]-$e,Ze[31]=ss+$e,Ze[30]=es+Je,Ze[15]=es-Je,Ze[14]=ss-$e}{var as;as=Ze[28]-Ze[0],Ze[0]+=Ze[28],Ze[28]=as*je[Ke+-36+7],as=Ze[29]-Ze[1],Ze[1]+=Ze[29],Ze[29]=as*je[Ke+-36+7],as=Ze[26]-Ze[2],Ze[2]+=Ze[26],Ze[26]=as*je[Ke+-72+7],as=Ze[27]-Ze[3],Ze[3]+=Ze[27],Ze[27]=as*je[Ke+-72+7],as=Ze[24]-Ze[4],Ze[4]+=Ze[24],Ze[24]=as*je[Ke+-108+7],as=Ze[25]-Ze[5],Ze[5]+=Ze[25],Ze[25]=as*je[Ke+-108+7],as=Ze[22]-Ze[6],Ze[6]+=Ze[22],Ze[22]=as*Ee.SQRT2,as=Ze[23]-Ze[7],Ze[7]+=Ze[23],Ze[23]=as*Ee.SQRT2-Ze[7],Ze[7]-=Ze[6],Ze[22]-=Ze[7],Ze[23]-=Ze[22],as=Ze[6],Ze[6]=Ze[31]-as,Ze[31]+=as,as=Ze[7],Ze[7]=Ze[30]-as,Ze[30]+=as,as=Ze[22],Ze[22]=Ze[15]-as,Ze[15]+=as,as=Ze[23],Ze[23]=Ze[14]-as,Ze[14]+=as,as=Ze[20]-Ze[8],Ze[8]+=Ze[20],Ze[20]=as*je[Ke+-180+7],as=Ze[21]-Ze[9],Ze[9]+=Ze[21],Ze[21]=as*je[Ke+-180+7],as=Ze[18]-Ze[10],Ze[10]+=Ze[18],Ze[18]=as*je[Ke+-216+7],as=Ze[19]-Ze[11],Ze[11]+=Ze[19],Ze[19]=as*je[Ke+-216+7],as=Ze[16]-Ze[12],Ze[12]+=Ze[16],Ze[16]=as*je[Ke+-252+7],as=Ze[17]-Ze[13],Ze[13]+=Ze[17],Ze[17]=as*je[Ke+-252+7],as=-Ze[20]+Ze[24],Ze[20]+=Ze[24],Ze[24]=as*je[Ke+-216+7],as=-Ze[21]+Ze[25],Ze[21]+=Ze[25],Ze[25]=as*je[Ke+-216+7],as=Ze[4]-Ze[8],Ze[4]+=Ze[8],Ze[8]=as*je[Ke+-216+7],as=Ze[5]-Ze[9],Ze[5]+=Ze[9],Ze[9]=as*je[Ke+-216+7],as=Ze[0]-Ze[12],Ze[0]+=Ze[12],Ze[12]=as*je[Ke+-72+7],as=Ze[1]-Ze[13],Ze[1]+=Ze[13],Ze[13]=as*je[Ke+-72+7],as=Ze[16]-Ze[28],Ze[16]+=Ze[28],Ze[28]=as*je[Ke+-72+7],as=-Ze[17]+Ze[29],Ze[17]+=Ze[29],Ze[29]=as*je[Ke+-72+7],as=Ee.SQRT2*(Ze[2]-Ze[10]),Ze[2]+=Ze[10],Ze[10]=as,as=Ee.SQRT2*(Ze[3]-Ze[11]),Ze[3]+=Ze[11],Ze[11]=as,as=Ee.SQRT2*(-Ze[18]+Ze[26]),Ze[18]+=Ze[26],Ze[26]=as-Ze[18],as=Ee.SQRT2*(-Ze[19]+Ze[27]),Ze[19]+=Ze[27],Ze[27]=as-Ze[19],as=Ze[2],Ze[19]-=Ze[3],Ze[3]-=as,Ze[2]=Ze[31]-as,Ze[31]+=as,as=Ze[3],Ze[11]-=Ze[19],Ze[18]-=as,Ze[3]=Ze[30]-as,Ze[30]+=as,as=Ze[18],Ze[27]-=Ze[11],Ze[19]-=as,Ze[18]=Ze[15]-as,Ze[15]+=as,as=Ze[19],Ze[10]-=as,Ze[19]=Ze[14]-as,Ze[14]+=as,as=Ze[10],Ze[11]-=as,Ze[10]=Ze[23]-as,Ze[23]+=as,as=Ze[11],Ze[26]-=as,Ze[11]=Ze[22]-as,Ze[22]+=as,as=Ze[26],Ze[27]-=as,Ze[26]=Ze[7]-as,Ze[7]+=as,as=Ze[27],Ze[27]=Ze[6]-as,Ze[6]+=as,as=Ee.SQRT2*(Ze[0]-Ze[4]),Ze[0]+=Ze[4],Ze[4]=as,as=Ee.SQRT2*(Ze[1]-Ze[5]),Ze[1]+=Ze[5],Ze[5]=as,as=Ee.SQRT2*(Ze[16]-Ze[20]),Ze[16]+=Ze[20],Ze[20]=as,as=Ee.SQRT2*(Ze[17]-Ze[21]),Ze[17]+=Ze[21],Ze[21]=as,as=-Ee.SQRT2*(Ze[8]-Ze[12]),Ze[8]+=Ze[12],Ze[12]=as-Ze[8],as=-Ee.SQRT2*(Ze[9]-Ze[13]),Ze[9]+=Ze[13],Ze[13]=as-Ze[9],as=-Ee.SQRT2*(Ze[25]-Ze[29]),Ze[25]+=Ze[29],Ze[29]=as-Ze[25],as=-Ee.SQRT2*(Ze[24]+Ze[28]),Ze[24]-=Ze[28],Ze[28]=as-Ze[24],as=Ze[24]-Ze[16],Ze[24]=as,as=Ze[20]-as,Ze[20]=as,as=Ze[28]-as,Ze[28]=as,as=Ze[25]-Ze[17],Ze[25]=as,as=Ze[21]-as,Ze[21]=as,as=Ze[29]-as,Ze[29]=as,as=Ze[17]-Ze[1],Ze[17]=as,as=Ze[9]-as,Ze[9]=as,as=Ze[25]-as,Ze[25]=as,as=Ze[5]-as,Ze[5]=as,as=Ze[21]-as,Ze[21]=as,as=Ze[13]-as,Ze[13]=as,as=Ze[29]-as,Ze[29]=as,as=Ze[1]-Ze[0],Ze[1]=as,as=Ze[16]-as,Ze[16]=as,as=Ze[17]-as,Ze[17]=as,as=Ze[8]-as,Ze[8]=as,as=Ze[9]-as,Ze[9]=as,as=Ze[24]-as,Ze[24]=as,as=Ze[25]-as,Ze[25]=as,as=Ze[4]-as,Ze[4]=as,as=Ze[5]-as,Ze[5]=as,as=Ze[20]-as,Ze[20]=as,as=Ze[21]-as,Ze[21]=as,as=Ze[12]-as,Ze[12]=as,as=Ze[13]-as,Ze[13]=as,as=Ze[28]-as,Ze[28]=as,as=Ze[29]-as,Ze[29]=as,as=Ze[0],Ze[0]+=Ze[31],Ze[31]-=as,as=Ze[1],Ze[1]+=Ze[30],Ze[30]-=as,as=Ze[16],Ze[16]+=Ze[15],Ze[15]-=as,as=Ze[17],Ze[17]+=Ze[14],Ze[14]-=as,as=Ze[8],Ze[8]+=Ze[23],Ze[23]-=as,as=Ze[9],Ze[9]+=Ze[22],Ze[22]-=as,as=Ze[24],Ze[24]+=Ze[7],Ze[7]-=as,as=Ze[25],Ze[25]+=Ze[6],Ze[6]-=as,as=Ze[4],Ze[4]+=Ze[27],Ze[27]-=as,as=Ze[5],Ze[5]+=Ze[26],Ze[26]-=as,as=Ze[20],Ze[20]+=Ze[11],Ze[11]-=as,as=Ze[21],Ze[21]+=Ze[10],Ze[10]-=as,as=Ze[12],Ze[12]+=Ze[19],Ze[19]-=as,as=Ze[13],Ze[13]+=Ze[18],Ze[18]-=as,as=Ze[28],Ze[28]+=Ze[3],Ze[3]-=as,as=Ze[29],Ze[29]+=Ze[2],Ze[2]-=as}}function Ie(ze,Ge){for(var Ze=0;3>Ze;Ze++){var Ke,Qe,We,Ue,Je,$e;Ue=ze[Ge+6]*qe[ne.SHORT_TYPE][0]-ze[Ge+15],Ke=ze[Ge+0]*qe[ne.SHORT_TYPE][2]-ze[Ge+9],Qe=Ue+Ke,We=Ue-Ke,Ue=ze[Ge+15]*qe[ne.SHORT_TYPE][0]+ze[Ge+6],Ke=ze[Ge+9]*qe[ne.SHORT_TYPE][2]+ze[Ge+0],Je=Ue+Ke,$e=-Ue+Ke,Ke=2.069978111953089e-11*(ze[Ge+3]*qe[ne.SHORT_TYPE][1]-ze[Ge+12]),Ue=2.069978111953089e-11*(ze[Ge+12]*qe[ne.SHORT_TYPE][1]+ze[Ge+3]),ze[Ge+0]=1.90752519173728e-11*Qe+Ke,ze[Ge+15]=1.90752519173728e-11*-Je+Ue,We=1.907525191737281e-11*(0.8660254037844387*We),Je=1.907525191737281e-11*(0.5*Je)+Ue,ze[Ge+3]=We-Je,ze[Ge+6]=We+Je,Qe=1.907525191737281e-11*(0.5*Qe)-Ke,$e=1.907525191737281e-11*(0.8660254037844387*$e),ze[Ge+9]=Qe+$e,ze[Ge+12]=Qe-$e,Ge++}}function Le(ze,Ge,Ze){var Ke,Qe;{var We,Ue,Je,$e,es,ss,as,_s;We=Ze[17]-Ze[9],Je=Ze[15]-Ze[11],$e=Ze[14]-Ze[12],es=Ze[0]+Ze[8],ss=Ze[1]+Ze[7],as=Ze[2]+Ze[6],_s=Ze[3]+Ze[5],ze[Ge+17]=es+as-_s-(ss-Ze[4]),Qe=(es+as-_s)*De[19]+(ss-Ze[4]),Ke=(We-Je-$e)*De[18],ze[Ge+5]=Ke+Qe,ze[Ge+6]=Ke-Qe,Ue=(Ze[16]-Ze[10])*De[18],ss=ss*De[19]+Ze[4],Ke=We*De[12]+Ue+Je*De[13]+$e*De[14],Qe=-es*De[16]+ss-as*De[17]+_s*De[15],ze[Ge+1]=Ke+Qe,ze[Ge+2]=Ke-Qe,Ke=We*De[13]-Ue-Je*De[14]+$e*De[12],Qe=-es*De[17]+ss-as*De[15]+_s*De[16],ze[Ge+9]=Ke+Qe,ze[Ge+10]=Ke-Qe,Ke=We*De[14]-Ue+Je*De[12]-$e*De[13],Qe=es*De[15]-ss+as*De[16]-_s*De[17],ze[Ge+13]=Ke+Qe,ze[Ge+14]=Ke-Qe}{var ts,ns,is,ls,rs,os,ps,ms;ts=Ze[8]-Ze[0],is=Ze[6]-Ze[2],ls=Ze[5]-Ze[3],rs=Ze[17]+Ze[9],os=Ze[16]+Ze[10],ps=Ze[15]+Ze[11],ms=Ze[14]+Ze[12],ze[Ge+0]=rs+ps+ms+(os+Ze[13]),Ke=(rs+ps+ms)*De[19]-(os+Ze[13]),Qe=(ts-is+ls)*De[18],ze[Ge+11]=Ke+Qe,ze[Ge+12]=Ke-Qe,ns=(Ze[7]-Ze[1])*De[18],os=Ze[13]-os*De[19],Ke=rs*De[15]-os+ps*De[16]+ms*De[17],Qe=ts*De[14]+ns+is*De[12]+ls*De[13],ze[Ge+3]=Ke+Qe,ze[Ge+4]=Ke-Qe,Ke=-rs*De[17]+os-ps*De[15]-ms*De[16],Qe=ts*De[13]+ns-is*De[14]-ls*De[12],ze[Ge+7]=Ke+Qe,ze[Ge+8]=Ke-Qe,Ke=-rs*De[16]+os-ps*De[17]-ms*De[15],Qe=ts*De[12]-ns+is*De[13]-ls*De[14],ze[Ge+15]=Ke+Qe,ze[Ge+16]=Ke-Qe}}var je=[0.740951125354959*-4.77e-7/2.384e-6,0.740951125354959*1.03951e-4/2.384e-6,0.740951125354959*9.53674e-4/2.384e-6,0.740951125354959*0.002841473/2.384e-6,0.740951125354959*0.035758972/2.384e-6,0.740951125354959*0.003401756/2.384e-6,0.740951125354959*9.83715e-4/2.384e-6,0.740951125354959*9.9182e-5/2.384e-6,0.740951125354959*1.2398e-5/2.384e-6,0.740951125354959*1.91212e-4/2.384e-6,0.740951125354959*0.002283096/2.384e-6,0.740951125354959*0.016994476/2.384e-6,0.740951125354959*-0.018756866/2.384e-6,0.740951125354959*-0.002630711/2.384e-6,0.740951125354959*-2.47478e-4/2.384e-6,0.740951125354959*-1.4782e-5/2.384e-6,0.9063471690191471,0.1960342806591213,0.773010453362737*-4.77e-7/2.384e-6,0.773010453362737*1.05858e-4/2.384e-6,0.773010453362737*9.30786e-4/2.384e-6,0.773010453362737*0.002521515/2.384e-6,0.773010453362737*0.035694122/2.384e-6,0.773010453362737*0.003643036/2.384e-6,0.773010453362737*9.91821e-4/2.384e-6,0.773010453362737*9.6321e-5/2.384e-6,0.773010453362737*1.1444e-5/2.384e-6,0.773010453362737*1.65462e-4/2.384e-6,0.773010453362737*0.002110004/2.384e-6,0.773010453362737*0.016112804/2.384e-6,0.773010453362737*-0.019634247/2.384e-6,0.773010453362737*-0.002803326/2.384e-6,0.773010453362737*-2.77042e-4/2.384e-6,0.773010453362737*-1.6689e-5/2.384e-6,0.8206787908286602,0.3901806440322567,0.803207531480645*-4.77e-7/2.384e-6,0.803207531480645*1.07288e-4/2.384e-6,0.803207531480645*9.02653e-4/2.384e-6,0.803207531480645*0.002174854/2.384e-6,0.803207531480645*0.035586357/2.384e-6,0.803207531480645*0.003858566/2.384e-6,0.803207531480645*9.95159e-4/2.384e-6,0.803207531480645*9.346e-5/2.384e-6,0.803207531480645*1.0014e-5/2.384e-6,0.803207531480645*1.4019e-4/2.384e-6,0.803207531480645*0.001937389/2.384e-6,0.803207531480645*0.015233517/2.384e-6,0.803207531480645*-0.020506859/2.384e-6,0.803207531480645*-0.002974033/2.384e-6,0.803207531480645*-3.0756e-4/2.384e-6,0.803207531480645*-1.812e-5/2.384e-6,0.7416505462720353,0.5805693545089249,0.831469612302545*-4.77e-7/2.384e-6,0.831469612302545*1.08242e-4/2.384e-6,0.831469612302545*8.68797e-4/2.384e-6,0.831469612302545*0.001800537/2.384e-6,0.831469612302545*0.0354352/2.384e-6,0.831469612302545*0.004049301/2.384e-6,0.831469612302545*9.94205e-4/2.384e-6,0.831469612302545*9.0599e-5/2.384e-6,0.831469612302545*9.06e-6/2.384e-6,0.831469612302545*1.16348e-4/2.384e-6,0.831469612302545*0.001766682/2.384e-6,0.831469612302545*0.014358521/2.384e-6,0.831469612302545*-0.021372318/2.384e-6,0.831469612302545*-0.00314188/2.384e-6,0.831469612302545*-3.39031e-4/2.384e-6,0.831469612302545*-1.955e-5/2.384e-6,0.6681786379192989,0.7653668647301797,0.857728610000272*-4.77e-7/2.384e-6,0.857728610000272*1.08719e-4/2.384e-6,0.857728610000272*8.2922e-4/2.384e-6,0.857728610000272*0.001399517/2.384e-6,0.857728610000272*0.035242081/2.384e-6,0.857728610000272*0.00421524/2.384e-6,0.857728610000272*9.89437e-4/2.384e-6,0.857728610000272*8.7261e-5/2.384e-6,0.857728610000272*8.106e-6/2.384e-6,0.857728610000272*9.3937e-5/2.384e-6,0.857728610000272*0.001597881/2.384e-6,0.857728610000272*0.013489246/2.384e-6,0.857728610000272*-0.022228718/2.384e-6,0.857728610000272*-0.003306866/2.384e-6,0.857728610000272*-3.71456e-4/2.384e-6,0.857728610000272*-2.1458e-5/2.384e-6,0.5993769336819237,0.9427934736519954,0.881921264348355*-4.77e-7/2.384e-6,0.881921264348355*1.08719e-4/2.384e-6,0.881921264348355*7.8392e-4/2.384e-6,0.881921264348355*9.71317e-4/2.384e-6,0.881921264348355*0.035007/2.384e-6,0.881921264348355*0.004357815/2.384e-6,0.881921264348355*9.80854e-4/2.384e-6,0.881921264348355*8.3923e-5/2.384e-6,0.881921264348355*7.629e-6/2.384e-6,0.881921264348355*7.2956e-5/2.384e-6,0.881921264348355*0.001432419/2.384e-6,0.881921264348355*0.012627602/2.384e-6,0.881921264348355*-0.02307415/2.384e-6,0.881921264348355*-0.003467083/2.384e-6,0.881921264348355*-4.04358e-4/2.384e-6,0.881921264348355*-2.3365e-5/2.384e-6,0.5345111359507916,1.111140466039205,0.903989293123443*-9.54e-7/2.384e-6,0.903989293123443*1.08242e-4/2.384e-6,0.903989293123443*7.31945e-4/2.384e-6,0.903989293123443*5.15938e-4/2.384e-6,0.903989293123443*0.034730434/2.384e-6,0.903989293123443*0.004477024/2.384e-6,0.903989293123443*9.68933e-4/2.384e-6,0.903989293123443*8.0585e-5/2.384e-6,0.903989293123443*6.676e-6/2.384e-6,0.903989293123443*5.2929e-5/2.384e-6,0.903989293123443*0.001269817/2.384e-6,0.903989293123443*0.011775017/2.384e-6,0.903989293123443*-0.023907185/2.384e-6,0.903989293123443*-0.003622532/2.384e-6,0.903989293123443*-4.38213e-4/2.384e-6,0.903989293123443*-2.5272e-5/2.384e-6,0.4729647758913199,1.268786568327291,0.9238795325112867*-9.54e-7/2.384e-6,0.9238795325112867*1.06812e-4/2.384e-6,0.9238795325112867*6.74248e-4/2.384e-6,0.9238795325112867*3.3379e-5/2.384e-6,0.9238795325112867*0.034412861/2.384e-6,0.9238795325112867*0.004573822/2.384e-6,0.9238795325112867*9.54151e-4/2.384e-6,0.9238795325112867*7.6771e-5/2.384e-6,0.9238795325112867*6.199e-6/2.384e-6,0.9238795325112867*3.4332e-5/2.384e-6,0.9238795325112867*0.001111031/2.384e-6,0.9238795325112867*0.010933399/2.384e-6,0.9238795325112867*-0.024725437/2.384e-6,0.9238795325112867*-0.003771782/2.384e-6,0.9238795325112867*-4.72546e-4/2.384e-6,0.9238795325112867*-2.7657e-5/2.384e-6,0.41421356237309503,1.414213562373095,0.941544065183021*-9.54e-7/2.384e-6,0.941544065183021*1.05381e-4/2.384e-6,0.941544065183021*6.10352e-4/2.384e-6,0.941544065183021*-4.75883e-4/2.384e-6,0.941544065183021*0.03405571/2.384e-6,0.941544065183021*0.004649162/2.384e-6,0.941544065183021*9.35555e-4/2.384e-6,0.941544065183021*7.3433e-5/2.384e-6,0.941544065183021*5.245e-6/2.384e-6,0.941544065183021*1.7166e-5/2.384e-6,0.941544065183021*9.56535e-4/2.384e-6,0.941544065183021*0.010103703/2.384e-6,0.941544065183021*-0.025527/2.384e-6,0.941544065183021*-0.003914356/2.384e-6,0.941544065183021*-5.07355e-4/2.384e-6,0.941544065183021*-3.0041e-5/2.384e-6,0.3578057213145241,1.546020906725474,0.956940335732209*-9.54e-7/2.384e-6,0.956940335732209*1.0252e-4/2.384e-6,0.956940335732209*5.39303e-4/2.384e-6,0.956940335732209*-0.001011848/2.384e-6,0.956940335732209*0.033659935/2.384e-6,0.956940335732209*0.004703045/2.384e-6,0.956940335732209*9.15051e-4/2.384e-6,0.956940335732209*7.0095e-5/2.384e-6,0.956940335732209*4.768e-6/2.384e-6,0.956940335732209*9.54e-7/2.384e-6,0.956940335732209*8.06808e-4/2.384e-6,0.956940335732209*0.009287834/2.384e-6,0.956940335732209*-0.026310921/2.384e-6,0.956940335732209*-0.004048824/2.384e-6,0.956940335732209*-5.42164e-4/2.384e-6,0.956940335732209*-3.2425e-5/2.384e-6,0.3033466836073424,1.66293922460509,0.970031253194544*-1.431e-6/2.384e-6,0.970031253194544*9.9182e-5/2.384e-6,0.970031253194544*4.62532e-4/2.384e-6,0.970031253194544*-0.001573563/2.384e-6,0.970031253194544*0.033225536/2.384e-6,0.970031253194544*0.004737377/2.384e-6,0.970031253194544*8.91685e-4/2.384e-6,0.970031253194544*6.628e-5/2.384e-6,0.970031253194544*4.292e-6/2.384e-6,0.970031253194544*-1.3828e-5/2.384e-6,0.970031253194544*6.6185e-4/2.384e-6,0.970031253194544*0.008487225/2.384e-6,0.970031253194544*-0.02707386/2.384e-6,0.970031253194544*-0.004174709/2.384e-6,0.970031253194544*-5.76973e-4/2.384e-6,0.970031253194544*-3.4809e-5/2.384e-6,0.2504869601913055,1.76384252869671,0.98078528040323*-1.431e-6/2.384e-6,0.98078528040323*9.5367e-5/2.384e-6,0.98078528040323*3.78609e-4/2.384e-6,0.98078528040323*-0.002161503/2.384e-6,0.98078528040323*0.032754898/2.384e-6,0.98078528040323*0.004752159/2.384e-6,0.98078528040323*8.66413e-4/2.384e-6,0.98078528040323*6.2943e-5/2.384e-6,0.98078528040323*3.815e-6/2.384e-6,0.98078528040323*-2.718e-5/2.384e-6,0.98078528040323*5.22137e-4/2.384e-6,0.98078528040323*0.007703304/2.384e-6,0.98078528040323*-0.027815342/2.384e-6,0.98078528040323*-0.004290581/2.384e-6,0.98078528040323*-6.11782e-4/2.384e-6,0.98078528040323*-3.767e-5/2.384e-6,0.198912367379658,1.847759065022573,0.989176509964781*-1.907e-6/2.384e-6,0.989176509964781*9.0122e-5/2.384e-6,0.989176509964781*2.88486e-4/2.384e-6,0.989176509964781*-0.002774239/2.384e-6,0.989176509964781*0.03224802/2.384e-6,0.989176509964781*0.004748821/2.384e-6,0.989176509964781*8.38757e-4/2.384e-6,0.989176509964781*5.9605e-5/2.384e-6,0.989176509964781*3.338e-6/2.384e-6,0.989176509964781*-3.9577e-5/2.384e-6,0.989176509964781*3.88145e-4/2.384e-6,0.989176509964781*0.006937027/2.384e-6,0.989176509964781*-0.028532982/2.384e-6,0.989176509964781*-0.004395962/2.384e-6,0.989176509964781*-6.46591e-4/2.384e-6,0.989176509964781*-4.0531e-5/2.384e-6,0.1483359875383474,1.913880671464418,0.995184726672197*-1.907e-6/2.384e-6,0.995184726672197*8.44e-5/2.384e-6,0.995184726672197*1.91689e-4/2.384e-6,0.995184726672197*-0.003411293/2.384e-6,0.995184726672197*0.03170681/2.384e-6,0.995184726672197*0.004728317/2.384e-6,0.995184726672197*8.09669e-4/2.384e-6,0.995184726672197*5.579e-5/2.384e-6,0.995184726672197*3.338e-6/2.384e-6,0.995184726672197*-5.0545e-5/2.384e-6,0.995184726672197*2.59876e-4/2.384e-6,0.995184726672197*0.006189346/2.384e-6,0.995184726672197*-0.029224873/2.384e-6,0.995184726672197*-0.004489899/2.384e-6,0.995184726672197*-6.80923e-4/2.384e-6,0.995184726672197*-4.3392e-5/2.384e-6,0.09849140335716425,1.961570560806461,0.998795456205172*-2.384e-6/2.384e-6,0.998795456205172*7.7724e-5/2.384e-6,0.998795456205172*8.8215e-5/2.384e-6,0.998795456205172*-0.004072189/2.384e-6,0.998795456205172*0.031132698/2.384e-6,0.998795456205172*0.004691124/2.384e-6,0.998795456205172*7.79152e-4/2.384e-6,0.998795456205172*5.2929e-5/2.384e-6,0.998795456205172*2.861e-6/2.384e-6,0.998795456205172*-6.0558e-5/2.384e-6,0.998795456205172*1.37329e-4/2.384e-6,0.998795456205172*0.00546217/2.384e-6,0.998795456205172*-0.02989006/2.384e-6,0.998795456205172*-0.004570484/2.384e-6,0.998795456205172*-7.14302e-4/2.384e-6,0.998795456205172*-4.6253e-5/2.384e-6,0.04912684976946725,1.990369453344394,0.5*(0.035780907*Ee.SQRT2)/2.384e-6,0.5*(0.017876148*Ee.SQRT2)/2.384e-6,0.5*(0.003134727*Ee.SQRT2)/2.384e-6,0.5*(0.002457142*Ee.SQRT2)/2.384e-6,0.5*(9.71317e-4*Ee.SQRT2)/2.384e-6,0.5*(2.18868e-4*Ee.SQRT2)/2.384e-6,0.5*(1.01566e-4*Ee.SQRT2)/2.384e-6,0.5*(1.3828e-5*Ee.SQRT2)/2.384e-6,0.030526638/2.384e-6,0.004638195/2.384e-6,7.47204e-4/2.384e-6,4.9591e-5/2.384e-6,0.004756451/2.384e-6,2.1458e-5/2.384e-6,-6.9618e-5/2.384e-6],qe=[[2.382191739347913e-13,6.423305872147834e-13,9.400849094049688e-13,1.122435026096556e-12,1.183840321267481e-12,1.122435026096556e-12,9.40084909404969e-13,6.423305872147839e-13,2.382191739347918e-13,5.456116108943412e-12,4.878985199565852e-12,4.240448995017367e-12,3.559909094758252e-12,2.858043359288075e-12,2.156177623817898e-12,1.475637723558783e-12,8.371015190102974e-13,2.599706096327376e-13,-5.456116108943412e-12,-4.878985199565852e-12,-4.240448995017367e-12,-3.559909094758252e-12,-2.858043359288076e-12,-2.156177623817898e-12,-1.475637723558783e-12,-8.371015190102975e-13,-2.599706096327376e-13,-2.382191739347923e-13,-6.423305872147843e-13,-9.400849094049696e-13,-1.122435026096556e-12,-1.183840321267481e-12,-1.122435026096556e-12,-9.400849094049694e-13,-6.42330587214784e-13,-2.382191739347918e-13],[2.382191739347913e-13,6.423305872147834e-13,9.400849094049688e-13,1.122435026096556e-12,1.183840321267481e-12,1.122435026096556e-12,9.400849094049688e-13,6.423305872147841e-13,2.382191739347918e-13,5.456116108943413e-12,4.878985199565852e-12,4.240448995017367e-12,3.559909094758253e-12,2.858043359288075e-12,2.156177623817898e-12,1.475637723558782e-12,8.371015190102975e-13,2.599706096327376e-13,-5.461314069809755e-12,-4.921085770524055e-12,-4.343405037091838e-12,-3.732668368707687e-12,-3.093523840190885e-12,-2.430835727329465e-12,-1.734679010007751e-12,-9.74825365660928e-13,-2.797435120168326e-13,0,0,0,0,0,0,-2.283748241799531e-13,-4.037858874020686e-13,-2.146547464825323e-13],[0.1316524975873958,0.414213562373095,0.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,0.984807753012208,0.6427876096865394,0.3420201433256688,0.9396926207859084,-0.1736481776669303,-0.7660444431189779,0.8660254037844387,0.5,-0.5144957554275265,-0.4717319685649723,-0.3133774542039019,-0.1819131996109812,-0.09457419252642064,-0.04096558288530405,-0.01419856857247115,-0.003699974673760037,0.8574929257125442,0.8817419973177052,0.9496286491027329,0.9833145924917901,0.9955178160675857,0.9991605581781475,0.999899195244447,0.9999931550702802],[0,0,0,0,0,0,2.283748241799531e-13,4.037858874020686e-13,2.146547464825323e-13,5.461314069809755e-12,4.921085770524055e-12,4.343405037091838e-12,3.732668368707687e-12,3.093523840190885e-12,2.430835727329466e-12,1.734679010007751e-12,9.74825365660928e-13,2.797435120168326e-13,-5.456116108943413e-12,-4.878985199565852e-12,-4.240448995017367e-12,-3.559909094758253e-12,-2.858043359288075e-12,-2.156177623817898e-12,-1.475637723558782e-12,-8.371015190102975e-13,-2.599706096327376e-13,-2.382191739347913e-13,-6.423305872147834e-13,-9.400849094049688e-13,-1.122435026096556e-12,-1.183840321267481e-12,-1.122435026096556e-12,-9.400849094049688e-13,-6.423305872147841e-13,-2.382191739347918e-13]],Xe=qe[ne.SHORT_TYPE],De=qe[ne.SHORT_TYPE],Ye=qe[ne.SHORT_TYPE],Ce=qe[ne.SHORT_TYPE],Fe=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];this.mdct_sub48=function(ze,Ge,Ze){for(var Ke=Ge,Qe=286,We=0;We<ze.channels_out;We++){for(var Ue=0;Ue<ze.mode_gr;Ue++){for(var $e=ze.l3_side.tt[Ue][We],es=$e.xr,ss=0,as=ze.sb_sample[We][1-Ue],_s=0,ts=0,Je;9>ts;ts++)for(Ve(Ke,Qe,as[_s]),Ve(Ke,Qe+32,as[_s+1]),_s+=2,Qe+=64,Je=1;32>Je;Je+=2)as[_s-1][Je]*=-1;for(Je=0;32>Je;Je++,ss+=18){var ns=$e.block_type,is=ze.sb_sample[We][Ue],ls=ze.sb_sample[We][1-Ue];if(0!=$e.mixed_block_flag&&2>Je&&(ns=0),1e-12>ze.amp_filter[Je])xe.fill(es,ss+0,ss+18,0);else{if(1>ze.amp_filter[Je])for(var ts=0;18>ts;ts++)ls[ts][Fe[Je]]*=ze.amp_filter[Je];if(ns==ne.SHORT_TYPE){for(var ts=-12/4,rs;0>ts;ts++)rs=qe[ne.SHORT_TYPE][ts+3],es[ss+3*ts+9]=is[9+ts][Fe[Je]]*rs-is[8-ts][Fe[Je]],es[ss+3*ts+18]=is[14-ts][Fe[Je]]*rs+is[15+ts][Fe[Je]],es[ss+3*ts+10]=is[15+ts][Fe[Je]]*rs-is[14-ts][Fe[Je]],es[ss+3*ts+19]=ls[2-ts][Fe[Je]]*rs+ls[3+ts][Fe[Je]],es[ss+3*ts+11]=ls[3+ts][Fe[Je]]*rs-ls[2-ts][Fe[Je]],es[ss+3*ts+20]=ls[8-ts][Fe[Je]]*rs+ls[9+ts][Fe[Je]];Ie(es,ss)}else{for(var os=B(18),ts=-36/4;0>ts;ts++){var ps,ms;ps=qe[ns][ts+27]*ls[ts+9][Fe[Je]]+qe[ns][ts+36]*ls[8-ts][Fe[Je]],ms=qe[ns][ts+9]*is[ts+9][Fe[Je]]-qe[ns][ts+18]*is[8-ts][Fe[Je]],os[ts+9]=ps-ms*Xe[3+ts+9],os[ts+18]=ps*Xe[3+ts+9]+ms}Le(es,ss,os)}}if(ns!=ne.SHORT_TYPE&&0!=Je)for(var ts=7;0<=ts;--ts){var hs,ds;hs=es[ss+ts]*Ye[20+ts]+es[ss+-1-ts]*Ce[28+ts],ds=es[ss+ts]*Ce[28+ts]-es[ss+-1-ts]*Ye[20+ts],es[ss+-1-ts]=hs,es[ss+ts]=ds}}}if(Ke=Ze,Qe=286,1==ze.mode_gr)for(var us=0;18>us;us++)ye.arraycopy(ze.sb_sample[We][1][us],0,ze.sb_sample[We][0][us],0,32)}}}function ne(){function Ve(Ce){var Fe,ze;if(0==Ce.ATH.useAdjust)return void(Ce.ATH.adjust=1);if(ze=Ce.loudness_sq[0][0],Fe=Ce.loudness_sq[1][0],2==Ce.channels_out?(ze+=Ce.loudness_sq[0][1],Fe+=Ce.loudness_sq[1][1]):(ze+=ze,Fe+=Fe),2==Ce.mode_gr&&(ze=Math.max(ze,Fe)),ze*=0.5,ze*=Ce.ATH.aaSensitivityP,0.03125<ze)1<=Ce.ATH.adjust?Ce.ATH.adjust=1:Ce.ATH.adjust<Ce.ATH.adjustLimit&&(Ce.ATH.adjust=Ce.ATH.adjustLimit),Ce.ATH.adjustLimit=1;else{var Ge=31.98*ze+6.25e-4;Ce.ATH.adjust>=Ge?(Ce.ATH.adjust*=0.075*Ge+0.925,Ce.ATH.adjust<Ge&&(Ce.ATH.adjust=Ge)):Ce.ATH.adjustLimit>=Ge?Ce.ATH.adjust=Ge:Ce.ATH.adjust<Ce.ATH.adjustLimit&&(Ce.ATH.adjust=Ce.ATH.adjustLimit),Ce.ATH.adjustLimit=Ge}}function Ie(Ce){var Fe,ze;for(Ce.bitrate_stereoMode_Hist[Ce.bitrate_index][4]++,Ce.bitrate_stereoMode_Hist[15][4]++,2==Ce.channels_out&&(Ce.bitrate_stereoMode_Hist[Ce.bitrate_index][Ce.mode_ext]++,Ce.bitrate_stereoMode_Hist[15][Ce.mode_ext]++),Fe=0;Fe<Ce.mode_gr;++Fe)for(ze=0;ze<Ce.channels_out;++ze){var Ge=0|Ce.l3_side.tt[Fe][ze].block_type;0!=Ce.l3_side.tt[Fe][ze].mixed_block_flag&&(Ge=4),Ce.bitrate_blockType_Hist[Ce.bitrate_index][Ge]++,Ce.bitrate_blockType_Hist[Ce.bitrate_index][5]++,Ce.bitrate_blockType_Hist[15][Ge]++,Ce.bitrate_blockType_Hist[15][5]++}}function Le(Ce,Fe){var ze=Ce.internal_flags,Ge,Ze;if(0==ze.lame_encode_frame_init){var Ke,Qe,We=B(2014),Ue=B(2014);for(ze.lame_encode_frame_init=1,Ke=0,Qe=0;Ke<286+576*(1+ze.mode_gr);++Ke)Ke<576*ze.mode_gr?(We[Ke]=0,2==ze.channels_out&&(Ue[Ke]=0)):(We[Ke]=Fe[0][Qe],2==ze.channels_out&&(Ue[Ke]=Fe[1][Qe]),++Qe);for(Ze=0;Ze<ze.mode_gr;Ze++)for(Ge=0;Ge<ze.channels_out;Ge++)ze.l3_side.tt[Ze][Ge].block_type=ne.SHORT_TYPE;Ye.mdct_sub48(ze,We,Ue)}}var je=ne.FFTOFFSET,Ne=ne.MPG_MD_MS_LR,Oe=null;this.psy=null;var qe=null,Xe=null,De=null;this.setModules=function(Ce,Fe,ze,Ge){Oe=Ce,this.psy=Fe,qe=Fe,Xe=Ge,De=ze};var Ye=new te;this.lame_encode_mp3_frame=function(Ce,Fe,ze,Ge,Ze,Ke){var We=P([2,2]),Qe;We[0][0]=new _e,We[0][1]=new _e,We[1][0]=new _e,We[1][1]=new _e;var Ue=P([2,2]);Ue[0][0]=new _e,Ue[0][1]=new _e,Ue[1][0]=new _e,Ue[1][1]=new _e;var $e=[null,null],es=Ce.internal_flags,ss=T([2,4]),as=[0.5,0.5],_s=[[0,0],[0,0]],ts=[[0,0],[0,0]],Je,ns,is,ls;if($e[0]=Fe,$e[1]=ze,0==es.lame_encode_frame_init&&Le(Ce,$e),es.padding=0,0>(es.slot_lag-=es.frac_SpF)&&(es.slot_lag+=Ce.out_samplerate,es.padding=1),0!=es.psymodel){var os=[null,null],ps=0,ms=S(2),rs;for(ls=0;ls<es.mode_gr;ls++){for(is=0;is<es.channels_out;is++)os[is]=$e[is],ps=576+576*ls-ne.FFTOFFSET;if(rs=Ce.VBR==V.vbr_mtrh||Ce.VBR==V.vbr_mt?qe.L3psycho_anal_vbr(Ce,os,ps,ls,We,Ue,_s[ls],ts[ls],ss[ls],ms):qe.L3psycho_anal_ns(Ce,os,ps,ls,We,Ue,_s[ls],ts[ls],ss[ls],ms),0!=rs)return-4;for(Ce.mode==I.JOINT_STEREO&&(as[ls]=ss[ls][2]+ss[ls][3],0<as[ls]&&(as[ls]=ss[ls][3]/as[ls])),is=0;is<es.channels_out;is++){var hs=es.l3_side.tt[ls][is];hs.block_type=ms[is],hs.mixed_block_flag=0}}}else for(ls=0;ls<es.mode_gr;ls++)for(is=0;is<es.channels_out;is++)es.l3_side.tt[ls][is].block_type=NORM_TYPE,es.l3_side.tt[ls][is].mixed_block_flag=0,ts[ls][is]=_s[ls][is]=700;if(Ve(es),Ye.mdct_sub48(es,$e[0],$e[1]),es.mode_ext=ne.MPG_MD_LR_LR,Ce.force_ms)es.mode_ext=ne.MPG_MD_MS_LR;else if(Ce.mode==I.JOINT_STEREO){var ds=0,us=0;for(ls=0;ls<es.mode_gr;ls++)for(is=0;is<es.channels_out;is++)ds+=ts[ls][is],us+=_s[ls][is];if(ds<=1*us){var gs=es.l3_side.tt[0],Ss=es.l3_side.tt[es.mode_gr-1];gs[0].block_type==gs[1].block_type&&Ss[0].block_type==Ss[1].block_type&&(es.mode_ext=ne.MPG_MD_MS_LR)}}if(es.mode_ext==Ne?(Je=Ue,ns=ts):(Je=We,ns=_s),Ce.analysis&&null!=es.pinfo)for(ls=0;ls<es.mode_gr;ls++)for(is=0;is<es.channels_out;is++)es.pinfo.ms_ratio[ls]=es.ms_ratio[ls],es.pinfo.ms_ener_ratio[ls]=as[ls],es.pinfo.blocktype[ls][is]=es.l3_side.tt[ls][is].block_type,es.pinfo.pe[ls][is]=ns[ls][is],ye.arraycopy(es.l3_side.tt[ls][is].xr,0,es.pinfo.xr[ls][is],0,576),es.mode_ext==Ne&&(es.pinfo.ers[ls][is]=es.pinfo.ers[ls][is+2],ye.arraycopy(es.pinfo.energy[ls][is+2],0,es.pinfo.energy[ls][is],0,es.pinfo.energy[ls][is].length));if(Ce.VBR==V.vbr_off||Ce.VBR==V.vbr_abr){var Bs,Rs;for(Bs=0;18>Bs;Bs++)es.nsPsy.pefirbuf[Bs]=es.nsPsy.pefirbuf[Bs+1];for(Rs=0,ls=0;ls<es.mode_gr;ls++)for(is=0;is<es.channels_out;is++)Rs+=ns[ls][is];for(es.nsPsy.pefirbuf[18]=Rs,Rs=es.nsPsy.pefirbuf[9],Bs=0;9>Bs;Bs++)Rs+=(es.nsPsy.pefirbuf[Bs]+es.nsPsy.pefirbuf[18-Bs])*ne.fircoef[Bs];for(Rs=3350*es.mode_gr*es.channels_out/Rs,ls=0;ls<es.mode_gr;ls++)for(is=0;is<es.channels_out;is++)ns[ls][is]*=Rs}if(es.iteration_loop.iteration_loop(Ce,ns,as,Je),Oe.format_bitstream(Ce),Qe=Oe.copy_buffer(es,Ge,Ze,Ke,1),Ce.bWriteVbrTag&&Xe.addVbrFrame(Ce),Ce.analysis&&null!=es.pinfo){for(is=0;is<es.channels_out;is++){var As;for(As=0;As<je;As++)es.pinfo.pcmdata[is][As]=es.pinfo.pcmdata[is][As+Ce.framesize];for(As=je;1600>As;As++)es.pinfo.pcmdata[is][As]=$e[is][As-je]}De.set_frame_pinfo(Ce,Je)}return Ie(es),Qe}}function ie(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function le(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[S(4),S(4)];for(var Ve=0;2>Ve;Ve++)for(var Ie=0;2>Ie;Ie++)this.tt[Ve][Ie]=new se}function oe(){this.last_en_subshort=T([4,9]),this.lastAttacks=S(4),this.pefirbuf=B(19),this.longfact=B(ne.SBMAX_l),this.shortfact=B(ne.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function be(){this.l=B(ne.SBMAX_l),this.s=T([ne.SBMAX_s,3]);var Ve=this;this.assign=function(Ie){ye.arraycopy(Ie.l,0,Ve.l,0,ne.SBMAX_l);for(var Le=0;Le<ne.SBMAX_s;Le++)for(var je=0;3>je;je++)Ve.s[Le][je]=Ie.s[Le][je]}}function ce(){function Ve(){this.write_timing=0,this.ptr=0,this.buf=_(40)}this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=T([2,ce.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new le,this.ms_ratio=B(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=S(2),this.CurrentStep=S(2),this.masking_lower=0,this.bv_scf=S(576),this.pseudohalf=S(He.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=[,,],this.blackfilt=Array(2*ce.BPC+1),this.itime=R(2),this.sideinfo_len=0,this.sb_sample=T([2,2,18,ne.SBLIMIT]),this.amp_filter=B(32),this.header=Array(ce.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new J,this.minval_l=B(ne.CBANDS),this.minval_s=B(ne.CBANDS),this.nb_1=T([4,ne.CBANDS]),this.nb_2=T([4,ne.CBANDS]),this.nb_s1=T([4,ne.CBANDS]),this.nb_s2=T([4,ne.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=[,,,,],this.en=[,,,,],this.tot_ener=B(4),this.loudness_sq=T([2,2]),this.loudness_sq_save=B(2),this.mld_l=B(ne.SBMAX_l),this.mld_s=B(ne.SBMAX_s),this.bm_l=S(ne.SBMAX_l),this.bo_l=S(ne.SBMAX_l),this.bm_s=S(ne.SBMAX_s),this.bo_s=S(ne.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=E([ne.CBANDS,2]),this.s3ind_s=E([ne.CBANDS,2]),this.numlines_s=S(ne.CBANDS),this.numlines_l=S(ne.CBANDS),this.rnumlines_l=B(ne.CBANDS),this.mld_cb_l=B(ne.CBANDS),this.mld_cb_s=B(ne.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=B(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=S(2),this.nsPsy=new oe,this.VBR_seek_table=new ie,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=E([16,5]),this.bitrate_blockType_Hist=E([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var Le=0;Le<this.en.length;Le++)this.en[Le]=new be;for(var Le=0;Le<this.thm.length;Le++)this.thm[Le]=new be;for(var Le=0;Le<this.header.length;Le++)this.header[Le]=new Ve}function fe(){function Ve(Oe,qe,Xe){var De=0,Ye,Ce,Fe;Xe<<=1;var ze=qe+Xe;Ye=4;do{var Ge,Ze,Ke,Qe,We,Ue,Je;Je=Ye>>1,Qe=Ye,We=Ye<<1,Ue=We+Qe,Ye=We<<1,Ce=qe,Fe=Ce+Je;do{var $e,es,ss,as;es=Oe[Ce+0]-Oe[Ce+Qe],$e=Oe[Ce+0]+Oe[Ce+Qe],as=Oe[Ce+We]-Oe[Ce+Ue],ss=Oe[Ce+We]+Oe[Ce+Ue],Oe[Ce+We]=$e-ss,Oe[Ce+0]=$e+ss,Oe[Ce+Ue]=es-as,Oe[Ce+Qe]=es+as,es=Oe[Fe+0]-Oe[Fe+Qe],$e=Oe[Fe+0]+Oe[Fe+Qe],as=Ee.SQRT2*Oe[Fe+Ue],ss=Ee.SQRT2*Oe[Fe+We],Oe[Fe+We]=$e-ss,Oe[Fe+0]=$e+ss,Oe[Fe+Ue]=es-as,Oe[Fe+Qe]=es+as,Fe+=Ye,Ce+=Ye}while(Ce<ze);for(Ze=je[De+0],Ge=je[De+1],Ke=1;Ke<Je;Ke++){var _s,ts;_s=1-2*Ge*Ge,ts=2*Ge*Ze,Ce=qe+Ke,Fe=qe+Qe-Ke;do{var ns,is,ls,$e,es,rs,ss,os,as,ps;is=ts*Oe[Ce+Qe]-_s*Oe[Fe+Qe],ns=_s*Oe[Ce+Qe]+ts*Oe[Fe+Qe],es=Oe[Ce+0]-ns,$e=Oe[Ce+0]+ns,rs=Oe[Fe+0]-is,ls=Oe[Fe+0]+is,is=ts*Oe[Ce+Ue]-_s*Oe[Fe+Ue],ns=_s*Oe[Ce+Ue]+ts*Oe[Fe+Ue],as=Oe[Ce+We]-ns,ss=Oe[Ce+We]+ns,ps=Oe[Fe+We]-is,os=Oe[Fe+We]+is,is=Ge*ss-Ze*ps,ns=Ze*ss+Ge*ps,Oe[Ce+We]=$e-ns,Oe[Ce+0]=$e+ns,Oe[Fe+Ue]=rs-is,Oe[Fe+Qe]=rs+is,is=Ze*os-Ge*as,ns=Ge*os+Ze*as,Oe[Fe+We]=ls-ns,Oe[Fe+0]=ls+ns,Oe[Ce+Ue]=es-is,Oe[Ce+Qe]=es+is,Fe+=Ye,Ce+=Ye}while(Ce<ze);_s=Ze,Ze=_s*je[De+0]-Ge*je[De+1],Ge=_s*je[De+1]+Ge*je[De+0]}De+=2}while(Ye<Xe)}var Ie=B(ne.BLKSIZE),Le=B(ne.BLKSIZE_s/2),je=[0.9238795325112867,0.3826834323650898,0.9951847266721969,0.0980171403295606,0.9996988186962042,0.02454122852291229,0.9999811752826011,0.006135884649154475],Ne=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(Oe,qe,Xe,De,Ye){for(var Ce=0;3>Ce;Ce++){var Fe=ne.BLKSIZE_s/2,ze=65535&192*(Ce+1),Ge=ne.BLKSIZE_s/8-1;do{var Ze,Ke,Qe,We,Ue,Je=255&Ne[Ge<<2];Ze=Le[Je]*De[Xe][Ye+Je+ze],Ue=Le[127-Je]*De[Xe][Ye+Je+ze+128],Ke=Ze-Ue,Ze+=Ue,Qe=Le[Je+64]*De[Xe][Ye+Je+ze+64],Ue=Le[63-Je]*De[Xe][Ye+Je+ze+192],We=Qe-Ue,Qe+=Ue,Fe-=4,qe[Ce][Fe+0]=Ze+Qe,qe[Ce][Fe+2]=Ze-Qe,qe[Ce][Fe+1]=Ke+We,qe[Ce][Fe+3]=Ke-We,Ze=Le[Je+1]*De[Xe][Ye+Je+ze+1],Ue=Le[126-Je]*De[Xe][Ye+Je+ze+129],Ke=Ze-Ue,Ze+=Ue,Qe=Le[Je+65]*De[Xe][Ye+Je+ze+65],Ue=Le[62-Je]*De[Xe][Ye+Je+ze+193],We=Qe-Ue,Qe+=Ue,qe[Ce][Fe+ne.BLKSIZE_s/2+0]=Ze+Qe,qe[Ce][Fe+ne.BLKSIZE_s/2+2]=Ze-Qe,qe[Ce][Fe+ne.BLKSIZE_s/2+1]=Ke+We,qe[Ce][Fe+ne.BLKSIZE_s/2+3]=Ke-We}while(0<=--Ge);Ve(qe[Ce],Fe,ne.BLKSIZE_s/2)}},this.fft_long=function(Oe,qe,Xe,De,Ye){var Ce=ne.BLKSIZE/8-1,Fe=ne.BLKSIZE/2;do{var ze,Ge,Ze,Ke,Qe,We=255&Ne[Ce];ze=Ie[We]*De[Xe][Ye+We],Qe=Ie[We+512]*De[Xe][Ye+We+512],Ge=ze-Qe,ze+=Qe,Ze=Ie[We+256]*De[Xe][Ye+We+256],Qe=Ie[We+768]*De[Xe][Ye+We+768],Ke=Ze-Qe,Ze+=Qe,Fe-=4,qe[Fe+0]=ze+Ze,qe[Fe+2]=ze-Ze,qe[Fe+1]=Ge+Ke,qe[Fe+3]=Ge-Ke,ze=Ie[We+1]*De[Xe][Ye+We+1],Qe=Ie[We+513]*De[Xe][Ye+We+513],Ge=ze-Qe,ze+=Qe,Ze=Ie[We+257]*De[Xe][Ye+We+257],Qe=Ie[We+769]*De[Xe][Ye+We+769],Ke=Ze-Qe,Ze+=Qe,qe[Fe+ne.BLKSIZE/2+0]=ze+Ze,qe[Fe+ne.BLKSIZE/2+2]=ze-Ze,qe[Fe+ne.BLKSIZE/2+1]=Ge+Ke,qe[Fe+ne.BLKSIZE/2+3]=Ge-Ke}while(0<=--Ce);Ve(qe,Fe,ne.BLKSIZE/2)},this.init_fft=function(){for(var qe=0;qe<ne.BLKSIZE;qe++)Ie[qe]=0.42-0.5*Math.cos(2*Math.PI*(qe+.5)/ne.BLKSIZE)+0.08*Math.cos(4*Math.PI*(qe+.5)/ne.BLKSIZE);for(var qe=0;qe<ne.BLKSIZE_s/2;qe++)Le[qe]=0.5*(1-Math.cos(2*Math.PI*(qe+0.5)/ne.BLKSIZE_s))}}function me(){function Ve(Js){return Js}function Ie(Js,$s){for(var ea=0,sa=0;sa<ne.BLKSIZE/2;++sa)ea+=Js[sa]*$s.ATH.eql_w[sa];return ea*=Es,ea}function Le(Js,$s,ea,sa,aa,_a,ta,na,ia,la,ra){var oa=Js.internal_flags;if(2>ia)Bs.fft_long(oa,sa[aa],ia,la,ra),Bs.fft_short(oa,_a[ta],ia,la,ra);else if(2==ia){for(var ba=ne.BLKSIZE-1;0<=ba;--ba){var fa=sa[aa+0][ba],pa=sa[aa+1][ba];sa[aa+0][ba]=0.5*((fa+pa)*Ee.SQRT2),sa[aa+1][ba]=0.5*((fa-pa)*Ee.SQRT2)}for(var ma=2;0<=ma;--ma)for(var ba=ne.BLKSIZE_s-1;0<=ba;--ba){var fa=_a[ta+0][ma][ba],pa=_a[ta+1][ma][ba];_a[ta+0][ma][ba]=0.5*((fa+pa)*Ee.SQRT2),_a[ta+1][ma][ba]=0.5*((fa-pa)*Ee.SQRT2)}}$s[0]=Ve(sa[aa+0][0]),$s[0]*=$s[0];for(var ba=ne.BLKSIZE/2-1;0<=ba;--ba){var ha=sa[aa+0][ne.BLKSIZE/2-ba],da=sa[aa+0][ne.BLKSIZE/2+ba];$s[ne.BLKSIZE/2-ba]=Ve(0.5*(ha*ha+da*da))}for(var ma=2;0<=ma;--ma){ea[ma][0]=_a[ta+0][ma][0],ea[ma][0]*=ea[ma][0];for(var ba=ne.BLKSIZE_s/2-1;0<=ba;--ba){var ha=_a[ta+0][ma][ne.BLKSIZE_s/2-ba],da=_a[ta+0][ma][ne.BLKSIZE_s/2+ba];ea[ma][ne.BLKSIZE_s/2-ba]=Ve(0.5*(ha*ha+da*da))}}{for(var ua=0,ba=11;ba<ne.HBLKSIZE;ba++)ua+=$s[ba];oa.tot_ener[ia]=ua}if(Js.analysis){for(var ba=0;ba<ne.HBLKSIZE;ba++)oa.pinfo.energy[na][ia][ba]=oa.pinfo.energy_save[ia][ba],oa.pinfo.energy_save[ia][ba]=$s[ba];oa.pinfo.pe[na][ia]=oa.pe[ia]}2==Js.athaa_loudapprox&&2>ia&&(oa.loudness_sq[na][ia]=oa.loudness_sq_save[ia],oa.loudness_sq_save[ia]=Ie($s,oa))}function je(){Xs=Math.pow(10,(8+1)/16),Ds=Math.pow(10,(23+1)/16),Ys=Math.pow(10,15/10)}function Ne(Js,$s,ea,sa,aa,_a){var ta;if(!($s>Js)){if(Js>=$s*Ds)return Js+$s;ta=Js/$s}else if($s<Js*Ds)ta=$s/Js;else return Js+$s;if(Js+=$s,6>=sa+3){if(ta>=Xs)return Js;var na=0|Ee.FAST_LOG10_X(ta,16);return Js*zs[na]}var na=0|Ee.FAST_LOG10_X(ta,16);if($s=0==_a?aa.ATH.cb_l[ea]*aa.ATH.adjust:aa.ATH.cb_s[ea]*aa.ATH.adjust,Js<Ys*$s){if(Js>$s){var ia,la;return ia=1,13>=na&&(ia=Gs[na]),la=Ee.FAST_LOG10_X(Js/$s,10/15),Js*((Fs[na]-ia)*la+ia)}return 13<na?Js:Js*Gs[na]}return Js*Fs[na]}function Oe(Js,$s,ea){var sa;if(0>Js&&(Js=0),0>$s&&($s=0),0>=Js)return $s;if(0>=$s)return Js;if(sa=$s>Js?$s/Js:Js/$s,-2<=ea&&2>=ea){if(sa>=Xs)return Js+$s;var aa=0|Ee.FAST_LOG10_X(sa,16);return(Js+$s)*Zs[aa]}return sa<Ds?Js+$s:(Js<$s&&(Js=$s),Js)}function qe(Js,$s){var ea=Js.internal_flags;if(1<ea.channels_out){for(var sa=0;sa<ne.SBMAX_l;sa++){var aa=ea.thm[0].l[sa],_a=ea.thm[1].l[sa];ea.thm[0].l[sa]+=_a*$s,ea.thm[1].l[sa]+=aa*$s}for(var sa=0;sa<ne.SBMAX_s;sa++)for(var ta=0;3>ta;ta++){var aa=ea.thm[0].s[sa][ta],_a=ea.thm[1].s[sa][ta];ea.thm[0].s[sa][ta]+=_a*$s,ea.thm[1].s[sa][ta]+=aa*$s}}}function Xe(Js){for(var $s=0;$s<ne.SBMAX_l;$s++)if(!(Js.thm[0].l[$s]>1.58*Js.thm[1].l[$s]||Js.thm[1].l[$s]>1.58*Js.thm[0].l[$s])){var ea=Js.mld_l[$s]*Js.en[3].l[$s],sa=Math.max(Js.thm[2].l[$s],Math.min(Js.thm[3].l[$s],ea));ea=Js.mld_l[$s]*Js.en[2].l[$s];var aa=Math.max(Js.thm[3].l[$s],Math.min(Js.thm[2].l[$s],ea));Js.thm[2].l[$s]=sa,Js.thm[3].l[$s]=aa}for(var $s=0;$s<ne.SBMAX_s;$s++)for(var _a=0;3>_a;_a++)if(!(Js.thm[0].s[$s][_a]>1.58*Js.thm[1].s[$s][_a]||Js.thm[1].s[$s][_a]>1.58*Js.thm[0].s[$s][_a])){var ea=Js.mld_s[$s]*Js.en[3].s[$s][_a],sa=Math.max(Js.thm[2].s[$s][_a],Math.min(Js.thm[3].s[$s][_a],ea));ea=Js.mld_s[$s]*Js.en[2].s[$s][_a];var aa=Math.max(Js.thm[3].s[$s][_a],Math.min(Js.thm[2].s[$s][_a],ea));Js.thm[2].s[$s][_a]=sa,Js.thm[3].s[$s][_a]=aa}}function De(Js,$s,ea){var sa=$s,aa=Math.pow(10,ea);$s*=2,sa*=2;for(var _a=0;_a<ne.SBMAX_l;_a++){var ta,na,ia,la;if(la=Js.ATH.cb_l[Js.bm_l[_a]]*aa,ta=Math.min(Math.max(Js.thm[0].l[_a],la),Math.max(Js.thm[1].l[_a],la)),na=Math.max(Js.thm[2].l[_a],la),ia=Math.max(Js.thm[3].l[_a],la),ta*$s<na+ia){var ra=ta*sa/(na+ia);na*=ra,ia*=ra}Js.thm[2].l[_a]=Math.min(na,Js.thm[2].l[_a]),Js.thm[3].l[_a]=Math.min(ia,Js.thm[3].l[_a])}aa*=ne.BLKSIZE_s/ne.BLKSIZE;for(var _a=0;_a<ne.SBMAX_s;_a++)for(var oa=0;3>oa;oa++){var ta,na,ia,la;if(la=Js.ATH.cb_s[Js.bm_s[_a]]*aa,ta=Math.min(Math.max(Js.thm[0].s[_a][oa],la),Math.max(Js.thm[1].s[_a][oa],la)),na=Math.max(Js.thm[2].s[_a][oa],la),ia=Math.max(Js.thm[3].s[_a][oa],la),ta*$s<na+ia){var ra=ta*$s/(na+ia);na*=ra,ia*=ra}Js.thm[2].s[_a][oa]=Math.min(Js.thm[2].s[_a][oa],na),Js.thm[3].s[_a][oa]=Math.min(Js.thm[3].s[_a][oa],ia)}}function Ye(Js,$s,ea,sa,aa){var _a,ta,na=0,ia=0;for(_a=ta=0;_a<ne.SBMAX_s;++ta,++_a){for(var la=Js.bo_s[_a],ra=Js.npart_s,oa=la<ra?la:ra;ta<oa;)na+=$s[ta],ia+=ea[ta],ta++;if(Js.en[sa].s[_a][aa]=na,Js.thm[sa].s[_a][aa]=ia,ta>=ra){++_a;break}{var ba=Js.PSY.bo_s_weight[_a],fa=1-ba;na=ba*$s[ta],ia=ba*ea[ta],Js.en[sa].s[_a][aa]+=na,Js.thm[sa].s[_a][aa]+=ia,na=fa*$s[ta],ia=fa*ea[ta]}}for(;_a<ne.SBMAX_s;++_a)Js.en[sa].s[_a][aa]=0,Js.thm[sa].s[_a][aa]=0}function Ce(Js,$s,ea,sa){var aa,_a,ta=0,na=0;for(aa=_a=0;aa<ne.SBMAX_l;++_a,++aa){for(var ia=Js.bo_l[aa],la=Js.npart_l,ra=ia<la?ia:la;_a<ra;)ta+=$s[_a],na+=ea[_a],_a++;if(Js.en[sa].l[aa]=ta,Js.thm[sa].l[aa]=na,_a>=la){++aa;break}{var oa=Js.PSY.bo_l_weight[aa],ba=1-oa;ta=oa*$s[_a],na=oa*ea[_a],Js.en[sa].l[aa]+=ta,Js.thm[sa].l[aa]+=na,ta=ba*$s[_a],na=ba*ea[_a]}}for(;aa<ne.SBMAX_l;++aa)Js.en[sa].l[aa]=0,Js.thm[sa].l[aa]=0}function Fe(Js,$s,ea,sa,aa,_a){var ta=Js.internal_flags,na,ia;for(ia=na=0;ia<ta.npart_s;++ia){for(var la=0,ra=0,oa=ta.numlines_s[ia],ba=0,fa;ba<oa;++ba,++na)fa=$s[_a][na],la+=fa,ra<fa&&(ra=fa);ea[ia]=la}for(na=ia=0;ia<ta.npart_s;ia++){var pa=ta.s3ind_s[ia][0],ma=ta.s3_ss[na++]*ea[pa];for(++pa;pa<=ta.s3ind_s[ia][1];)ma+=ta.s3_ss[na]*ea[pa],++na,++pa;{var ha=2*ta.nb_s1[aa][ia];sa[ia]=Math.min(ma,ha)}if(ta.blocktype_old[1&aa]==ne.SHORT_TYPE){var ha=16*ta.nb_s2[aa][ia],da=sa[ia];sa[ia]=Math.min(ha,da)}ta.nb_s2[aa][ia]=ta.nb_s1[aa][ia],ta.nb_s1[aa][ia]=ma}for(;ia<=ne.CBANDS;++ia)ea[ia]=0,sa[ia]=0}function ze(Js,$s,ea,sa){var aa=Js.internal_flags;Js.short_blocks!=H.short_block_coupled||0!=$s[0]&&0!=$s[1]||($s[0]=$s[1]=0);for(var _a=0;_a<aa.channels_out;_a++)sa[_a]=ne.NORM_TYPE,Js.short_blocks==H.short_block_dispensed&&($s[_a]=1),Js.short_blocks==H.short_block_forced&&($s[_a]=0),0==$s[_a]?(sa[_a]=ne.SHORT_TYPE,aa.blocktype_old[_a]==ne.NORM_TYPE&&(aa.blocktype_old[_a]=ne.START_TYPE),aa.blocktype_old[_a]==ne.STOP_TYPE&&(aa.blocktype_old[_a]=ne.SHORT_TYPE)):aa.blocktype_old[_a]==ne.SHORT_TYPE&&(sa[_a]=ne.STOP_TYPE),ea[_a]=aa.blocktype_old[_a],aa.blocktype_old[_a]=sa[_a]}function Ge(Js,$s,ea){return 1<=ea?Js:0>=ea?$s:0<$s?Math.pow(Js/$s,ea)*$s:0}function Ze(Js,$s){for(var ea=1236.28/4,sa=0;sa<ne.SBMAX_s-1;sa++)for(var aa=0,_a;3>aa;aa++)if(_a=Js.thm.s[sa][aa],0<_a){var ta=_a*$s,na=Js.en.s[sa][aa];na>ta&&(na>1e10*ta?ea+=Ks[sa]*(10*Rs):ea+=Ks[sa]*Ee.FAST_LOG10(na/ta))}return ea}function Ke(Js,$s){for(var ea=1124.23/4,sa=0,aa;sa<ne.SBMAX_l-1;sa++)if(aa=Js.thm.l[sa],0<aa){var _a=aa*$s,ta=Js.en.l[sa];ta>_a&&(ta>1e10*_a?ea+=Qs[sa]*(10*Rs):ea+=Qs[sa]*Ee.FAST_LOG10(ta/_a))}return ea}function Qe(Js,$s,ea,sa,aa){var _a,ta;for(_a=ta=0;_a<Js.npart_l;++_a){var na=0,ia=0,la;for(la=0;la<Js.numlines_l[_a];++la,++ta){var ra=$s[ta];na+=ra,ia<ra&&(ia=ra)}ea[_a]=na,sa[_a]=ia,aa[_a]=na*Js.rnumlines_l[_a]}}function We(Js,$s,ea,sa){var aa=Cs.length-1,_a=0,ta=ea[_a]+ea[_a+1];if(0<ta){var na=$s[_a];na<$s[_a+1]&&(na=$s[_a+1]),ta=20*(2*na-ta)/(ta*(Js.numlines_l[_a]+Js.numlines_l[_a+1]-1));var ia=0|ta;ia>aa&&(ia=aa),sa[_a]=ia}else sa[_a]=0;for(_a=1;_a<Js.npart_l-1;_a++)if(ta=ea[_a-1]+ea[_a]+ea[_a+1],0<ta){var na=$s[_a-1];na<$s[_a]&&(na=$s[_a]),na<$s[_a+1]&&(na=$s[_a+1]),ta=20*(3*na-ta)/(ta*(Js.numlines_l[_a-1]+Js.numlines_l[_a]+Js.numlines_l[_a+1]-1));var ia=0|ta;ia>aa&&(ia=aa),sa[_a]=ia}else sa[_a]=0;if(ta=ea[_a-1]+ea[_a],0<ta){var na=$s[_a-1];na<$s[_a]&&(na=$s[_a]),ta=20*(2*na-ta)/(ta*(Js.numlines_l[_a-1]+Js.numlines_l[_a]-1));var ia=0|ta;ia>aa&&(ia=aa),sa[_a]=ia}else sa[_a]=0}function Ue(Js,$s,ea,sa,aa,_a,ta,na){var ia=Js.internal_flags;if(2>sa)Bs.fft_long(ia,ta[na],sa,$s,ea);else if(2==sa)for(var la=ne.BLKSIZE-1;0<=la;--la){var ra=ta[na+0][la],oa=ta[na+1][la];ta[na+0][la]=0.5*((ra+oa)*Ee.SQRT2),ta[na+1][la]=0.5*((ra-oa)*Ee.SQRT2)}_a[0]=Ve(ta[na+0][0]),_a[0]*=_a[0];for(var la=ne.BLKSIZE/2-1;0<=la;--la){var ba=ta[na+0][ne.BLKSIZE/2-la],fa=ta[na+0][ne.BLKSIZE/2+la];_a[ne.BLKSIZE/2-la]=Ve(0.5*(ba*ba+fa*fa))}{for(var pa=0,la=11;la<ne.HBLKSIZE;la++)pa+=_a[la];ia.tot_ener[sa]=pa}if(Js.analysis){for(var la=0;la<ne.HBLKSIZE;la++)ia.pinfo.energy[aa][sa][la]=ia.pinfo.energy_save[sa][la],ia.pinfo.energy_save[sa][la]=_a[la];ia.pinfo.pe[aa][sa]=ia.pe[sa]}}function Je(Js,$s,ea,sa,aa,_a,ta,na){var ia=Js.internal_flags;if(0==aa&&2>sa&&Bs.fft_short(ia,ta[na],sa,$s,ea),2==sa)for(var la=ne.BLKSIZE_s-1;0<=la;--la){var ra=ta[na+0][aa][la],oa=ta[na+1][aa][la];ta[na+0][aa][la]=0.5*((ra+oa)*Ee.SQRT2),ta[na+1][aa][la]=0.5*((ra-oa)*Ee.SQRT2)}_a[aa][0]=ta[na+0][aa][0],_a[aa][0]*=_a[aa][0];for(var la=ne.BLKSIZE_s/2-1;0<=la;--la){var ba=ta[na+0][aa][ne.BLKSIZE_s/2-la],fa=ta[na+0][aa][ne.BLKSIZE_s/2+la];_a[aa][ne.BLKSIZE_s/2-la]=Ve(0.5*(ba*ba+fa*fa))}}function $e(Js,$s,ea,sa){var aa=Js.internal_flags;2==Js.athaa_loudapprox&&2>ea&&(aa.loudness_sq[$s][ea]=aa.loudness_sq_save[ea],aa.loudness_sq_save[ea]=Ie(sa,aa))}function es(Js,$s,ea,sa,aa,_a,ta,na,ia,la){for(var ra=T([2,576]),oa=Js.internal_flags,ba=oa.channels_out,fa=Js.mode==I.JOINT_STEREO?4:ba,pa=0;pa<ba;pa++){firbuf=$s[pa];for(var ma=ea+576-350-Ls+192,ha=0;576>ha;ha++){var da,ua;da=firbuf[ma+ha+10],ua=0;for(var Sa=0;Sa<(Ls-1)/2-1;Sa+=2)da+=Us[Sa]*(firbuf[ma+ha+Sa]+firbuf[ma+ha+Ls-Sa]),ua+=Us[Sa+1]*(firbuf[ma+ha+Sa+1]+firbuf[ma+ha+Ls-Sa-1]);ra[pa][ha]=da+ua}aa[sa][pa].en.assign(oa.en[pa]),aa[sa][pa].thm.assign(oa.thm[pa]),2<fa&&(_a[sa][pa].en.assign(oa.en[pa+2]),_a[sa][pa].thm.assign(oa.thm[pa+2]))}for(var pa=0;pa<fa;pa++){var Ba=B(12),Ra=B(12),Aa=[0,0,0,0],ka=ra[1&pa],Ta=0,ya=3==pa?oa.nsPsy.attackthre_s:oa.nsPsy.attackthre,Ea=1;if(2==pa)for(var ha=0,Sa=576;0<Sa;++ha,--Sa){var va=ra[0][ha],Ma=ra[1][ha];ra[0][ha]=va+Ma,ra[1][ha]=va-Ma}for(var ha=0;3>ha;ha++)Ra[ha]=oa.nsPsy.last_en_subshort[pa][ha+6],Ba[ha]=Ra[ha]/oa.nsPsy.last_en_subshort[pa][ha+4],Aa[0]+=Ra[ha];for(var ha=0;9>ha;ha++){for(var Pa=Ta+64,wa=1;Ta<Pa;Ta++)wa<Math.abs(ka[Ta])&&(wa=Math.abs(ka[Ta]));oa.nsPsy.last_en_subshort[pa][ha]=Ra[ha+3]=wa,Aa[1+ha/3]+=wa,wa>Ra[ha+3-2]?wa/=Ra[ha+3-2]:Ra[ha+3-2]>10*wa?wa=Ra[ha+3-2]/(10*wa):wa=0,Ba[ha+3]=wa}for(var ha=0;3>ha;++ha){var Ha=Ra[3*ha+3]+Ra[3*ha+4]+Ra[3*ha+5],Va=1;6*Ra[3*ha+5]<Ha&&(Va*=0.5,6*Ra[3*ha+4]<Ha&&(Va*=0.5)),na[pa][ha]=Va}if(Js.analysis){for(var Ia=Ba[0],ha=1;12>ha;ha++)Ia<Ba[ha]&&(Ia=Ba[ha]);oa.pinfo.ers[sa][pa]=oa.pinfo.ers_save[pa],oa.pinfo.ers_save[pa]=Ia}for(var ha=0;12>ha;ha++)0==ia[pa][ha/3]&&Ba[ha]>ya&&(ia[pa][ha/3]=ha%3+1);for(var ha=1;4>ha;ha++){var La=Aa[ha-1],ja=Aa[ha],Na=Math.max(La,ja);4e4>Na&&La<1.7*ja&&ja<1.7*La&&(1==ha&&ia[pa][0]<=ia[pa][ha]&&(ia[pa][0]=0),ia[pa][ha]=0)}ia[pa][0]<=oa.nsPsy.lastAttacks[pa]&&(ia[pa][0]=0),(3==oa.nsPsy.lastAttacks[pa]||0!=ia[pa][0]+ia[pa][1]+ia[pa][2]+ia[pa][3])&&(Ea=0,0!=ia[pa][1]&&0!=ia[pa][0]&&(ia[pa][1]=0),0!=ia[pa][2]&&0!=ia[pa][1]&&(ia[pa][2]=0),0!=ia[pa][3]&&0!=ia[pa][2]&&(ia[pa][3]=0)),2>pa?la[pa]=Ea:0==Ea&&(la[0]=la[1]=0),ta[pa]=oa.tot_ener[pa]}}function ss(Js,$s,ea){if(0==ea)for(var sa=0;sa<Js.npart_s;sa++)Js.nb_s2[$s][sa]=Js.nb_s1[$s][sa],Js.nb_s1[$s][sa]=0}function as(Js,$s){for(var ea=0;ea<Js.npart_l;ea++)Js.nb_2[$s][ea]=Js.nb_1[$s][ea],Js.nb_1[$s][ea]=0}function _s(Js,$s,ea,sa){var aa=Cs.length-1,_a=0,ta=ea[_a]+ea[_a+1];if(0<ta){var na=$s[_a];na<$s[_a+1]&&(na=$s[_a+1]),ta=20*(2*na-ta)/(ta*(Js.numlines_s[_a]+Js.numlines_s[_a+1]-1));var ia=0|ta;ia>aa&&(ia=aa),sa[_a]=ia}else sa[_a]=0;for(_a=1;_a<Js.npart_s-1;_a++)if(ta=ea[_a-1]+ea[_a]+ea[_a+1],0<ta){var na=$s[_a-1];na<$s[_a]&&(na=$s[_a]),na<$s[_a+1]&&(na=$s[_a+1]),ta=20*(3*na-ta)/(ta*(Js.numlines_s[_a-1]+Js.numlines_s[_a]+Js.numlines_s[_a+1]-1));var ia=0|ta;ia>aa&&(ia=aa),sa[_a]=ia}else sa[_a]=0;if(ta=ea[_a-1]+ea[_a],0<ta){var na=$s[_a-1];na<$s[_a]&&(na=$s[_a]),ta=20*(2*na-ta)/(ta*(Js.numlines_s[_a-1]+Js.numlines_s[_a]-1));var ia=0|ta;ia>aa&&(ia=aa),sa[_a]=ia}else sa[_a]=0}function ts(Js,$s,ea,sa,aa,_a){var ta=Js.internal_flags,na=new float[ne.CBANDS],ia=B(ne.CBANDS),la,ra,oa,ba=new int[ne.CBANDS];for(oa=ra=0;oa<ta.npart_s;++oa){var fa=0,pa=0,ma=ta.numlines_s[oa];for(la=0;la<ma;++la,++ra){var ha=$s[_a][ra];fa+=ha,pa<ha&&(pa=ha)}ea[oa]=fa,na[oa]=pa,ia[oa]=fa/ma}for(;oa<ne.CBANDS;++oa)na[oa]=0,ia[oa]=0;for(_s(ta,na,ia,ba),ra=oa=0;oa<ta.npart_s;oa++){var da=ta.s3ind_s[oa][0],ua=ta.s3ind_s[oa][1],Sa,Ba,Ra,Aa,ka;for(Sa=ba[da],Ba=1,Aa=ta.s3_ss[ra]*ea[da]*Cs[ba[da]],++ra,++da;da<=ua;)Sa+=ba[da],Ba+=1,Ra=ta.s3_ss[ra]*ea[da]*Cs[ba[da]],Aa=Oe(Aa,Ra,da-oa),++ra,++da;Sa=(1+2*Sa)/(2*Ba),ka=0.5*Cs[Sa],Aa*=ka,sa[oa]=Aa,ta.nb_s2[aa][oa]=ta.nb_s1[aa][oa],ta.nb_s1[aa][oa]=Aa,Ra=na[oa],Ra*=ta.minval_s[oa],Ra*=ka,sa[oa]>Ra&&(sa[oa]=Ra),1<ta.masking_lower&&(sa[oa]*=ta.masking_lower),sa[oa]>ea[oa]&&(sa[oa]=ea[oa]),1>ta.masking_lower&&(sa[oa]*=ta.masking_lower)}for(;oa<ne.CBANDS;++oa)ea[oa]=0,sa[oa]=0}function ns(Js,$s,ea,sa,aa){var _a=B(ne.CBANDS),ta=B(ne.CBANDS),na=S(ne.CBANDS+2),ia;Qe(Js,$s,ea,_a,ta),We(Js,_a,ta,na);var la=0;for(ia=0;ia<Js.npart_l;ia++){var pa=Js.s3ind[ia][0],ma=Js.s3ind[ia][1],ha=0,da=0,ra,oa,ba,fa;for(ha=na[pa],da+=1,oa=Js.s3_ll[la]*ea[pa]*Cs[na[pa]],++la,++pa;pa<=ma;)ha+=na[pa],da+=1,ra=Js.s3_ll[la]*ea[pa]*Cs[na[pa]],fa=Oe(oa,ra,pa-ia),oa=fa,++la,++pa;if(ha=(1+2*ha)/(2*da),ba=0.5*Cs[ha],oa*=ba,Js.blocktype_old[1&aa]==ne.SHORT_TYPE){var ua=As*Js.nb_1[aa][ia];sa[ia]=0<ua?Math.min(oa,ua):Math.min(oa,ea[ia]*ws)}else{var Sa=ks*Js.nb_2[aa][ia],Ba=As*Js.nb_1[aa][ia],ua;0>=Sa&&(Sa=oa),0>=Ba&&(Ba=oa),ua=Js.blocktype_old[1&aa]==ne.NORM_TYPE?Math.min(Ba,Sa):Ba,sa[ia]=Math.min(oa,ua)}Js.nb_2[aa][ia]=Js.nb_1[aa][ia],Js.nb_1[aa][ia]=oa,ra=_a[ia],ra*=Js.minval_l[ia],ra*=ba,sa[ia]>ra&&(sa[ia]=ra),1<Js.masking_lower&&(sa[ia]*=Js.masking_lower),sa[ia]>ea[ia]&&(sa[ia]=ea[ia]),1>Js.masking_lower&&(sa[ia]*=Js.masking_lower)}for(;ia<ne.CBANDS;++ia)ea[ia]=0,sa[ia]=0}function is(Js,$s){var ea=Js.internal_flags;Js.short_blocks!=H.short_block_coupled||0!=$s[0]&&0!=$s[1]||($s[0]=$s[1]=0);for(var sa=0;sa<ea.channels_out;sa++)Js.short_blocks==H.short_block_dispensed&&($s[sa]=1),Js.short_blocks==H.short_block_forced&&($s[sa]=0)}function ls(Js,$s,ea){for(var sa=Js.internal_flags,aa=0,_a;aa<sa.channels_out;aa++)_a=ne.NORM_TYPE,0==$s[aa]?(_a=ne.SHORT_TYPE,sa.blocktype_old[aa]==ne.NORM_TYPE&&(sa.blocktype_old[aa]=ne.START_TYPE),sa.blocktype_old[aa]==ne.STOP_TYPE&&(sa.blocktype_old[aa]=ne.SHORT_TYPE)):sa.blocktype_old[aa]==ne.SHORT_TYPE&&(_a=ne.STOP_TYPE),ea[aa]=sa.blocktype_old[aa],sa.blocktype_old[aa]=_a}function rs(Js,$s,ea,sa,aa,_a,ta){for(var na=2*_a,ia=0<_a?Math.pow(10,aa):1,oa=0,la,ra;oa<ta;++oa){var ba=Js[2][oa],fa=Js[3][oa],pa=$s[0][oa],ma=$s[1][oa],ha=$s[2][oa],da=$s[3][oa];if(pa<=1.58*ma&&ma<=1.58*pa){var ua=ea[oa]*fa,Sa=ea[oa]*ba;ra=Math.max(ha,Math.min(da,ua)),la=Math.max(da,Math.min(ha,Sa))}else ra=ha,la=da;if(0<_a){var Aa=sa[oa]*ia,Ba,Ra;if(Ba=Math.min(Math.max(pa,Aa),Math.max(ma,Aa)),ha=Math.max(ra,Aa),da=Math.max(la,Aa),Ra=ha+da,0<Ra&&Ba*na<Ra){var ka=Ba*na/Ra;ha*=ka,da*=ka}ra=Math.min(ha,ra),la=Math.min(da,la)}ra>ba&&(ra=ba),la>fa&&(la=fa),$s[2][oa]=ra,$s[3][oa]=la}}function os(Js,$s){var ea=Js,sa;return sa=0<=ea?27*-ea:ea*$s,-72>=sa?0:Math.exp(sa*js)}function ps(Js){var $s=0,ea=0;{var sa=0,aa,_a;for(sa=0;1e-20<os(sa,Js);sa-=1);for(aa=sa,_a=0;1e-12<Math.abs(_a-aa);)sa=(_a+aa)/2,0<os(sa,Js)?_a=sa:aa=sa;$s=aa}{var sa=0,aa,_a;for(sa=0;1e-20<os(sa,Js);sa+=1);for(aa=0,_a=sa;1e-12<Math.abs(_a-aa);)sa=(_a+aa)/2,0<os(sa,Js)?aa=sa:_a=sa;ea=_a}{var ta=0,na=1e3,ia;for(ia=0;ia<=na;++ia){var sa=$s+ia*(ea-$s)/na,la=os(sa,Js);ta+=la}{var ra=(na+1)/(ta*(ea-$s));return ra}}}function ms(Js){var $s,ea,sa,aa;return($s=Js,$s*=0<=$s?3:1.5,0.5<=$s&&2.5>=$s?(aa=$s-0.5,ea=8*(aa*aa-2*aa)):ea=0,$s+=0.474,sa=15.811389+7.5*$s-17.5*Math.sqrt(1+$s*$s),-60>=sa)?0:($s=Math.exp((ea+sa)*js),$s/=.6609193,$s)}function hs(Js){return 0>Js&&(Js=0),Js*=1e-3,13*Math.atan(.76*Js)+3.5*Math.atan(Js*Js/(7.5*7.5))}function ds(Js,$s,ea,sa,aa,_a,ta,na,ia,la,ra,oa){var ba=B(ne.CBANDS+1),fa=na/(15<oa?1152:384),pa=S(ne.HBLKSIZE),ma;na/=ia;var ha=0,da=0;for(ma=0;ma<ne.CBANDS;ma++){var ua,Sa;for(ua=hs(na*ha),ba[ma]=na*ha,Sa=ha;hs(na*Sa)-ua<.34&&Sa<=ia/2;Sa++);for(Js[ma]=Sa-ha,da=ma+1;ha<Sa;)pa[ha++]=ma;if(ha>ia/2){ha=ia/2,++ma;break}}ba[ma]=na*ha;for(var Ba=0;Ba<oa;Ba++){var Ra,Aa,ka,Ta,ya;ka=la[Ba],Ta=la[Ba+1],Ra=0|Math.floor(.5+ra*(ka-.5)),0>Ra&&(Ra=0),Aa=0|Math.floor(.5+ra*(Ta-.5)),Aa>ia/2&&(Aa=ia/2),ea[Ba]=(pa[Ra]+pa[Aa])/2,$s[Ba]=pa[Aa];var Ea=fa*Ta;ta[Ba]=(Ea-ba[$s[Ba]])/(ba[$s[Ba]+1]-ba[$s[Ba]]),0>ta[Ba]?ta[Ba]=0:1<ta[Ba]&&(ta[Ba]=1),ya=hs(na*la[Ba]*ra),ya=Math.min(ya,15.5)/15.5,_a[Ba]=Math.pow(10,1.25*(1-Math.cos(Math.PI*ya))-2.5)}ha=0;for(var va=0;va<da;va++){var Ma=Js[va],ua,Pa;ua=hs(na*ha),Pa=hs(na*(ha+Ma-1)),sa[va]=.5*(ua+Pa),ua=hs(na*(ha-.5)),Pa=hs(na*(ha+Ma-.5)),aa[va]=Pa-ua,ha+=Ma}return da}function us(Js,$s,ea,sa,aa,_a){var ta=T([ne.CBANDS,ne.CBANDS]),na,ia=0;if(_a)for(var la=0;la<$s;la++)for(na=0;na<$s;na++){var ra=ms(ea[la]-ea[na])*sa[na];ta[la][na]=ra*aa[la]}else for(na=0;na<$s;na++)for(var oa=15+Math.min(21/ea[na],12),ba=ps(oa),la=0,ra;la<$s;la++)ra=ba*os(ea[la]-ea[na],oa)*sa[na],ta[la][na]=ra*aa[la];for(var la=0;la<$s;la++){for(na=0;na<$s&&!(0<ta[la][na]);na++);for(Js[la][0]=na,na=$s-1;0<na&&!(0<ta[la][na]);na--);Js[la][1]=na,ia+=Js[la][1]-Js[la][0]+1}for(var fa=B(ia),pa=0,la=0;la<$s;la++)for(na=Js[la][0];na<=Js[la][1];na++)fa[pa++]=ta[la][na];return fa}function gs(Js){var $s=hs(Js);return $s=Math.min($s,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*$s))-2.5)}function Ss(Js,$s){-.3>Js&&(Js=3410),Js/=1e3,Js=Math.max(0.1,Js);var ea=3.64*Math.pow(Js,-0.8)-6.8*Math.exp(-0.6*Math.pow(Js-3.4,2))+6*Math.exp(-0.15*Math.pow(Js-8.7,2))+1e-3*(0.6+0.04*$s)*Math.pow(Js,4);return ea}var Bs=new fe,Rs=2.302585092994046,As=2,ks=16,Es=1/217621504/(ne.BLKSIZE/2),Ms=0.8,Ps=0.6,ws=0.3,Ls=21,js=0.2302585093,Xs,Ds,Ys,Cs=[1,0.79433,0.63096,0.63096,0.63096,0.63096,0.63096,0.25119,0.11749],Fs=[11.052965160000001,10.487040256900002,9.9500500969,9.0247369744,8.1854926609,7.0440875649,6.061887168099999,5.2166559999999995,4.4892710641,3.8632688703999998,3.3246052225000002,2.8610369315999997,2.4621061921,2.1508568964,1.8789281476000002,1.7170433295999998,1.5691069696,1.4555939904,1.3503137208999998,1.2715945225,1.1974487183999998,1.1361428100000002,1.0779838276,1.0382591025,1],zs=[1.7782755904,1.8463102640999998,1.9169510116000004,1.9459413009000002,1.9753740304000003,1.8325036899999998,1.6999465924,1.4962427040999997,1.3169398564,1],Gs=[5.5396212496,5.255968908100001,4.9868695969,4.523065562499999,4.102447702500001,3.5304155236000003,3.0381535809000004,2.6145273025000004,2.2499700001,1.9362165904000002,1.6662420888999998,1.4339104515999999,1.2339655056,1.0779838276],Zs=[1.7782755904,1.8463102640999998,1.9169510116000004,1.9459413009000002,1.9753740304000003,1.8325036899999998,1.6999465924,1.4962427040999997,1.3169398564,1],Ks=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130],Qs=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1],Ws=[-1.730326e-17,-0.01703172,-1.349528e-17,0.0418072,-6.73278e-17,-0.0876324,-3.0835e-17,0.1863476,-1.104424e-16,-0.627638];this.L3psycho_anal_ns=function(Js,$s,ea,sa,aa,_a,ta,na,ia,la){var ra=Js.internal_flags,oa=T([2,ne.BLKSIZE]),ba=T([2,3,ne.BLKSIZE_s]),fa=B(ne.CBANDS+1),pa=B(ne.CBANDS+1),ma=B(ne.CBANDS+2),ha=S(2),da=S(2),Ea=T([2,576]),Ma=S(ne.CBANDS+2),Pa=S(ne.CBANDS+2),ua,Sa,Ba,Ra,Aa,ka,Ta,ya,va;for(xe.fill(Pa,0),ua=ra.channels_out,Js.mode==I.JOINT_STEREO&&(ua=4),va=Js.VBR==V.vbr_off?0==ra.ResvMax?0:0.5*(ra.ResvSize/ra.ResvMax):Js.VBR==V.vbr_rh||Js.VBR==V.vbr_mtrh||Js.VBR==V.vbr_mt?0.6:1,Sa=0;Sa<ra.channels_out;Sa++){var wa=$s[Sa],Ha=ea+576-350-Ls+192;for(Ra=0;576>Ra;Ra++){var Va,Ia;for(Va=wa[Ha+Ra+10],Ia=0,Aa=0;Aa<(Ls-1)/2-1;Aa+=2)Va+=Ws[Aa]*(wa[Ha+Ra+Aa]+wa[Ha+Ra+Ls-Aa]),Ia+=Ws[Aa+1]*(wa[Ha+Ra+Aa+1]+wa[Ha+Ra+Ls-Aa-1]);Ea[Sa][Ra]=Va+Ia}aa[sa][Sa].en.assign(ra.en[Sa]),aa[sa][Sa].thm.assign(ra.thm[Sa]),2<ua&&(_a[sa][Sa].en.assign(ra.en[Sa+2]),_a[sa][Sa].thm.assign(ra.thm[Sa+2]))}for(Sa=0;Sa<ua;Sa++){var Na=B(12),Oa=[0,0,0,0],qa=B(12),Xa=1,Ya=B(ne.CBANDS),Ca=B(ne.CBANDS),Fa=[0,0,0,0],za=B(ne.HBLKSIZE),Ga=T([3,ne.HBLKSIZE_s]),La,ja,Da;for(Ra=0;3>Ra;Ra++)Na[Ra]=ra.nsPsy.last_en_subshort[Sa][Ra+6],qa[Ra]=Na[Ra]/ra.nsPsy.last_en_subshort[Sa][Ra+4],Oa[0]+=Na[Ra];if(2==Sa)for(Ra=0;576>Ra;Ra++){var Za,Ka;Za=Ea[0][Ra],Ka=Ea[1][Ra],Ea[0][Ra]=Za+Ka,Ea[1][Ra]=Za-Ka}{var Qa=Ea[1&Sa],Wa=0;for(Ra=0;9>Ra;Ra++){for(var Ua=Wa+64,Ja=1;Wa<Ua;Wa++)Ja<Math.abs(Qa[Wa])&&(Ja=Math.abs(Qa[Wa]));ra.nsPsy.last_en_subshort[Sa][Ra]=Na[Ra+3]=Ja,Oa[1+Ra/3]+=Ja,Ja>Na[Ra+3-2]?Ja/=Na[Ra+3-2]:Na[Ra+3-2]>10*Ja?Ja=Na[Ra+3-2]/(10*Ja):Ja=0,qa[Ra+3]=Ja}}if(Js.analysis){var $a=qa[0];for(Ra=1;12>Ra;Ra++)$a<qa[Ra]&&($a=qa[Ra]);ra.pinfo.ers[sa][Sa]=ra.pinfo.ers_save[Sa],ra.pinfo.ers_save[Sa]=$a}for(Da=3==Sa?ra.nsPsy.attackthre_s:ra.nsPsy.attackthre,Ra=0;12>Ra;Ra++)0==Fa[Ra/3]&&qa[Ra]>Da&&(Fa[Ra/3]=Ra%3+1);for(Ra=1;4>Ra;Ra++){var e_;e_=Oa[Ra-1]>Oa[Ra]?Oa[Ra-1]/Oa[Ra]:Oa[Ra]/Oa[Ra-1],1.7>e_&&(Fa[Ra]=0,1==Ra&&(Fa[0]=0))}for(0!=Fa[0]&&0!=ra.nsPsy.lastAttacks[Sa]&&(Fa[0]=0),(3==ra.nsPsy.lastAttacks[Sa]||0!=Fa[0]+Fa[1]+Fa[2]+Fa[3])&&(Xa=0,0!=Fa[1]&&0!=Fa[0]&&(Fa[1]=0),0!=Fa[2]&&0!=Fa[1]&&(Fa[2]=0),0!=Fa[3]&&0!=Fa[2]&&(Fa[3]=0)),2>Sa?da[Sa]=Xa:0==Xa&&(da[0]=da[1]=0),ia[Sa]=ra.tot_ener[Sa],ja=ba,La=oa,Le(Js,za,Ga,La,1&Sa,ja,1&Sa,sa,Sa,$s,ea),Qe(ra,za,fa,Ya,Ca),We(ra,Ya,Ca,Ma),ya=0;3>ya;ya++){var s_,a_;for(Fe(Js,Ga,pa,ma,Sa,ya),Ye(ra,pa,ma,Sa,ya),Ta=0;Ta<ne.SBMAX_s;Ta++){if(a_=ra.thm[Sa].s[Ta][ya],a_*=Ms,2<=Fa[ya]||1==Fa[ya+1]){var __=0==ya?2:ya-1,Ja=Ge(ra.thm[Sa].s[Ta][__],a_,Ps*va);a_=Math.min(a_,Ja)}if(1==Fa[ya]){var __=0==ya?2:ya-1,Ja=Ge(ra.thm[Sa].s[Ta][__],a_,ws*va);a_=Math.min(a_,Ja)}else if(0!=ya&&3==Fa[ya-1]||0==ya&&3==ra.nsPsy.lastAttacks[Sa]){var __=2==ya?0:ya+1,Ja=Ge(ra.thm[Sa].s[Ta][__],a_,ws*va);a_=Math.min(a_,Ja)}s_=Na[3*ya+3]+Na[3*ya+4]+Na[3*ya+5],6*Na[3*ya+5]<s_&&(a_*=0.5,6*Na[3*ya+4]<s_&&(a_*=0.5)),ra.thm[Sa].s[Ta][ya]=a_}}for(ra.nsPsy.lastAttacks[Sa]=Fa[2],ka=0,Ba=0;Ba<ra.npart_l;Ba++){for(var t_=ra.s3ind[Ba][0],n_=fa[t_]*Cs[Ma[t_]],i_=ra.s3_ll[ka++]*n_;++t_<=ra.s3ind[Ba][1];)n_=fa[t_]*Cs[Ma[t_]],i_=Ne(i_,ra.s3_ll[ka++]*n_,t_,t_-Ba,ra,0);i_*=0.158489319246111,ma[Ba]=ra.blocktype_old[1&Sa]==ne.SHORT_TYPE?i_:Ge(Math.min(i_,Math.min(As*ra.nb_1[Sa][Ba],ks*ra.nb_2[Sa][Ba])),i_,va),ra.nb_2[Sa][Ba]=ra.nb_1[Sa][Ba],ra.nb_1[Sa][Ba]=i_}for(;Ba<=ne.CBANDS;++Ba)fa[Ba]=0,ma[Ba]=0;Ce(ra,fa,ma,Sa)}if((Js.mode==I.STEREO||Js.mode==I.JOINT_STEREO)&&0<Js.interChRatio&&qe(Js,Js.interChRatio),Js.mode==I.JOINT_STEREO){var l_;Xe(ra),l_=Js.msfix,0<Math.abs(l_)&&De(ra,l_,Js.ATHlower*ra.ATH.adjust)}for(ze(Js,da,la,ha),Sa=0;Sa<ua;Sa++){var o_=0,r_,b_,c_;1<Sa?(r_=na,o_=-2,b_=ne.NORM_TYPE,(la[0]==ne.SHORT_TYPE||la[1]==ne.SHORT_TYPE)&&(b_=ne.SHORT_TYPE),c_=_a[sa][Sa-2]):(r_=ta,o_=0,b_=la[Sa],c_=aa[sa][Sa]),r_[o_+Sa]=b_==ne.SHORT_TYPE?Ze(c_,ra.masking_lower):Ke(c_,ra.masking_lower),Js.analysis&&(ra.pinfo.pe[sa][Sa]=r_[o_+Sa])}return 0};var Us=[-1.730326e-17,-0.01703172,-1.349528e-17,0.0418072,-6.73278e-17,-0.0876324,-3.0835e-17,0.1863476,-1.104424e-16,-0.627638];this.L3psycho_anal_vbr=function(Js,$s,ea,sa,aa,_a,ta,na,ia,la){var ra=Js.internal_flags,oa,ba,fa=B(ne.HBLKSIZE),pa=T([3,ne.HBLKSIZE_s]),ma=T([2,ne.BLKSIZE]),ha=T([2,3,ne.BLKSIZE_s]),da=T([4,ne.CBANDS]),ua=T([4,ne.CBANDS]),Sa=T([4,3]),Ba=0.6,Ra=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],Aa=S(2),ka=Js.mode==I.JOINT_STEREO?4:ra.channels_out;es(Js,$s,ea,sa,aa,_a,ia,Sa,Ra,Aa),is(Js,Aa);{for(var Ta=0,ya;Ta<ka;Ta++)ya=1&Ta,oa=ma,Ue(Js,$s,ea,Ta,sa,fa,oa,ya),$e(Js,sa,Ta,fa),0==Aa[ya]?as(ra,Ta):ns(ra,fa,da[Ta],ua[Ta],Ta);2==Aa[0]+Aa[1]&&Js.mode==I.JOINT_STEREO&&rs(da,ua,ra.mld_cb_l,ra.ATH.cb_l,Js.ATHlower*ra.ATH.adjust,Js.msfix,ra.npart_l);for(var Ta=0,ya;Ta<ka;Ta++)ya=1&Ta,0!=Aa[ya]&&Ce(ra,da[Ta],ua[Ta],Ta)}{for(var Ea=0;3>Ea;Ea++){for(var Ta=0,ya;Ta<ka;++Ta)ya=1&Ta,0==Aa[ya]?(ba=ha,Je(Js,$s,ea,Ta,Ea,pa,ba,ya),ts(Js,pa,da[Ta],ua[Ta],Ta,Ea)):ss(ra,Ta,Ea);0==Aa[0]+Aa[1]&&Js.mode==I.JOINT_STEREO&&rs(da,ua,ra.mld_cb_s,ra.ATH.cb_s,Js.ATHlower*ra.ATH.adjust,Js.msfix,ra.npart_s);for(var Ta=0,ya;Ta<ka;++Ta)ya=1&Ta,0==Aa[ya]&&Ye(ra,da[Ta],ua[Ta],Ta,Ea)}for(var Ta=0,ya;Ta<ka;Ta++)if(ya=1&Ta,0==Aa[ya])for(var va=0,Ma;va<ne.SBMAX_s;va++){Ma=B(3);for(var Ea=0,Pa;3>Ea;Ea++){if(Pa=ra.thm[Ta].s[va][Ea],Pa*=Ms,2<=Ra[Ta][Ea]||1==Ra[Ta][Ea+1]){var wa=0==Ea?2:Ea-1,Ha=Ge(ra.thm[Ta].s[va][wa],Pa,Ps*Ba);Pa=Math.min(Pa,Ha)}else if(1==Ra[Ta][Ea]){var wa=0==Ea?2:Ea-1,Ha=Ge(ra.thm[Ta].s[va][wa],Pa,ws*Ba);Pa=Math.min(Pa,Ha)}else if(0!=Ea&&3==Ra[Ta][Ea-1]||0==Ea&&3==ra.nsPsy.lastAttacks[Ta]){var wa=2==Ea?0:Ea+1,Ha=Ge(ra.thm[Ta].s[va][wa],Pa,ws*Ba);Pa=Math.min(Pa,Ha)}Pa*=Sa[Ta][Ea],Ma[Ea]=Pa}for(var Ea=0;3>Ea;Ea++)ra.thm[Ta].s[va][Ea]=Ma[Ea]}}for(var Ta=0;Ta<ka;Ta++)ra.nsPsy.lastAttacks[Ta]=Ra[Ta][2];ls(Js,Aa,la);for(var Ta=0;Ta<ka;Ta++){var Va,Ia,La,ja;1<Ta?(Va=na,Ia=-2,La=ne.NORM_TYPE,(la[0]==ne.SHORT_TYPE||la[1]==ne.SHORT_TYPE)&&(La=ne.SHORT_TYPE),ja=_a[sa][Ta-2]):(Va=ta,Ia=0,La=la[Ta],ja=aa[sa][Ta]),Va[Ia+Ta]=La==ne.SHORT_TYPE?Ze(ja,ra.masking_lower):Ke(ja,ra.masking_lower),Js.analysis&&(ra.pinfo.pe[sa][Ta]=Va[Ia+Ta])}return 0},this.psymodel_init=function(Js){var $s=Js.internal_flags,sa=!0,aa=13,_a=24,ta=0,na=0,ia=-8.25,la=-4.5,ra=B(ne.CBANDS),oa=B(ne.CBANDS),ba=B(ne.CBANDS),fa=Js.out_samplerate,ea;switch(Js.experimentalZ){default:case 0:sa=!0;break;case 1:sa=Js.VBR==V.vbr_mtrh||Js.VBR==V.vbr_mt?!1:!0;break;case 2:sa=!1;break;case 3:aa=8,ta=-1.75,na=-0.0125,ia=-8.25,la=-2.25;}for($s.ms_ener_ratio_old=.25,$s.blocktype_old[0]=$s.blocktype_old[1]=ne.NORM_TYPE,ea=0;4>ea;++ea){for(var pa=0;pa<ne.CBANDS;++pa)$s.nb_1[ea][pa]=1e20,$s.nb_2[ea][pa]=1e20,$s.nb_s1[ea][pa]=$s.nb_s2[ea][pa]=1;for(var ma=0;ma<ne.SBMAX_l;ma++)$s.en[ea].l[ma]=1e20,$s.thm[ea].l[ma]=1e20;for(var pa=0;3>pa;++pa){for(var ma=0;ma<ne.SBMAX_s;ma++)$s.en[ea].s[ma][pa]=1e20,$s.thm[ea].s[ma][pa]=1e20;$s.nsPsy.lastAttacks[ea]=0}for(var pa=0;9>pa;pa++)$s.nsPsy.last_en_subshort[ea][pa]=10}for($s.loudness_sq_save[0]=$s.loudness_sq_save[1]=0,$s.npart_l=ds($s.numlines_l,$s.bo_l,$s.bm_l,ra,oa,$s.mld_l,$s.PSY.bo_l_weight,fa,ne.BLKSIZE,$s.scalefac_band.l,ne.BLKSIZE/1152,ne.SBMAX_l),ea=0;ea<$s.npart_l;ea++){var ha=ta;ra[ea]>=aa&&(ha=na*(ra[ea]-aa)/(_a-aa)+ta*(_a-ra[ea])/(_a-aa)),ba[ea]=Math.pow(10,ha/10),$s.rnumlines_l[ea]=0<$s.numlines_l[ea]?1/$s.numlines_l[ea]:0}$s.s3_ll=us($s.s3ind,$s.npart_l,ra,oa,ba,sa);var pa=0;for(ea=0;ea<$s.npart_l;ea++){var da=ve.MAX_VALUE;for(var ua=0;ua<$s.numlines_l[ea];ua++,pa++){var Sa=fa*pa/(1e3*ne.BLKSIZE),Ba;Ba=this.ATHformula(1e3*Sa,Js)-20,Ba=Math.pow(10,0.1*Ba),Ba*=$s.numlines_l[ea],da>Ba&&(da=Ba)}$s.ATH.cb_l[ea]=da,da=-20+20*ra[ea]/10,6<da&&(da=100),-15>da&&(da=-15),da-=8,$s.minval_l[ea]=Math.pow(10,da/10)*$s.numlines_l[ea]}for($s.npart_s=ds($s.numlines_s,$s.bo_s,$s.bm_s,ra,oa,$s.mld_s,$s.PSY.bo_s_weight,fa,ne.BLKSIZE_s,$s.scalefac_band.s,ne.BLKSIZE_s/384,ne.SBMAX_s),pa=0,ea=0;ea<$s.npart_s;ea++){var ha=ia,da;ra[ea]>=aa&&(ha=la*(ra[ea]-aa)/(_a-aa)+ia*(_a-ra[ea])/(_a-aa)),ba[ea]=Math.pow(10,ha/10),da=ve.MAX_VALUE;for(var ua=0;ua<$s.numlines_s[ea];ua++,pa++){var Sa=fa*pa/(1e3*ne.BLKSIZE_s),Ba;Ba=this.ATHformula(1e3*Sa,Js)-20,Ba=Math.pow(10,0.1*Ba),Ba*=$s.numlines_s[ea],da>Ba&&(da=Ba)}$s.ATH.cb_s[ea]=da,da=-7+7*ra[ea]/12,12<ra[ea]&&(da*=1+3.1*Math.log(1+da)),12>ra[ea]&&(da*=1+2.3*Math.log(1-da)),-15>da&&(da=-15),da-=8,$s.minval_s[ea]=Math.pow(10,da/10)*$s.numlines_s[ea]}$s.s3_ss=us($s.s3ind_s,$s.npart_s,ra,oa,ba,sa),je(),Bs.init_fft($s),$s.decay=Math.exp(-1*Rs/(0.01*fa/192));{var Ra;Ra=3.5,0!=(2&Js.exp_nspsytune)&&(Ra=1),0<Math.abs(Js.msfix)&&(Ra=Js.msfix),Js.msfix=Ra;for(var Aa=0;Aa<$s.npart_l;Aa++)$s.s3ind[Aa][1]>$s.npart_l-1&&($s.s3ind[Aa][1]=$s.npart_l-1)}var ka=576*$s.mode_gr/fa;if($s.ATH.decay=Math.pow(10,-12/10*ka),$s.ATH.adjust=0.01,$s.ATH.adjustLimit=1,-1!=Js.ATHtype){var Ta=Js.out_samplerate/ne.BLKSIZE,ya=0,Sa;for(Sa=0,ea=0;ea<ne.BLKSIZE/2;++ea)Sa+=Ta,$s.ATH.eql_w[ea]=1/Math.pow(10,this.ATHformula(Sa,Js)/10),ya+=$s.ATH.eql_w[ea];for(ya=1/ya,ea=ne.BLKSIZE/2;0<=--ea;)$s.ATH.eql_w[ea]*=ya}{for(var Aa=pa=0;Aa<$s.npart_s;++Aa)for(ea=0;ea<$s.numlines_s[Aa];++ea)++pa;for(var Aa=pa=0;Aa<$s.npart_l;++Aa)for(ea=0;ea<$s.numlines_l[Aa];++ea)++pa}for(pa=0,ea=0;ea<$s.npart_l;ea++){var Sa=fa*(pa+$s.numlines_l[ea]/2)/(1*ne.BLKSIZE);$s.mld_cb_l[ea]=gs(Sa),pa+=$s.numlines_l[ea]}for(;ea<ne.CBANDS;++ea)$s.mld_cb_l[ea]=1;for(pa=0,ea=0;ea<$s.npart_s;ea++){var Sa=fa*(pa+$s.numlines_s[ea]/2)/(1*ne.BLKSIZE_s);$s.mld_cb_s[ea]=gs(Sa),pa+=$s.numlines_s[ea]}for(;ea<ne.CBANDS;++ea)$s.mld_cb_s[ea]=1;return 0},this.ATHformula=function(Js,$s){var ea;switch($s.ATHtype){case 0:ea=Ss(Js,9);break;case 1:ea=Ss(Js,-1);break;case 2:ea=Ss(Js,0);break;case 3:ea=Ss(Js,1)+6;break;case 4:ea=Ss(Js,$s.ATHcurve);break;default:ea=Ss(Js,0);}return ea}}function he(){function Ve(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=B(ne.SBMAX_l),this.bo_s_weight=B(ne.SBMAX_s)}function Ie(){this.lowerlimit=0}function Le(Ss,Bs){this.lowpass=Bs}function je(Ss){var Bs;return Ss.class_id=gs,Bs=Ss.internal_flags=new ce,Ss.mode=I.NOT_SET,Ss.original=1,Ss.in_samplerate=44100,Ss.num_channels=2,Ss.num_samples=-1,Ss.bWriteVbrTag=!0,Ss.quality=-1,Ss.short_blocks=null,Bs.subblock_gain=-1,Ss.lowpassfreq=0,Ss.highpassfreq=0,Ss.lowpasswidth=-1,Ss.highpasswidth=-1,Ss.VBR=V.vbr_off,Ss.VBR_q=4,Ss.ATHcurve=-1,Ss.VBR_mean_bitrate_kbps=128,Ss.VBR_min_bitrate_kbps=0,Ss.VBR_max_bitrate_kbps=0,Ss.VBR_hard_min=0,Bs.VBR_min_bitrate=1,Bs.VBR_max_bitrate=13,Ss.quant_comp=-1,Ss.quant_comp_short=-1,Ss.msfix=-1,Bs.resample_ratio=1,Bs.OldValue[0]=180,Bs.OldValue[1]=180,Bs.CurrentStep[0]=4,Bs.CurrentStep[1]=4,Bs.masking_lower=1,Bs.nsPsy.attackthre=-1,Bs.nsPsy.attackthre_s=-1,Ss.scale=-1,Ss.athaa_type=-1,Ss.ATHtype=-1,Ss.athaa_loudapprox=-1,Ss.athaa_sensitivity=0,Ss.useTemporal=null,Ss.interChRatio=-1,Bs.mf_samples_to_encode=ne.ENCDELAY+ne.POSTDELAY,Ss.encoder_padding=0,Bs.mf_size=ne.ENCDELAY-ne.MDCTDELAY,Ss.findReplayGain=!1,Ss.decode_on_the_fly=!1,Bs.decode_on_the_fly=!1,Bs.findReplayGain=!1,Bs.findPeakSample=!1,Bs.RadioGain=0,Bs.AudiophileGain=0,Bs.noclipGainChange=0,Bs.noclipScale=-1,Ss.preset=0,Ss.write_id3tag_automatic=!0,0}function Ne(Ss){return 1<Ss?0:0>=Ss?1:Math.cos(Math.PI/2*Ss)}function Oe(Ss,Bs){var Rs=44100;return(48000<=Bs?Rs=48000:44100<=Bs?Rs=44100:32000<=Bs?Rs=32000:24000<=Bs?Rs=24000:22050<=Bs?Rs=22050:16000<=Bs?Rs=16000:12000<=Bs?Rs=12000:11025<=Bs?Rs=11025:8e3<=Bs&&(Rs=8e3),-1==Ss)?Rs:(15960>=Ss&&(Rs=44100),15250>=Ss&&(Rs=32000),11220>=Ss&&(Rs=24000),9970>=Ss&&(Rs=22050),7230>=Ss&&(Rs=16000),5420>=Ss&&(Rs=12000),4510>=Ss&&(Rs=11025),3970>=Ss&&(Rs=8e3),Bs<Rs?44100<Bs?48000:32000<Bs?44100:24000<Bs?32000:22050<Bs?24000:16000<Bs?22050:12000<Bs?16000:11025<Bs?12000:8e3<Bs?11025:8e3:Rs)}function qe(Ss,Bs){return 44100===Ss?(Bs.version=1,0):48000===Ss?(Bs.version=1,1):32000===Ss?(Bs.version=1,2):22050===Ss?(Bs.version=0,0):24000===Ss?(Bs.version=0,1):16000===Ss?(Bs.version=0,2):11025===Ss?(Bs.version=0,0):12000===Ss?(Bs.version=0,1):8e3===Ss?(Bs.version=0,2):(Bs.version=0,-1)}function Xe(Ss,Bs,Rs){16000>Rs&&(Bs=2);for(var As=we.bitrate_table[Bs][1],ks=2;14>=ks;ks++)0<we.bitrate_table[Bs][ks]&&Math.abs(we.bitrate_table[Bs][ks]-Ss)<Math.abs(As-Ss)&&(As=we.bitrate_table[Bs][ks]);return As}function De(Ss,Bs,Rs){16000>Rs&&(Bs=2);for(var As=0;14>=As;As++)if(0<we.bitrate_table[Bs][As]&&we.bitrate_table[Bs][As]==Ss)return As;return-1}function Ye(Ss,Bs){var Rs=[new Le(8,2e3),new Le(16,3700),new Le(24,3900),new Le(32,5500),new Le(40,7e3),new Le(48,7500),new Le(56,1e4),new Le(64,11000),new Le(80,13500),new Le(96,15100),new Le(112,15600),new Le(128,17000),new Le(160,17500),new Le(192,18600),new Le(224,19400),new Le(256,19700),new Le(320,20500)],As=as.nearestBitrateFullIndex(Bs);Ss.lowerlimit=Rs[As].lowpass}function Ce(Ss){var Bs=Ss.internal_flags,Rs=32,As=-1;if(0<Bs.lowpass1){for(var ks=999,Ts=0,xs;31>=Ts;Ts++)xs=Ts/31,xs>=Bs.lowpass2&&(Rs=Math.min(Rs,Ts)),Bs.lowpass1<xs&&xs<Bs.lowpass2&&(ks=Math.min(ks,Ts));Bs.lowpass1=999==ks?(Rs-.75)/31:(ks-.75)/31,Bs.lowpass2=Rs/31}if(0<Bs.highpass2&&Bs.highpass2<.9*(.75/31)&&(Bs.highpass1=0,Bs.highpass2=0,ye.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),0<Bs.highpass2){for(var ys=-1,Ts=0,xs;31>=Ts;Ts++)xs=Ts/31,xs<=Bs.highpass1&&(As=Math.max(As,Ts)),Bs.highpass1<xs&&xs<Bs.highpass2&&(ys=Math.max(ys,Ts));Bs.highpass1=As/31,Bs.highpass2=-1==ys?(As+.75)/31:(ys+.75)/31}for(var Ts=0;32>Ts;Ts++){var xs=Ts/31,Es,vs;Es=Bs.highpass2>Bs.highpass1?Ne((Bs.highpass2-xs)/(Bs.highpass2-Bs.highpass1+1e-20)):1,vs=Bs.lowpass2>Bs.lowpass1?Ne((xs-Bs.lowpass1)/(Bs.lowpass2-Bs.lowpass1+1e-20)):1,Bs.amp_filter[Ts]=Es*vs}}function Fe(Ss){var Bs=Ss.internal_flags;switch(Ss.quality){default:case 9:Bs.psymodel=0,Bs.noise_shaping=0,Bs.noise_shaping_amp=0,Bs.noise_shaping_stop=0,Bs.use_best_huffman=0,Bs.full_outer_loop=0;break;case 8:Ss.quality=7;case 7:Bs.psymodel=1,Bs.noise_shaping=0,Bs.noise_shaping_amp=0,Bs.noise_shaping_stop=0,Bs.use_best_huffman=0,Bs.full_outer_loop=0;break;case 6:Bs.psymodel=1,0==Bs.noise_shaping&&(Bs.noise_shaping=1),Bs.noise_shaping_amp=0,Bs.noise_shaping_stop=0,-1==Bs.subblock_gain&&(Bs.subblock_gain=1),Bs.use_best_huffman=0,Bs.full_outer_loop=0;break;case 5:Bs.psymodel=1,0==Bs.noise_shaping&&(Bs.noise_shaping=1),Bs.noise_shaping_amp=0,Bs.noise_shaping_stop=0,-1==Bs.subblock_gain&&(Bs.subblock_gain=1),Bs.use_best_huffman=0,Bs.full_outer_loop=0;break;case 4:Bs.psymodel=1,0==Bs.noise_shaping&&(Bs.noise_shaping=1),Bs.noise_shaping_amp=0,Bs.noise_shaping_stop=0,-1==Bs.subblock_gain&&(Bs.subblock_gain=1),Bs.use_best_huffman=1,Bs.full_outer_loop=0;break;case 3:Bs.psymodel=1,0==Bs.noise_shaping&&(Bs.noise_shaping=1),Bs.noise_shaping_amp=1,Bs.noise_shaping_stop=1,-1==Bs.subblock_gain&&(Bs.subblock_gain=1),Bs.use_best_huffman=1,Bs.full_outer_loop=0;break;case 2:Bs.psymodel=1,0==Bs.noise_shaping&&(Bs.noise_shaping=1),0==Bs.substep_shaping&&(Bs.substep_shaping=2),Bs.noise_shaping_amp=1,Bs.noise_shaping_stop=1,-1==Bs.subblock_gain&&(Bs.subblock_gain=1),Bs.use_best_huffman=1,Bs.full_outer_loop=0;break;case 1:Bs.psymodel=1,0==Bs.noise_shaping&&(Bs.noise_shaping=1),0==Bs.substep_shaping&&(Bs.substep_shaping=2),Bs.noise_shaping_amp=2,Bs.noise_shaping_stop=1,-1==Bs.subblock_gain&&(Bs.subblock_gain=1),Bs.use_best_huffman=1,Bs.full_outer_loop=0;break;case 0:Bs.psymodel=1,0==Bs.noise_shaping&&(Bs.noise_shaping=1),0==Bs.substep_shaping&&(Bs.substep_shaping=2),Bs.noise_shaping_amp=2,Bs.noise_shaping_stop=1,-1==Bs.subblock_gain&&(Bs.subblock_gain=1),Bs.use_best_huffman=1,Bs.full_outer_loop=0;}}function ze(Ss){var Bs=Ss.internal_flags;Ss.frameNum=0,Ss.write_id3tag_automatic&&ds.id3tag_write_v2(Ss),Bs.bitrate_stereoMode_Hist=E([16,5]),Bs.bitrate_blockType_Hist=E([16,6]),Bs.PeakSample=0,Ss.bWriteVbrTag&&ms.InitVbrTag(Ss)}function Ge(Ss,Bs){(null==Ss.in_buffer_0||Ss.in_buffer_nsamples<Bs)&&(Ss.in_buffer_0=B(Bs),Ss.in_buffer_1=B(Bs),Ss.in_buffer_nsamples=Bs)}function Ze(Ss){var Bs=ne.BLKSIZE+Ss.framesize-ne.FFTOFFSET;return Bs=Math.max(Bs,512+Ss.framesize-32),Bs}function Ke(Ss,Bs,Rs,As,ks,Ts,xs){var ys=Ss.internal_flags,Es=0,Vs=[null,null],Is=[null,null],vs,Ms,Ps,ws,Hs;if(ys.Class_ID!=gs)return-3;if(0==As)return 0;if(Hs=is.copy_buffer(ys,ks,Ts,xs,0),0>Hs)return Hs;if(Ts+=Hs,Es+=Hs,Is[0]=Bs,Is[1]=Rs,Y.NEQ(Ss.scale,0)&&Y.NEQ(Ss.scale,1))for(Ms=0;Ms<As;++Ms)Is[0][Ms]*=Ss.scale,2==ys.channels_out&&(Is[1][Ms]*=Ss.scale);if(Y.NEQ(Ss.scale_left,0)&&Y.NEQ(Ss.scale_left,1))for(Ms=0;Ms<As;++Ms)Is[0][Ms]*=Ss.scale_left;if(Y.NEQ(Ss.scale_right,0)&&Y.NEQ(Ss.scale_right,1))for(Ms=0;Ms<As;++Ms)Is[1][Ms]*=Ss.scale_right;if(2==Ss.num_channels&&1==ys.channels_out)for(Ms=0;Ms<As;++Ms)Is[0][Ms]=0.5*(Is[0][Ms]+Is[1][Ms]),Is[1][Ms]=0;ws=Ze(Ss),Vs[0]=ys.mfbuf[0],Vs[1]=ys.mfbuf[1];for(var Ls=0;0<As;){var js=[null,null],Ns=0,Os=0;js[0]=Is[0],js[1]=Is[1];var qs=new We;if(ss(Ss,Vs,js,Ls,As,qs),Ns=qs.n_in,Os=qs.n_out,ys.findReplayGain&&!ys.decode_on_the_fly&&ns.AnalyzeSamples(ys.rgdata,Vs[0],ys.mf_size,Vs[1],ys.mf_size,Os,ys.channels_out)==O.GAIN_ANALYSIS_ERROR)return-6;if(As-=Ns,Ls+=Ns,2==ys.channels_out);if(ys.mf_size+=Os,1>ys.mf_samples_to_encode&&(ys.mf_samples_to_encode=ne.ENCDELAY+ne.POSTDELAY),ys.mf_samples_to_encode+=Os,ys.mf_size>=ws){var Xs=xs-Es;if(0==xs&&(Xs=0),vs=Qe(Ss,Vs[0],Vs[1],ks,Ts,Xs),0>vs)return vs;for(Ts+=vs,Es+=vs,ys.mf_size-=Ss.framesize,ys.mf_samples_to_encode-=Ss.framesize,Ps=0;Ps<ys.channels_out;Ps++)for(Ms=0;Ms<ys.mf_size;Ms++)Vs[Ps][Ms]=Vs[Ps][Ms+Ss.framesize]}}return Es}function Qe(Ss,Bs,Rs,As,ks,Ts){var xs=as.enc.lame_encode_mp3_frame(Ss,Bs,Rs,As,ks,Ts);return Ss.frameNum++,xs}function We(){this.n_in=0,this.n_out=0}function Ue(){this.num_used=0}function Je(Ss,Bs){return 0==Bs?Ss:Je(Bs,Ss%Bs)}function $e(Ss,Bs,Rs){var As=Math.PI*Bs;Ss/=Rs,0>Ss&&(Ss=0),1<Ss&&(Ss=1);var ks=Ss-.5,Ts=0.42-0.5*Math.cos(2*Ss*Math.PI)+0.08*Math.cos(4*Ss*Math.PI);return 1e-9>Math.abs(ks)?As/Math.PI:Ts*Math.sin(Rs*As*ks)/(Math.PI*Rs*ks)}function es(Ss,Bs,Rs,As,ks,Ts,xs,ys,Es){var vs=Ss.internal_flags,Ps=0,Hs=Ss.out_samplerate/Je(Ss.out_samplerate,Ss.in_samplerate),Ms,ws;Hs>ce.BPC&&(Hs=ce.BPC);var Vs=1e-4>Math.abs(vs.resample_ratio-Math.floor(.5+vs.resample_ratio))?1:0,Is=1/vs.resample_ratio;1<Is&&(Is=1);var Ls=31;0==Ls%2&&--Ls,Ls+=Vs;var js=Ls+1;if(0==vs.fill_buffer_resample_init){for(vs.inbuf_old[0]=B(js),vs.inbuf_old[1]=B(js),Ms=0;Ms<=2*Hs;++Ms)vs.blackfilt[Ms]=B(js);for(vs.itime[0]=0,vs.itime[1]=0,Ps=0;Ps<=2*Hs;Ps++){var Ns=0,Os=(Ps-Hs)/(2*Hs);for(Ms=0;Ms<=Ls;Ms++)Ns+=vs.blackfilt[Ps][Ms]=$e(Ms-Os,Is,Ls);for(Ms=0;Ms<=Ls;Ms++)vs.blackfilt[Ps][Ms]/=Ns}vs.fill_buffer_resample_init=1}var qs=vs.inbuf_old[Es];for(ws=0;ws<As;ws++){var Xs,Ds;if(Xs=ws*vs.resample_ratio,Ps=0|Math.floor(Xs-vs.itime[Es]),Ls+Ps-Ls/2>=xs)break;var Os=Xs-vs.itime[Es]-(Ps+.5*(Ls%2));Ds=0|Math.floor(2*Os*Hs+Hs+.5);var Ys=0;for(Ms=0;Ms<=Ls;++Ms){var Cs=Ms+Ps-Ls/2,Fs;Fs=0>Cs?qs[js+Cs]:ks[Ts+Cs],Ys+=Fs*vs.blackfilt[Ds][Ms]}Bs[Rs+ws]=Ys}if(ys.num_used=Math.min(xs,Ls+Ps-Ls/2),vs.itime[Es]+=ys.num_used-ws*vs.resample_ratio,ys.num_used>=js)for(Ms=0;Ms<js;Ms++)qs[Ms]=ks[Ts+ys.num_used+Ms-js];else{var zs=js-ys.num_used;for(Ms=0;Ms<zs;++Ms)qs[Ms]=qs[Ms+ys.num_used];for(Ps=0;Ms<js;++Ms,++Ps)qs[Ms]=ks[Ts+Ps]}return ws}function ss(Ss,Bs,Rs,As,ks,Ts){var xs=Ss.internal_flags;if(.9999>xs.resample_ratio||1.0001<xs.resample_ratio)for(var ys=0,Es;ys<xs.channels_out;ys++)Es=new Ue,Ts.n_out=es(Ss,Bs[ys],xs.mf_size,Ss.framesize,Rs[ys],As,ks,Es,ys),Ts.n_in=Es.num_used;else{Ts.n_out=Math.min(Ss.framesize,ks),Ts.n_in=Ts.n_out;for(var vs=0;vs<Ts.n_out;++vs)Bs[0][xs.mf_size+vs]=Rs[0][As+vs],2==xs.channels_out&&(Bs[1][xs.mf_size+vs]=Rs[1][As+vs])}}var as=this;he.V9=410,he.V8=420,he.V7=430,he.V6=440,he.V5=450,he.V4=460,he.V3=470,he.V2=480,he.V1=490,he.V0=500,he.R3MIX=1e3,he.STANDARD=1001,he.EXTREME=1002,he.INSANE=1003,he.STANDARD_FAST=1004,he.EXTREME_FAST=1005,he.MEDIUM=1006,he.MEDIUM_FAST=1007;he.LAME_MAXMP3BUFFER=16384+131072;var ns,is,ls,rs,os,ps=new me,ms,hs,ds,us;this.enc=new ne,this.setModules=function(Ss,Bs,Rs,As,ks,Ts,xs,ys,Es){ns=Ss,is=Bs,ls=Rs,rs=As,os=ks,ms=Ts,hs=xs,ds=ys,us=Es,this.enc.setModules(is,ps,rs,ms)};var gs=4294479419;this.lame_init=function(){var Ss=new K,Bs=je(Ss);return 0==Bs?(Ss.lame_allocated_gfp=1,Ss):null},this.nearestBitrateFullIndex=function(Ss){var Bs=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],Rs=0,As=0,ks=0,Ts=0;Ts=Bs[16],ks=16,As=Bs[16],Rs=16;for(var xs=0;16>xs;xs++)if(Math.max(Ss,Bs[xs+1])!=Ss){Ts=Bs[xs+1],ks=xs+1,As=Bs[xs],Rs=xs;break}return Ts-Ss>Ss-As?Rs:ks},this.lame_init_params=function(Ss){var Bs=Ss.internal_flags;if(Bs.Class_ID=0,null==Bs.ATH&&(Bs.ATH=new Q),null==Bs.PSY&&(Bs.PSY=new Ve),null==Bs.rgdata&&(Bs.rgdata=new W),Bs.channels_in=Ss.num_channels,1==Bs.channels_in&&(Ss.mode=I.MONO),Bs.channels_out=Ss.mode==I.MONO?1:2,Bs.mode_ext=ne.MPG_MD_MS_LR,Ss.mode==I.MONO&&(Ss.force_ms=!1),Ss.VBR==V.vbr_off&&128!=Ss.VBR_mean_bitrate_kbps&&0==Ss.brate&&(Ss.brate=Ss.VBR_mean_bitrate_kbps),Ss.VBR==V.vbr_off||Ss.VBR==V.vbr_mtrh||Ss.VBR==V.vbr_mt||(Ss.free_format=!1),Ss.VBR==V.vbr_off&&0==Ss.brate&&Y.EQ(Ss.compression_ratio,0)&&(Ss.compression_ratio=11.025),Ss.VBR==V.vbr_off&&0<Ss.compression_ratio&&(0==Ss.out_samplerate&&(Ss.out_samplerate=map2MP3Frequency(int(0.97*Ss.in_samplerate))),Ss.brate=0|16*Ss.out_samplerate*Bs.channels_out/(1e3*Ss.compression_ratio),Bs.samplerate_index=qe(Ss.out_samplerate,Ss),!Ss.free_format&&(Ss.brate=Xe(Ss.brate,Ss.version,Ss.out_samplerate))),0!=Ss.out_samplerate&&(16000>Ss.out_samplerate?(Ss.VBR_mean_bitrate_kbps=Math.max(Ss.VBR_mean_bitrate_kbps,8),Ss.VBR_mean_bitrate_kbps=Math.min(Ss.VBR_mean_bitrate_kbps,64)):32000>Ss.out_samplerate?(Ss.VBR_mean_bitrate_kbps=Math.max(Ss.VBR_mean_bitrate_kbps,8),Ss.VBR_mean_bitrate_kbps=Math.min(Ss.VBR_mean_bitrate_kbps,160)):(Ss.VBR_mean_bitrate_kbps=Math.max(Ss.VBR_mean_bitrate_kbps,32),Ss.VBR_mean_bitrate_kbps=Math.min(Ss.VBR_mean_bitrate_kbps,320))),0==Ss.lowpassfreq){var Rs=16000;switch(Ss.VBR){case V.vbr_off:{var As=new Ie;Ye(As,Ss.brate),Rs=As.lowerlimit;break}case V.vbr_abr:{var As=new Ie;Ye(As,Ss.VBR_mean_bitrate_kbps),Rs=As.lowerlimit;break}case V.vbr_rh:{var ks=[19500,19000,18600,18000,17500,16000,15600,14900,12500,10000,3950];if(0<=Ss.VBR_q&&9>=Ss.VBR_q){var Ts=ks[Ss.VBR_q],xs=ks[Ss.VBR_q+1],ys=Ss.VBR_q_frac;Rs=linear_int(Ts,xs,ys)}else Rs=19500;break}default:{var ks=[19500,19000,18500,18000,17500,16500,15500,14500,12500,9500,3950];if(0<=Ss.VBR_q&&9>=Ss.VBR_q){var Ts=ks[Ss.VBR_q],xs=ks[Ss.VBR_q+1],ys=Ss.VBR_q_frac;Rs=linear_int(Ts,xs,ys)}else Rs=19500}}Ss.mode==I.MONO&&(Ss.VBR==V.vbr_off||Ss.VBR==V.vbr_abr)&&(Rs*=1.5),Ss.lowpassfreq=0|Rs}if(0==Ss.out_samplerate&&(2*Ss.lowpassfreq>Ss.in_samplerate&&(Ss.lowpassfreq=Ss.in_samplerate/2),Ss.out_samplerate=Oe(0|Ss.lowpassfreq,Ss.in_samplerate)),Ss.lowpassfreq=Math.min(20500,Ss.lowpassfreq),Ss.lowpassfreq=Math.min(Ss.out_samplerate/2,Ss.lowpassfreq),Ss.VBR==V.vbr_off&&(Ss.compression_ratio=16*Ss.out_samplerate*Bs.channels_out/(1e3*Ss.brate)),Ss.VBR==V.vbr_abr&&(Ss.compression_ratio=16*Ss.out_samplerate*Bs.channels_out/(1e3*Ss.VBR_mean_bitrate_kbps)),Ss.bWriteVbrTag||(Ss.findReplayGain=!1,Ss.decode_on_the_fly=!1,Bs.findPeakSample=!1),Bs.findReplayGain=Ss.findReplayGain,Bs.decode_on_the_fly=Ss.decode_on_the_fly,Bs.decode_on_the_fly&&(Bs.findPeakSample=!0),Bs.findReplayGain&&ns.InitGainAnalysis(Bs.rgdata,Ss.out_samplerate)==O.INIT_GAIN_ANALYSIS_ERROR)return Ss.internal_flags=null,-6;switch(Bs.decode_on_the_fly&&!Ss.decode_only&&(null!=Bs.hip&&us.hip_decode_exit(Bs.hip),Bs.hip=us.hip_decode_init()),Bs.mode_gr=24000>=Ss.out_samplerate?1:2,Ss.framesize=576*Bs.mode_gr,Ss.encoder_delay=ne.ENCDELAY,Bs.resample_ratio=Ss.in_samplerate/Ss.out_samplerate,Ss.VBR){case V.vbr_mt:case V.vbr_rh:case V.vbr_mtrh:{Ss.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][Ss.VBR_q]}break;case V.vbr_abr:Ss.compression_ratio=16*Ss.out_samplerate*Bs.channels_out/(1e3*Ss.VBR_mean_bitrate_kbps);break;default:Ss.compression_ratio=16*Ss.out_samplerate*Bs.channels_out/(1e3*Ss.brate);}if(Ss.mode==I.NOT_SET&&(Ss.mode=I.JOINT_STEREO),0<Ss.highpassfreq?(Bs.highpass1=2*Ss.highpassfreq,Bs.highpass2=0<=Ss.highpasswidth?2*(Ss.highpassfreq+Ss.highpasswidth):2*Ss.highpassfreq,Bs.highpass1/=Ss.out_samplerate,Bs.highpass2/=Ss.out_samplerate):(Bs.highpass1=0,Bs.highpass2=0),0<Ss.lowpassfreq?(Bs.lowpass2=2*Ss.lowpassfreq,0<=Ss.lowpasswidth?(Bs.lowpass1=2*(Ss.lowpassfreq-Ss.lowpasswidth),0>Bs.lowpass1&&(Bs.lowpass1=0)):Bs.lowpass1=2*Ss.lowpassfreq,Bs.lowpass1/=Ss.out_samplerate,Bs.lowpass2/=Ss.out_samplerate):(Bs.lowpass1=0,Bs.lowpass2=0),Ce(Ss),Bs.samplerate_index=qe(Ss.out_samplerate,Ss),0>Bs.samplerate_index)return Ss.internal_flags=null,-1;if(Ss.VBR!=V.vbr_off)Bs.bitrate_index=1;else if(Ss.free_format)Bs.bitrate_index=0;else if(Ss.brate=Xe(Ss.brate,Ss.version,Ss.out_samplerate),Bs.bitrate_index=De(Ss.brate,Ss.version,Ss.out_samplerate),0>=Bs.bitrate_index)return Ss.internal_flags=null,-1;Ss.analysis&&(Ss.bWriteVbrTag=!1),null!=Bs.pinfo&&(Ss.bWriteVbrTag=!1),is.init_bit_stream_w(Bs);for(var vs=Bs.samplerate_index+3*Ss.version+6*(16000>Ss.out_samplerate?1:0),Ms=0;Ms<ne.SBMAX_l+1;Ms++)Bs.scalefac_band.l[Ms]=rs.sfBandIndex[vs].l[Ms];for(var Ms=0;Ms<ne.PSFB21+1;Ms++){var Ps=(Bs.scalefac_band.l[22]-Bs.scalefac_band.l[21])/ne.PSFB21,ws=Bs.scalefac_band.l[21]+Ms*Ps;Bs.scalefac_band.psfb21[Ms]=ws}Bs.scalefac_band.psfb21[ne.PSFB21]=576;for(var Ms=0;Ms<ne.SBMAX_s+1;Ms++)Bs.scalefac_band.s[Ms]=rs.sfBandIndex[vs].s[Ms];for(var Ms=0;Ms<ne.PSFB12+1;Ms++){var Ps=(Bs.scalefac_band.s[13]-Bs.scalefac_band.s[12])/ne.PSFB12,ws=Bs.scalefac_band.s[12]+Ms*Ps;Bs.scalefac_band.psfb12[Ms]=ws}Bs.scalefac_band.psfb12[ne.PSFB12]=192,Bs.sideinfo_len=1==Ss.version?1==Bs.channels_out?21:36:1==Bs.channels_out?13:21,Ss.error_protection&&(Bs.sideinfo_len+=2),ze(Ss),Bs.Class_ID=gs;{var Hs;for(Hs=0;19>Hs;Hs++)Bs.nsPsy.pefirbuf[Hs]=700*Bs.mode_gr*Bs.channels_out;-1==Ss.ATHtype&&(Ss.ATHtype=4)}switch(Ss.VBR){case V.vbr_mt:Ss.VBR=V.vbr_mtrh;case V.vbr_mtrh:{null==Ss.useTemporal&&(Ss.useTemporal=!1),ls.apply_preset(Ss,500-10*Ss.VBR_q,0),0>Ss.quality&&(Ss.quality=LAME_DEFAULT_QUALITY),5>Ss.quality&&(Ss.quality=0),5<Ss.quality&&(Ss.quality=5),Bs.PSY.mask_adjust=Ss.maskingadjust,Bs.PSY.mask_adjust_short=Ss.maskingadjust_short,Bs.sfb21_extra=!Ss.experimentalY&&44000<Ss.out_samplerate,Bs.iteration_loop=new VBRNewIterationLoop(os);break}case V.vbr_rh:{ls.apply_preset(Ss,500-10*Ss.VBR_q,0),Bs.PSY.mask_adjust=Ss.maskingadjust,Bs.PSY.mask_adjust_short=Ss.maskingadjust_short,Bs.sfb21_extra=!Ss.experimentalY&&44000<Ss.out_samplerate,6<Ss.quality&&(Ss.quality=6),0>Ss.quality&&(Ss.quality=LAME_DEFAULT_QUALITY),Bs.iteration_loop=new VBROldIterationLoop(os);break}default:{var Vs;Bs.sfb21_extra=!1,0>Ss.quality&&(Ss.quality=LAME_DEFAULT_QUALITY),Vs=Ss.VBR,Vs==V.vbr_off&&(Ss.VBR_mean_bitrate_kbps=Ss.brate),ls.apply_preset(Ss,Ss.VBR_mean_bitrate_kbps,0),Ss.VBR=Vs,Bs.PSY.mask_adjust=Ss.maskingadjust,Bs.PSY.mask_adjust_short=Ss.maskingadjust_short,Bs.iteration_loop=Vs==V.vbr_off?new U(os):new ABRIterationLoop(os);break}}if(Ss.VBR!=V.vbr_off){if(Bs.VBR_min_bitrate=1,Bs.VBR_max_bitrate=14,16000>Ss.out_samplerate&&(Bs.VBR_max_bitrate=8),0!=Ss.VBR_min_bitrate_kbps&&(Ss.VBR_min_bitrate_kbps=Xe(Ss.VBR_min_bitrate_kbps,Ss.version,Ss.out_samplerate),Bs.VBR_min_bitrate=De(Ss.VBR_min_bitrate_kbps,Ss.version,Ss.out_samplerate),0>Bs.VBR_min_bitrate))return-1;if(0!=Ss.VBR_max_bitrate_kbps&&(Ss.VBR_max_bitrate_kbps=Xe(Ss.VBR_max_bitrate_kbps,Ss.version,Ss.out_samplerate),Bs.VBR_max_bitrate=De(Ss.VBR_max_bitrate_kbps,Ss.version,Ss.out_samplerate),0>Bs.VBR_max_bitrate))return-1;Ss.VBR_min_bitrate_kbps=we.bitrate_table[Ss.version][Bs.VBR_min_bitrate],Ss.VBR_max_bitrate_kbps=we.bitrate_table[Ss.version][Bs.VBR_max_bitrate],Ss.VBR_mean_bitrate_kbps=Math.min(we.bitrate_table[Ss.version][Bs.VBR_max_bitrate],Ss.VBR_mean_bitrate_kbps),Ss.VBR_mean_bitrate_kbps=Math.max(we.bitrate_table[Ss.version][Bs.VBR_min_bitrate],Ss.VBR_mean_bitrate_kbps)}return Ss.tune&&(Bs.PSY.mask_adjust+=Ss.tune_value_a,Bs.PSY.mask_adjust_short+=Ss.tune_value_a),Fe(Ss),Bs.ATH.useAdjust=0>Ss.athaa_type?3:Ss.athaa_type,Bs.ATH.aaSensitivityP=Math.pow(10,Ss.athaa_sensitivity/-10),null==Ss.short_blocks&&(Ss.short_blocks=H.short_block_allowed),Ss.short_blocks==H.short_block_allowed&&(Ss.mode==I.JOINT_STEREO||Ss.mode==I.STEREO)&&(Ss.short_blocks=H.short_block_coupled),0>Ss.quant_comp&&(Ss.quant_comp=1),0>Ss.quant_comp_short&&(Ss.quant_comp_short=0),0>Ss.msfix&&(Ss.msfix=0),Ss.exp_nspsytune|=1,0>Ss.internal_flags.nsPsy.attackthre&&(Ss.internal_flags.nsPsy.attackthre=me.NSATTACKTHRE),0>Ss.internal_flags.nsPsy.attackthre_s&&(Ss.internal_flags.nsPsy.attackthre_s=me.NSATTACKTHRE_S),0>Ss.scale&&(Ss.scale=1),0>Ss.ATHtype&&(Ss.ATHtype=4),0>Ss.ATHcurve&&(Ss.ATHcurve=4),0>Ss.athaa_loudapprox&&(Ss.athaa_loudapprox=2),0>Ss.interChRatio&&(Ss.interChRatio=0),null==Ss.useTemporal&&(Ss.useTemporal=!0),Bs.slot_lag=Bs.frac_SpF=0,Ss.VBR==V.vbr_off&&(Bs.slot_lag=Bs.frac_SpF=0|72000*(Ss.version+1)*Ss.brate%Ss.out_samplerate),rs.iteration_init(Ss),ps.psymodel_init(Ss),0},this.lame_encode_flush=function(Ss,Bs,Rs,As){var ks=Ss.internal_flags,Ts=M([2,1152]),xs=0,Ps=ks.mf_samples_to_encode-ne.POSTDELAY,ws=Ze(Ss),ys,Es,vs,Ms;if(1>ks.mf_samples_to_encode)return 0;for(ys=0,Ss.in_samplerate!=Ss.out_samplerate&&(Ps+=16*Ss.out_samplerate/Ss.in_samplerate),vs=Ss.framesize-Ps%Ss.framesize,576>vs&&(vs+=Ss.framesize),Ss.encoder_padding=vs,Ms=(Ps+vs)/Ss.framesize;0<Ms&&0<=xs;){var Hs=ws-ks.mf_size,Vs=Ss.frameNum;Hs*=Ss.in_samplerate,Hs/=Ss.out_samplerate,1152<Hs&&(Hs=1152),1>Hs&&(Hs=1),Es=As-ys,0==As&&(Es=0),xs=this.lame_encode_buffer(Ss,Ts[0],Ts[1],Hs,Bs,Rs,Es),Rs+=xs,ys+=xs,Ms-=Vs==Ss.frameNum?0:1}if(ks.mf_samples_to_encode=0,0>xs)return xs;if(Es=As-ys,0==As&&(Es=0),is.flush_bitstream(Ss),xs=is.copy_buffer(ks,Bs,Rs,Es,1),0>xs)return xs;if(Rs+=xs,ys+=xs,Es=As-ys,0==As&&(Es=0),Ss.write_id3tag_automatic){if(ds.id3tag_write_v1(Ss),xs=is.copy_buffer(ks,Bs,Rs,Es,0),0>xs)return xs;ys+=xs}return ys},this.lame_encode_buffer=function(Ss,Bs,Rs,As,ks,Ts,xs){var ys=Ss.internal_flags,Es=[null,null];if(ys.Class_ID!=gs)return-3;if(0==As)return 0;Ge(ys,As),Es[0]=ys.in_buffer_0,Es[1]=ys.in_buffer_1;for(var vs=0;vs<As;vs++)Es[0][vs]=Bs[vs],1<ys.channels_in&&(Es[1][vs]=Rs[vs]);return Ke(Ss,Es[0],Es[1],As,ks,Ts,xs)}}function de(){var Ve,Ie;this.setModules=function(Le,je){Ve=Le,Ie=je}}function ue(){var Ve,Ie,Le;this.setModules=function(je,Ne,Oe){Ve=je,Ie=Ne,Le=Oe}}function ge(){}function Se(){var Ve,Ie;this.setModules=function(Le,je){Ve=Le,Ie=je}}function Re(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Ae(Ve){return Ve.charCodeAt(0)<<24|Ve.charCodeAt(1)<<16|Ve.charCodeAt(2)<<8|Ve.charCodeAt(3)}var xe={fill:function(Ve,Ie,Le,je){if(2==arguments.length)for(var Ne=0;Ne<Ve.length;Ne++)Ve[Ne]=arguments[1];else for(var Ne=Ie;Ne<Le;Ne++)Ve[Ne]=je}},ye={};ye.arraycopy=function(Ve,Ie,Le,je,Ne){for(var Oe=Ie+Ne;Ie<Oe;)Le[je++]=Ve[Ie++]};var Ee={};Ee.SQRT2=1.4142135623730951,Ee.FAST_LOG10=function(Ve){return Math.log10(Ve)},Ee.FAST_LOG10_X=function(Ve,Ie){return Math.log10(Ve)*Ie},H.short_block_allowed=new H(0),H.short_block_coupled=new H(1),H.short_block_dispensed=new H(2),H.short_block_forced=new H(3);var ve={};ve.MAX_VALUE=3.4028235e38,V.vbr_off=new V(0),V.vbr_mt=new V(1),V.vbr_rh=new V(2),V.vbr_abr=new V(3),V.vbr_mtrh=new V(4),V.vbr_default=V.vbr_mtrh;I.STEREO=new I(0),I.JOINT_STEREO=new I(1),I.DUAL_CHANNEL=new I(2),I.MONO=new I(3),I.NOT_SET=new I(4),O.STEPS_per_dB=100,O.MAX_dB=120,O.GAIN_NOT_ENOUGH_SAMPLES=-24601,O.GAIN_ANALYSIS_ERROR=0,O.GAIN_ANALYSIS_OK=1,O.INIT_GAIN_ANALYSIS_ERROR=0,O.INIT_GAIN_ANALYSIS_OK=1,O.YULE_ORDER=10,O.MAX_ORDER=O.YULE_ORDER,O.MAX_SAMP_FREQ=48000,O.RMS_WINDOW_TIME_NUMERATOR=1,O.RMS_WINDOW_TIME_DENOMINATOR=20,O.MAX_SAMPLES_PER_WINDOW=O.MAX_SAMP_FREQ*O.RMS_WINDOW_TIME_NUMERATOR/O.RMS_WINDOW_TIME_DENOMINATOR+1,Y.EQ=function(Ve,Ie){return Math.abs(Ve)>Math.abs(Ie)?Math.abs(Ve-Ie)<=1e-6*Math.abs(Ve):Math.abs(Ve-Ie)<=1e-6*Math.abs(Ie)},Y.NEQ=function(Ve,Ie){return!Y.EQ(Ve,Ie)},C.NUMTOCENTRIES=100,C.MAXFRAMESIZE=2880;var we={};we.t1HB=[1,1,1,0],we.t2HB=[1,2,1,3,1,1,3,2,0],we.t3HB=[3,2,1,1,1,1,3,2,0],we.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],we.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],we.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],we.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],we.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],we.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],we.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],we.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],we.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],we.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],we.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],we.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],we.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],we.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],we.t1l=[1,4,3,5],we.t2l=[1,4,7,4,5,7,6,7,8],we.t3l=[2,3,7,4,4,7,6,7,8],we.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],we.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],we.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],we.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],we.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],we.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],we.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],we.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],we.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],we.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],we.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],we.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],we.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],we.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],we.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],we.ht=[new F(0,0,null,null),new F(2,0,we.t1HB,we.t1l),new F(3,0,we.t2HB,we.t2l),new F(3,0,we.t3HB,we.t3l),new F(0,0,null,null),new F(4,0,we.t5HB,we.t5l),new F(4,0,we.t6HB,we.t6l),new F(6,0,we.t7HB,we.t7l),new F(6,0,we.t8HB,we.t8l),new F(6,0,we.t9HB,we.t9l),new F(8,0,we.t10HB,we.t10l),new F(8,0,we.t11HB,we.t11l),new F(8,0,we.t12HB,we.t12l),new F(16,0,we.t13HB,we.t13l),new F(0,0,null,we.t16_5l),new F(16,0,we.t15HB,we.t15l),new F(1,1,we.t16HB,we.t16l),new F(2,3,we.t16HB,we.t16l),new F(3,7,we.t16HB,we.t16l),new F(4,15,we.t16HB,we.t16l),new F(6,63,we.t16HB,we.t16l),new F(8,255,we.t16HB,we.t16l),new F(10,1023,we.t16HB,we.t16l),new F(13,8191,we.t16HB,we.t16l),new F(4,15,we.t24HB,we.t24l),new F(5,31,we.t24HB,we.t24l),new F(6,63,we.t24HB,we.t24l),new F(7,127,we.t24HB,we.t24l),new F(8,255,we.t24HB,we.t24l),new F(9,511,we.t24HB,we.t24l),new F(11,2047,we.t24HB,we.t24l),new F(13,8191,we.t24HB,we.t24l),new F(0,0,we.t32HB,we.t32l),new F(0,0,we.t33HB,we.t33l)],we.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],we.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],we.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],we.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],we.samplerate_table=[[22050,24000,16000,-1],[44100,48000,32000,-1],[11025,12000,8000,-1]],we.scfsi_band=[0,6,11,16,21],$.Q_MAX=257,$.Q_MAX2=116,$.LARGE_BITS=1e5,$.IXMAX_VAL=8206;var He={};He.SFBMAX=3*ne.SBMAX_s,ne.ENCDELAY=576,ne.POSTDELAY=1152,ne.MDCTDELAY=48,ne.FFTOFFSET=224+ne.MDCTDELAY,ne.DECDELAY=528,ne.SBLIMIT=32,ne.CBANDS=64,ne.SBPSY_l=21,ne.SBPSY_s=12,ne.SBMAX_l=22,ne.SBMAX_s=13,ne.PSFB21=6,ne.PSFB12=6,ne.BLKSIZE=1024,ne.HBLKSIZE=ne.BLKSIZE/2+1,ne.BLKSIZE_s=256,ne.HBLKSIZE_s=ne.BLKSIZE_s/2+1,ne.NORM_TYPE=0,ne.START_TYPE=1,ne.SHORT_TYPE=2,ne.STOP_TYPE=3,ne.MPG_MD_LR_LR=0,ne.MPG_MD_LR_I=1,ne.MPG_MD_MS_LR=2,ne.MPG_MD_MS_I=3,ne.fircoef=[-0.1039435,-0.1892065,-0.21623599999999998,-0.155915,3.898045e-17,0.23387249999999998,0.50455,0.756825,0.9354899999999999],ce.MFSIZE=3456+ne.ENCDELAY-ne.MDCTDELAY,ce.MAX_HEADER_BUF=256,ce.MAX_BITS_PER_CHANNEL=4095,ce.MAX_BITS_PER_GRANULE=7680,ce.BPC=320,Re.RIFF=Ae("RIFF"),Re.WAVE=Ae("WAVE"),Re.fmt_=Ae("fmt "),Re.data=Ae("data"),Re.readHeader=function(Ve){var Ie=new Re,Le=Ve.getUint32(0,!1);if(Re.RIFF==Le){Ve.getUint32(4,!0);if(Re.WAVE==Ve.getUint32(8,!1)&&Re.fmt_==Ve.getUint32(12,!1)){var Ne=Ve.getUint32(16,!0),Oe=20;switch(Ne){case 16:case 18:Ie.channels=Ve.getUint16(Oe+2,!0),Ie.sampleRate=Ve.getUint32(Oe+4,!0);break;default:throw"extended fmt chunk not implemented";}Oe+=Ne;for(var qe=Re.data,Xe=0;qe!=Le&&(Le=Ve.getUint32(Oe,!1),Xe=Ve.getUint32(Oe+4,!0),qe!=Le);)Oe+=Xe+8;return Ie.dataLen=Xe,Ie.dataOffset=Oe+8,Ie}}},He.SFBMAX=3*ne.SBMAX_s,this.Mp3Encoder=function(Ve,Ie,Le){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),Ve=1,Ie=44100,Le=128);var je=new he,Ne=new de,Oe=new O,qe=new Y,Xe=new N,De=new $,Ye=new ae,Ce=new C,Fe=new L,ze=new Se,Ge=new X,Ze=new D,Ke=new ue,Qe=new ge;je.setModules(Oe,qe,Xe,De,Ye,Ce,Fe,ze,Qe),qe.setModules(Oe,Qe,Fe,Ce),ze.setModules(qe,Fe),Xe.setModules(je),Ye.setModules(qe,Ge,De,Ze),De.setModules(Ze,Ge,je.enc.psy),Ge.setModules(qe),Ze.setModules(De),Ce.setModules(je,qe,Fe),Ne.setModules(Ke,Qe),Ke.setModules(Fe,ze,Xe);var We=je.lame_init();We.num_channels=Ve,We.in_samplerate=Ie,We.brate=Le,We.mode=I.STEREO,We.quality=3,We.bWriteVbrTag=!1,We.disable_reservoir=!0,We.write_id3tag_automatic=!1;var Ue=je.lame_init_params(We),Je=1152,$e=0|1.25*Je+7200,es=_($e);this.encodeBuffer=function(ss,as){1==Ve&&(as=ss),ss.length>Je&&(Je=ss.length,$e=0|1.25*Je+7200,es=_($e)),es=_($e);var _s=je.lame_encode_buffer(We,ss,as,ss.length,es,0,$e);return console.log(_s),es.subarray(0,_s)},this.flush=function(){var ss=je.lame_encode_flush(We,es,0,$e);return es.subarray(0,ss)}},this.WavHeader=Re}
